import"../chunks/DsnmJJEf.js";import{av as we,W as Re,a8 as ee,U as k,an as Ve,X as qe,b as A,l as Ge,aM as Ue,Z as Ke,aa as he,aq as te,T as U,Y as Fe,ay as Ye,_ as ne,aP as Qe,aN as Z,V as de,aR as Xe,Q as le,at as Se,al as Ie,aV as J,aQ as Ae,a0 as Ze,aW as $,aX as Be,aY as ae,a7 as Ee,ag as Je,aZ as $e,as as je,a_ as et,j as tt,a$ as Ne,q as at,b0 as rt,b1 as st,e as it,ai as nt,b2 as lt,b3 as ot,b4 as ut,aS as P,b5 as ve,i as T,R as re,G as Oe,d as W,H as j,I as oe,a as K,J as Te,b6 as ke,K as V,M as z,c as ft,f as ct,h as ht,N as q,aT as pe,b7 as dt}from"../chunks/DXq1jusL.js";import{d as De,a as vt,e as pt,s as mt}from"../chunks/CtUVcy4A.js";import{p as X,b as gt}from"../chunks/8tpBX6B5.js";function me(r,e){return e}function _t(r,e,t){for(var a=r.items,s=[],n=e.length,i=0;i<n;i++)$e(e[i].e,s,!0);var f=n>0&&s.length===0&&t!==null;if(f){var m=t.parentNode;je(m),m.append(t),a.clear(),H(r,e[0].prev,e[n-1].next)}et(s,()=>{for(var g=0;g<n;g++){var h=e[g];f||(a.delete(h.k),H(r,h.prev,h.next)),Ee(h.e,!f)}})}function ue(r,e,t,a,s,n=null){var i=r,f={flags:e,items:new Map,first:null},m=(e&Ne)!==0;if(m){var g=r;i=k?ee(Ve(g)):g.appendChild(we())}k&&qe();var h=null,l=!1,b=new Map,w=Ge(()=>{var p=t();return Ie(p)?p:p==null?[]:Se(p)}),d,o;function v(){yt(o,d,f,b,i,s,e,a,t),n!==null&&(d.length===0?h?Ae(h):h=ne(()=>n(i)):h!==null&&Ze(h,()=>{h=null}))}Re(()=>{o??=tt,d=A(w);var p=d.length;if(l&&p===0)return;l=p===0;let x=!1;if(k){var S=Ue(i)===Ke;S!==(p===0)&&(i=he(),ee(i),te(!1),x=!0)}if(k){for(var M=null,_,u=0;u<p;u++){if(U.nodeType===Fe&&U.data===Ye){i=U,x=!0,te(!1);break}var c=d[u],y=a(c,u);_=fe(U,f,M,null,c,y,u,s,e,t),f.items.set(y,_),M=_}p>0&&ee(he())}if(k)p===0&&n&&(h=ne(()=>n(i)));else if(Qe()){var D=new Set,R=Z;for(u=0;u<p;u+=1){c=d[u],y=a(c,u);var C=f.items.get(y)??b.get(y);C?(e&($|J))!==0&&He(C,c,u,e):(_=fe(null,f,null,null,c,y,u,s,e,t,!0),b.set(y,_)),D.add(y)}for(const[I,O]of f.items)D.has(I)||R.skipped_effects.add(O.e);R.add_callback(v)}else v();x&&te(!0),A(w)}),k&&(i=U)}function yt(r,e,t,a,s,n,i,f,m){var g=(i&rt)!==0,h=(i&($|J))!==0,l=e.length,b=t.items,w=t.first,d=w,o,v=null,p,x=[],S=[],M,_,u,c;if(g)for(c=0;c<l;c+=1)M=e[c],_=f(M,c),u=b.get(_),u!==void 0&&(u.a?.measure(),(p??=new Set).add(u));for(c=0;c<l;c+=1){if(M=e[c],_=f(M,c),u=b.get(_),u===void 0){var y=a.get(_);if(y!==void 0){a.delete(_),b.set(_,y);var D=v?v.next:d;H(t,v,y),H(t,y,D),se(y,D,s),v=y}else{var R=d?d.e.nodes_start:s;v=fe(R,t,v,v===null?t.first:v.next,M,_,c,n,i,m)}b.set(_,v),x=[],S=[],d=v.next;continue}if(h&&He(u,M,c,i),(u.e.f&ae)!==0&&(Ae(u.e),g&&(u.a?.unfix(),(p??=new Set).delete(u))),u!==d){if(o!==void 0&&o.has(u)){if(x.length<S.length){var C=S[0],I;v=C.prev;var O=x[0],L=x[x.length-1];for(I=0;I<x.length;I+=1)se(x[I],C,s);for(I=0;I<S.length;I+=1)o.delete(S[I]);H(t,O.prev,L.next),H(t,v,O),H(t,L,C),d=C,v=L,c-=1,x=[],S=[]}else o.delete(u),se(u,d,s),H(t,u.prev,u.next),H(t,u,v===null?t.first:v.next),H(t,v,u),v=u;continue}for(x=[],S=[];d!==null&&d.k!==_;)(d.e.f&ae)===0&&(o??=new Set).add(d),S.push(d),d=d.next;if(d===null)continue;u=d}x.push(u),v=u,d=u.next}if(d!==null||o!==void 0){for(var N=o===void 0?[]:Se(o);d!==null;)(d.e.f&ae)===0&&N.push(d),d=d.next;var G=N.length;if(G>0){var Q=(i&Ne)!==0&&l===0?s:null;if(g){for(c=0;c<G;c+=1)N[c].a?.measure();for(c=0;c<G;c+=1)N[c].a?.fix()}_t(t,N,Q)}}g&&at(()=>{if(p!==void 0)for(u of p)u.a?.apply()}),r.first=t.first&&t.first.e,r.last=v&&v.e;for(var Pe of a.values())Ee(Pe.e);a.clear()}function He(r,e,t,a){(a&$)!==0&&de(r.v,e),(a&J)!==0?de(r.i,t):r.i=t}function fe(r,e,t,a,s,n,i,f,m,g,h){var l=(m&$)!==0,b=(m&Be)===0,w=l?b?Xe(s,!1,!1):le(s):s,d=(m&J)===0?i:le(i),o={i:d,v:w,k:n,a:null,e:null,prev:t,next:a};try{if(r===null){var v=document.createDocumentFragment();v.append(r=we())}return o.e=ne(()=>f(r,w,d,g),k),o.e.prev=t&&t.e,o.e.next=a&&a.e,t===null?h||(e.first=o):(t.next=o,t.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function se(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,n=r.e.nodes_start;n!==null&&n!==a;){var i=Je(n);s.before(n),n=i}}function H(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const ge=[...` 	
\r\fÂ \v\uFEFF`];function bt(r,e,t){var a=""+r;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var n=s.length,i=0;(i=a.indexOf(s,i))>=0;){var f=i+n;(i===0||ge.includes(a[i-1]))&&(f===a.length||ge.includes(a[f]))?a=(i===0?"":a.substring(0,i))+a.substring(f+1):i=f}}return a===""?null:a}function Mt(r,e){return r==null?null:String(r)}function xt(r,e,t,a,s,n){var i=r.__className;if(k||i!==t||i===void 0){var f=bt(t,a,n);(!k||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):r.className=f),r.__className=t}else if(n&&s!==n)for(var m in n){var g=!!n[m];(s==null||g!==!!s[m])&&r.classList.toggle(m,g)}return n}function _e(r,e,t,a){var s=r.__style;if(k||s!==e){var n=Mt(e);(!k||n!==r.getAttribute("style"))&&(n==null?r.removeAttribute("style"):r.style.cssText=n),r.__style=e}return a}function Ce(r,e,t=!1){if(r.multiple){if(e==null)return;if(!Ie(e))return lt();for(var a of r.options)a.selected=e.includes(F(a));return}for(a of r.options){var s=F(a);if(ot(s,e)){a.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function wt(r){var e=new MutationObserver(()=>{Ce(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),nt(()=>{e.disconnect()})}function St(r,e,t=e){var a=new WeakSet,s=!0;st(r,"change",n=>{var i=n?"[selected]":":checked",f;if(r.multiple)f=[].map.call(r.querySelectorAll(i),F);else{var m=r.querySelector(i)??r.querySelector("option:not([disabled])");f=m&&F(m)}t(f),Z!==null&&a.add(Z)}),it(()=>{var n=e();if(r===document.activeElement){var i=ut??Z;if(a.has(i))return}if(Ce(r,n,s),s&&n===void 0){var f=r.querySelector(":checked");f!==null&&(n=F(f),t(n))}r.__value=n,s=!1}),wt(r)}function F(r){return"__value"in r?r.__value:r.value}var It=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],At=["difference","intersection","symmetricDifference","union"],ye=!1;class Y extends Set{#a=new Map;#e=P(0);#t=P(0);#r=ve||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}ye||this.#i()}#s(e){return ve===this.#r?P(e):le(e)}#i(){ye=!0;var e=Y.prototype,t=Set.prototype;for(const a of It)e[a]=function(...s){return A(this.#e),t[a].apply(this,s)};for(const a of At)e[a]=function(...s){A(this.#e);var n=t[a].apply(this,s);return new Y(n)}}has(e){var t=super.has(e),a=this.#a,s=a.get(e);if(s===void 0){if(!t)return A(this.#e),!1;s=this.#s(!0),a.set(e,s)}return A(s),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),re(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,s=a.get(e);return s!==void 0&&(a.delete(e),T(s,!1)),t&&(T(this.#t,super.size),re(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),re(this.#e)}}keys(){return this.values()}values(){return A(this.#e),super.values()}entries(){return A(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return A(this.#t)}}class Et{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class ze{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const s={value:e,priority:t,key:a};this.data.push(s);const n=this.data.length-1;this.indexMap.set(a,n),this.bubbleUp(n)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let s=e;t<this.data.length&&this.data[t].priority<this.data[s].priority&&(s=t),a<this.data.length&&this.data[a].priority<this.data[s].priority&&(s=a),s!==e&&(this.swap(e,s),this.minHeapify(s))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const a=this.data.length-1;if(t===a)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,a);const s=this.data.pop();this.indexMap.delete(s.key);const n=this.data[t],i=this.parent(t);return t>0&&this.data[i].priority>n.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Le=function*(r,e,t,a,s){const n=new ze,i=new Map,f=new Map,m=new Set,g=Array.from({length:a},(h,l)=>Array.from({length:t},(b,w)=>({x:w,y:l,isWall:s.has(E(w,l))}))).flat();for(const h of g){const l=h.x===r[0]&&h.y===r[1]?0:1/0,b=E(h.x,h.y);i.set(b,l),n.insert(h,l,b)}for(;!n.isEmpty();){const l=n.extractMin().value,b=E(l.x,l.y);if(m.has(b))continue;if(m.add(b),l.x===e[0]&&l.y===e[1])break;const w=i.get(b),d=[[l.x+1,l.y],[l.x-1,l.y],[l.x,l.y+1],[l.x,l.y-1]];for(const[o,v]of d){const p=g[o+v*t];if(p===void 0||p.isWall||o<0||v<0||o>=t||v>=a)continue;const x=E(p.x,p.y),S=w+1;S<i.get(x)&&(i.set(x,S),f.set(x,[l.x,l.y]),n.decreasePriority(x,S),yield be(f,[p.x,p.y]))}}yield be(f,e)};function be(r,e){const t=[e];for(;r.has(E(e[0],e[1]));)e=r.get(E(e[0],e[1])),t.unshift(e);return t}function ce(r,e,t,a){const s=[],n=r,i=e;r=r%2===0?r+1:r,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let v=0;v<r;v++)s.push({x:v,y:o,isWall:!0});const f=B(s,r,t[0],t[1]),m=ie(f,r,e,s,2),g=new Et,h=new Set,l=B(s,r,a[0],a[1]),b=ie(l,r,e,s,2);f.isWall=!1,l.isWall=!1,h.add(E(f.x,f.y));for(const o of[...m,...b])g.add(o.cell);for(;g.size>0;){const o=g.random(),v=ie(o,r,e,s,2),p=v.filter(M=>h.has(E(M.cell.x,M.cell.y)));if(p.length===0){g.remove(o);continue}const x=p[Math.floor(Math.random()*p.length)],S=B(s,r,o.x+x.direction[0],o.y+x.direction[1]);h.add(E(o.x,o.y)),S.isWall=!1,o.isWall=!1,g.remove(o);for(const M of v)h.has(E(M.cell.x,M.cell.y))||g.add(M.cell)}const w=new Y(s.filter(o=>o.isWall&&(o.x!==a[0]||o.y!==a[1])&&o.x<n&&o.y<i).map(o=>E(o.x,o.y)));return Le(t,a,n,i,w).length<=1?ce(n,i,t,a):w}function ie(r,e,t,a,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:B(a,e,r.x+i[0]*s,r.y+i[1]*s),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<t)}function B(r,e,t,a){if(!(t<0||a<0))return r[t+e*a]}function E(r,e){return`${r},${e}`}var Nt=r=>{r.preventDefault()},Ot=j('<div role="cell" tabindex="-1"></div>'),Tt=j('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function kt(r,e){Oe(e,!0);let t=X(e,"start",31,()=>W([0,0])),a=X(e,"end",31,()=>W([e.width-1,e.height-1])),s=X(e,"walls",27,()=>W(ce(e.width,e.height,t(),a()))),n=X(e,"pathfindingAlgorithm",27,()=>W(We)),i=!1,f=new Set,m="add",g=P(W([])),h=null,l=!1;function b(_=!1){if(l&&T(g,[],!0),_&&!l)return;l=!0;const u=n()(t(),a(),e.width,e.height,s());h!==null&&clearInterval(h),h=setInterval(()=>{const c=u.next();c.done?(clearInterval(h),h=null):T(g,c.value,!0)},5)}function w(){l=!1,T(g,[],!0),h!==null&&clearInterval(h)}function d(_,u,c){l||(i=!0,c?m="remove":_===t()[0]&&u===t()[1]?m="movestart":_===a()[0]&&u===a()[1]?m="movegoal":m="add",o(_,u),f.add(E(_,u)))}function o(_,u){const c=E(_,u);if(!(l||!i||_===t()[0]&&u===t()[1]||_===a()[0]&&u===a()[1])){switch(m){case"add":{f.has(c)||s().add(c);break}case"remove":{f.has(c)||s().delete(c);break}case"movestart":{(_!==a()[0]||u!==a()[1])&&t([_,u]);break}case"movegoal":{(_!==t()[0]||u!==t()[1])&&a([_,u]);break}}f.add(c)}}function v(_,u){if(!l)switch(m){case"movestart":case"movegoal":{const c=E(_,u);s().delete(c)}}}function p(){l||(i=!1,f.clear())}vt(()=>{h!==null&&clearInterval(h)});var x={startVisualisation:b,stopVisualisation:w},S=Tt();pt("mouseup",ke,()=>{p()});var M=V(S);return ue(M,21,()=>({length:e.width}),me,(_,u,c)=>{var y=ft(),D=ct(y);ue(D,17,()=>({length:e.height}),me,(R,C,I)=>{var O=Ot();let L;_e(O,`grid-column-start: ${c+1}; grid-row-start: ${I+1};`),O.__mousedown=N=>{d(c,I,N.button===2)},O.__mousemove=()=>{o(c,I)},O.__mouseup=()=>{v(c,I)},O.__contextmenu=[Nt],oe(N=>L=xt(O,1,"cell svelte-c024sg",null,L,N),[()=>({wall:s().has(E(c,I)),start:c===t()[0]&&I===t()[1],goal:c===a()[0]&&I===a()[1],path:A(g).some(N=>N[0]===c&&N[1]===I)})]),K(R,O)}),K(_,y)}),z(M),z(S),oe(()=>_e(M,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),K(r,S),Te(x)}De(["mousedown","mousemove","mouseup","contextmenu"]);const We=function*(r,e,t,a,s){const n=new ze,i=new Map,f=new Map,m=new Map,g=xe(r,e),h=E(r[0],r[1]);n.insert(r,0+g,h);for(let l=0;l<t;l++)for(let b=0;b<a;b++){const w=E(l,b);f.set(w,1/0),m.set(w,1/0)}for(f.set(h,0),m.set(h,g);!n.isEmpty();){const l=n.extractMin().value;if(l[0]===e[0]&&l[1]===e[1]){yield Me(i,l);return}const b=E(l[0],l[1]);n.delete(b);const w=[[l[0]+1,l[1]],[l[0]-1,l[1]],[l[0],l[1]+1],[l[0],l[1]-1]];for(const d of w){const[o,v]=d,p=E(o,v);if(o<0||v<0||o>=t||v>=a||s.has(p))continue;const S=f.get(b)+1;if(S<f.get(p)){const M=S+xe(d,e);i.set(p,l),f.set(p,S),m.set(p,M),n.has(p)||n.insert(d,M,p),yield Me(i,d)}}}yield[r]};function Me(r,e){const t=[e];for(;r.has(E(e[0],e[1]));)e=r.get(E(e[0],e[1])),t.unshift(e);return t}const xe=(r,e)=>Math.hypot(e[0]-r[0],e[1]-r[1]);var Dt=j("<option> </option>"),Ht=j('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select> <div><button>Start</button> <button>Stop</button></div></div></main>');function Pt(r,e){Oe(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:Le},astar:{name:"A*",algorithm:We}};let a=P(W(new Y)),s=50,n=25,i=P(W([0,0])),f=P(W([49,24])),m,g=P("astar"),h=pe(()=>t[A(g)].algorithm);function l(){A(a).clear(),m.startVisualisation(!0)}function b(){T(a,ce(s,n,A(i),A(f)),!0),m.startVisualisation(!0)}var w=Ht();ht(y=>{ke.title="Pathfinder"});var d=q(V(w),2),o=V(d),v=V(o);gt(kt(v,{width:s,height:n,get start(){return A(i)},set start(y){T(i,y,!0)},get end(){return A(f)},set end(y){T(f,y,!0)},get walls(){return A(a)},set walls(y){T(a,y,!0)},get pathfindingAlgorithm(){return A(h)},set pathfindingAlgorithm(y){T(h,y)}}),y=>m=y,()=>m),z(o);var p=q(o,2),x=V(p);x.__click=l;var S=q(x,2);S.__click=b,z(p);var M=q(p,2);M.__change=()=>{m.startVisualisation(!0)},ue(M,21,()=>Object.entries(t),([y,D])=>y,(y,D,R,C)=>{var I=pe(()=>dt(A(D),2));let O=()=>A(I)[0],L=()=>A(I)[1];var N=Dt(),G=V(N,!0);z(N);var Q={};oe(()=>{mt(G,L().name),Q!==(Q=O())&&(N.value=(N.__value=O())??"")}),K(y,N)}),z(M);var _=q(M,2),u=V(_);u.__click=()=>{m.startVisualisation()};var c=q(u,2);c.__click=()=>{m.stopVisualisation()},z(_),z(d),z(w),St(M,()=>A(g),y=>T(g,y)),K(r,w),Te()}De(["click","change"]);export{Pt as component};
