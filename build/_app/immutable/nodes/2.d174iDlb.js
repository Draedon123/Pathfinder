import"../chunks/DsnmJJEf.js";import{a0 as Ee,V as qe,_ as te,T as H,aA as Ke,U as Ue,g as k,o as Ge,X as $e,Y as Fe,Z as me,$ as ae,a7 as Y,ah as Ye,aJ as Xe,a1 as oe,a4 as Je,a2 as Q,ag as _e,m as Qe,ae as ue,aF as ke,ay as De,aW as B,a5 as Ne,a6 as Ze,aX as j,aY as Be,aZ as re,ap as Oe,av as je,a_ as et,aE as tt,a$ as at,k as rt,b0 as Te,q as st,b1 as it,b2 as nt,e as lt,t as ot,b3 as ut,b4 as ft,b5 as ct,a9 as U,b6 as ge,b as z,af as se,J as Ce,K as ee,M as fe,a as X,N as He,j as F,b7 as ze,O as K,Q as P,c as ht,f as dt,ab as ce,h as vt,R as $,b8 as pt}from"../chunks/Bqp-y4Du.js";import{d as Ve,w as mt,b as _t,e as gt,a as yt}from"../chunks/BuxLWLka.js";import{p as ie,s as bt,a as ye,c as wt,b as Mt}from"../chunks/CvOZo088.js";function be(a,e){return e}function xt(a,e,t){for(var r=a.items,n=[],s=e.length,i=0;i<s;i++)et(e[i].e,n,!0);var u=s>0&&n.length===0&&t!==null;if(u){var d=t.parentNode;tt(d),d.append(t),r.clear(),V(a,e[0].prev,e[s-1].next)}at(n,()=>{for(var v=0;v<s;v++){var m=e[v];u||(r.delete(m.k),V(a,m.prev,m.next)),Oe(m.e,!u)}})}function he(a,e,t,r,n,s=null){var i=a,u={flags:e,items:new Map,first:null},d=(e&Te)!==0;if(d){var v=a;i=H?te(Ke(v)):v.appendChild(Ee())}H&&Ue();var m=null,x=!1,l=new Map,_=Ge(()=>{var g=t();return De(g)?g:g==null?[]:ke(g)}),f,o;function h(){St(o,f,u,l,i,n,e,r,t),s!==null&&(f.length===0?m?Ne(m):m=oe(()=>s(i)):m!==null&&Ze(m,()=>{m=null}))}qe(()=>{o??=rt,f=k(_);var g=f.length;if(x&&g===0)return;x=g===0;let p=!1;if(H){var E=$e(i)===Fe;E!==(g===0)&&(i=me(),te(i),ae(!1),p=!0)}if(H){for(var w=null,S,c=0;c<g;c++){if(Y.nodeType===Ye&&Y.data===Xe){i=Y,p=!0,ae(!1);break}var y=f[c],b=r(y,c);S=de(Y,u,w,null,y,b,c,n,e,t),u.items.set(b,S),w=S}g>0&&te(me())}if(H)g===0&&s&&(m=oe(()=>s(i)));else if(Je()){var A=new Set,D=Q;for(c=0;c<g;c+=1){y=f[c],b=r(y,c);var M=u.items.get(b)??l.get(b);M?(e&(j|B))!==0&&Le(M,y,c,e):(S=de(null,u,null,null,y,b,c,n,e,t,!0),l.set(b,S)),A.add(b)}for(const[N,L]of u.items)A.has(N)||D.skipped_effects.add(L.e);D.add_callback(h)}else h();p&&ae(!0),k(_)}),H&&(i=Y)}function St(a,e,t,r,n,s,i,u,d){var v=(i&it)!==0,m=(i&(j|B))!==0,x=e.length,l=t.items,_=t.first,f=_,o,h=null,g,p=[],E=[],w,S,c,y;if(v)for(y=0;y<x;y+=1)w=e[y],S=u(w,y),c=l.get(S),c!==void 0&&(c.a?.measure(),(g??=new Set).add(c));for(y=0;y<x;y+=1){if(w=e[y],S=u(w,y),c=l.get(S),c===void 0){var b=r.get(S);if(b!==void 0){r.delete(S),l.set(S,b);var A=h?h.next:f;V(t,h,b),V(t,b,A),ne(b,A,n),h=b}else{var D=f?f.e.nodes_start:n;h=de(D,t,h,h===null?t.first:h.next,w,S,y,s,i,d)}l.set(S,h),p=[],E=[],f=h.next;continue}if(m&&Le(c,w,y,i),(c.e.f&re)!==0&&(Ne(c.e),v&&(c.a?.unfix(),(g??=new Set).delete(c))),c!==f){if(o!==void 0&&o.has(c)){if(p.length<E.length){var M=E[0],N;h=M.prev;var L=p[0],q=p[p.length-1];for(N=0;N<p.length;N+=1)ne(p[N],M,n);for(N=0;N<E.length;N+=1)o.delete(E[N]);V(t,L.prev,q.next),V(t,h,L),V(t,q,M),f=M,h=q,y-=1,p=[],E=[]}else o.delete(c),ne(c,f,n),V(t,c.prev,c.next),V(t,c,h===null?t.first:h.next),V(t,h,c),h=c;continue}for(p=[],E=[];f!==null&&f.k!==S;)(f.e.f&re)===0&&(o??=new Set).add(f),E.push(f),f=f.next;if(f===null)continue;c=f}p.push(c),h=c,f=c.next}if(f!==null||o!==void 0){for(var C=o===void 0?[]:ke(o);f!==null;)(f.e.f&re)===0&&C.push(f),f=f.next;var T=C.length;if(T>0){var R=(i&Te)!==0&&x===0?n:null;if(v){for(y=0;y<T;y+=1)C[y].a?.measure();for(y=0;y<T;y+=1)C[y].a?.fix()}xt(t,C,R)}}v&&st(()=>{if(g!==void 0)for(c of g)c.a?.apply()}),a.first=t.first&&t.first.e,a.last=h&&h.e;for(var W of r.values())Oe(W.e);r.clear()}function Le(a,e,t,r){(r&j)!==0&&_e(a.v,e),(r&B)!==0?_e(a.i,t):a.i=t}function de(a,e,t,r,n,s,i,u,d,v,m){var x=(d&j)!==0,l=(d&Be)===0,_=x?l?Qe(n,!1,!1):ue(n):n,f=(d&B)===0?i:ue(i),o={i:f,v:_,k:s,a:null,e:null,prev:t,next:r};try{if(a===null){var h=document.createDocumentFragment();h.append(a=Ee())}return o.e=oe(()=>u(a,_,f,v),H),o.e.prev=t&&t.e,o.e.next=r&&r.e,t===null?m||(e.first=o):(t.next=o,t.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function ne(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=a.e.nodes_start;s!==null&&s!==r;){var i=je(s);n.before(s),s=i}}function V(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const we=[...` 	
\r\fÂ \v\uFEFF`];function At(a,e,t){var r=""+a;if(t){for(var n in t)if(t[n])r=r?r+" "+n:n;else if(r.length)for(var s=n.length,i=0;(i=r.indexOf(n,i))>=0;){var u=i+s;(i===0||we.includes(r[i-1]))&&(u===r.length||we.includes(r[u]))?r=(i===0?"":r.substring(0,i))+r.substring(u+1):i=u}}return r===""?null:r}function It(a,e){return a==null?null:String(a)}function Et(a,e,t,r,n,s){var i=a.__className;if(H||i!==t||i===void 0){var u=At(t,r,s);(!H||u!==a.getAttribute("class"))&&(u==null?a.removeAttribute("class"):a.className=u),a.__className=t}else if(s&&n!==s)for(var d in s){var v=!!s[d];(n==null||v!==!!n[d])&&a.classList.toggle(d,v)}return s}function Me(a,e,t,r){var n=a.__style;if(H||n!==e){var s=It(e);(!H||s!==a.getAttribute("style"))&&(s==null?a.removeAttribute("style"):a.style.cssText=s),a.__style=e}return r}function We(a,e,t=!1){if(a.multiple){if(e==null)return;if(!De(e))return ut();for(var r of a.options)r.selected=e.includes(J(r));return}for(r of a.options){var n=J(r);if(ft(n,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function kt(a){var e=new MutationObserver(()=>{We(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ot(()=>{e.disconnect()})}function Dt(a,e,t=e){var r=new WeakSet,n=!0;nt(a,"change",s=>{var i=s?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(i),J);else{var d=a.querySelector(i)??a.querySelector("option:not([disabled])");u=d&&J(d)}t(u),Q!==null&&r.add(Q)}),lt(()=>{var s=e();if(a===document.activeElement){var i=ct??Q;if(r.has(i))return}if(We(a,s,n),n&&s===void 0){var u=a.querySelector(":checked");u!==null&&(s=J(u),t(s))}a.__value=s,n=!1}),kt(a)}function J(a){return"__value"in a?a.__value:a.value}var Nt=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ot=["difference","intersection","symmetricDifference","union"],xe=!1;class O extends Set{#a=new Map;#e=U(0);#t=U(0);#r=ge||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}xe||this.#i()}#s(e){return ge===this.#r?U(e):ue(e)}#i(){xe=!0;var e=O.prototype,t=Set.prototype;for(const r of Nt)e[r]=function(...n){return k(this.#e),t[r].apply(this,n)};for(const r of Ot)e[r]=function(...n){k(this.#e);var s=t[r].apply(this,n);return new O(s)}}has(e){var t=super.has(e),r=this.#a,n=r.get(e);if(n===void 0){if(!t)return k(this.#e),!1;n=this.#s(!0),r.set(e,n)}return k(n),t}add(e){return super.has(e)||(super.add(e),z(this.#t,super.size),se(this.#e)),this}delete(e){var t=super.delete(e),r=this.#a,n=r.get(e);return n!==void 0&&(r.delete(e),z(n,!1)),t&&(z(this.#t,super.size),se(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())z(t,!1);e.clear(),z(this.#t,0),se(this.#e)}}keys(){return this.values()}values(){return k(this.#e),super.values()}entries(){return k(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return k(this.#t)}}class Tt{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class Pe{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,r){if(this.indexMap.has(r)){this.decreasePriority(r,t);return}const n={value:e,priority:t,key:r};this.data.push(n);const s=this.data.length-1;this.indexMap.set(r,s),this.bubbleUp(s)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),r=this.right(e);let n=e;t<this.data.length&&this.data[t].priority<this.data[n].priority&&(n=t),r<this.data.length&&this.data[r].priority<this.data[n].priority&&(n=r),n!==e&&(this.swap(e,n),this.minHeapify(n))}decreasePriority(e,t){const r=this.indexMap.get(e);r!==void 0&&(t>=this.data[r].priority||(this.data[r].priority=t,this.bubbleUp(r)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const r=this.data.length-1;if(t===r)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,r);const n=this.data.pop();this.indexMap.delete(n.key);const s=this.data[t],i=this.parent(t);return t>0&&this.data[i].priority>s.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Re=function*(a,e,t,r,n){const s=new Pe,i=new Map,u=new Map,d=new O,v=Array.from({length:r},(x,l)=>Array.from({length:t},(_,f)=>({x:f,y:l,isWall:n.has(I(f,l))}))).flat();for(const x of v){const l=I(x.x,x.y);i.set(l,1/0)}const m=I(a[0],a[1]);for(i.set(m,0),s.insert(v[a[0]+t*a[1]],0,m);!s.isEmpty();){const l=s.extractMin().value,_=I(l.x,l.y);if(d.has(_))continue;if(d.add(_),l.x===e[0]&&l.y===e[1])break;const f=i.get(_),o=[[l.x+1,l.y],[l.x-1,l.y],[l.x,l.y+1],[l.x,l.y-1]];for(const[h,g]of o){const p=v[h+g*t];if(p===void 0||p.isWall||h<0||g<0||h>=t||g>=r)continue;const E=I(p.x,p.y),w=f+1;w<i.get(E)&&(i.set(E,w),u.set(E,[l.x,l.y]),s.has(E)?s.decreasePriority(E,w):s.insert(p,w,E),yield{path:Se(u,[p.x,p.y]),visited:d,frontier:new O(s.data.map(S=>I(S.value.x,S.value.y)))})}}yield{path:Se(u,e),visited:d,frontier:new O(s.data.map(x=>I(x.value.x,x.value.y)))}};function Se(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}function ve(a,e,t,r){const n=[],s=a,i=e;a=a%2===0?a+1:a,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let h=0;h<a;h++)n.push({x:h,y:o,isWall:!0});const u=Z(n,a,t[0],t[1]),d=le(u,a,e,n,2),v=new Tt,m=new Set,x=Z(n,a,r[0],r[1]),l=le(x,a,e,n,2);u.isWall=!1,x.isWall=!1,m.add(I(u.x,u.y));for(const o of[...d,...l])v.add(o.cell);for(;v.size>0;){const o=v.random(),h=le(o,a,e,n,2),g=h.filter(w=>m.has(I(w.cell.x,w.cell.y)));if(g.length===0){v.remove(o);continue}const p=g[Math.floor(Math.random()*g.length)],E=Z(n,a,o.x+p.direction[0],o.y+p.direction[1]);m.add(I(o.x,o.y)),E.isWall=!1,o.isWall=!1,v.remove(o);for(const w of h)m.has(I(w.cell.x,w.cell.y))||v.add(w.cell)}const _=new O(n.filter(o=>o.isWall&&(o.x!==r[0]||o.y!==r[1])&&o.x<s&&o.y<i).map(o=>I(o.x,o.y)));return Re(t,r,s,i,_).length<=1?ve(s,i,t,r):_}function le(a,e,t,r,n=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:Z(r,e,a.x+i[0]*n,a.y+i[1]*n),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<t)}function Z(a,e,t,r){if(!(t<0||r<0))return a[t+e*r]}function I(a,e){return`${a},${e}`}var Ct=a=>{a.preventDefault()},Ht=ee('<div role="cell" tabindex="-1"></div>'),zt=ee('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function Vt(a,e){Ce(e,!0);const t=()=>wt(x,"$visualisationData",r),[r,n]=bt();let s=ie(e,"start",31,()=>F([0,0])),i=ie(e,"end",31,()=>F([e.width-1,e.height-1])),u=ie(e,"walls",27,()=>F(ve(e.width,e.height,s(),i()))),d=!1,v=new Set,m="add",x=mt({path:[],visited:new O,frontier:new O}),l=null,_=!1;function f(A=!1){if(_&&h(),A&&!_)return;_=!0;const D=e.pathfindingAlgorithm(s(),i(),e.width,e.height,u());l!==null&&clearInterval(l),l=setInterval(()=>{const M=D.next();M.done?(clearInterval(l),l=null,_=!1):ye(x,M.value)},10)}function o(){_=!1,h(),l!==null&&clearInterval(l)}function h(){ye(x,{path:[],visited:new O,frontier:new O})}function g(A,D,M){_||(h(),d=!0,M?m="remove":A===s()[0]&&D===s()[1]?m="movestart":A===i()[0]&&D===i()[1]?m="movegoal":m="add",p(A,D),v.add(I(A,D)))}function p(A,D){const M=I(A,D);if(!(_||!d||A===s()[0]&&D===s()[1]||A===i()[0]&&D===i()[1])){switch(m){case"add":{v.has(M)||u().add(M);break}case"remove":{v.has(M)||u().delete(M);break}case"movestart":{(A!==i()[0]||D!==i()[1])&&s([A,D]);break}case"movegoal":{(A!==s()[0]||D!==s()[1])&&i([A,D]);break}}v.add(M)}}function E(A,D){if(!_)switch(m){case"movestart":case"movegoal":{const M=I(A,D);u().delete(M)}}}function w(){_||(d=!1,v.clear())}_t(()=>{l!==null&&clearInterval(l)});var S={startVisualisation:f,stopVisualisation:o,clearVisualisation:h},c=zt();gt("mouseup",ze,()=>{w()});var y=K(c);he(y,21,()=>({length:e.width}),be,(A,D,M)=>{var N=ht(),L=dt(N);he(L,17,()=>({length:e.height}),be,(q,C,T)=>{const R=ce(()=>I(M,T));var W=Ht();let pe;Me(W,`grid-column-start: ${M+1}; grid-row-start: ${T+1};`),W.__mousedown=G=>{g(M,T,G.button===2)},W.__mousemove=()=>{p(M,T)},W.__mouseup=()=>{E(M,T)},W.__contextmenu=[Ct],fe(G=>pe=Et(W,1,"cell svelte-c024sg",null,pe,G),[()=>({wall:u().has(k(R)),start:M===s()[0]&&T===s()[1],goal:M===i()[0]&&T===i()[1],path:t().path.some(G=>G[0]===M&&G[1]===T),visited:t().visited.has(k(R)),frontier:t().frontier.has(k(R))})]),X(q,W)}),X(A,N)}),P(y),P(c),fe(()=>Me(y,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),X(a,c);var b=He(S);return n(),b}Ve(["mousedown","mousemove","mouseup","contextmenu"]);const Lt=function*(a,e,t,r,n){const s=new Pe,i=new Map,u=new O,d=new Map,v=new Map,m=Ie(a,e),x=I(a[0],a[1]);s.insert(a,0+m,x);for(let l=0;l<t;l++)for(let _=0;_<r;_++){const f=I(l,_);d.set(f,1/0),v.set(f,1/0)}for(d.set(x,0),v.set(x,m);!s.isEmpty();){const l=s.extractMin().value;if(l[0]===e[0]&&l[1]===e[1]){yield{path:Ae(i,l),visited:u,frontier:new O(s.data.map(o=>I(o.value[0],o.value[1])))};return}const _=I(l[0],l[1]);s.delete(_),u.add(_);const f=[[l[0]+1,l[1]],[l[0]-1,l[1]],[l[0],l[1]+1],[l[0],l[1]-1]];for(const o of f){const[h,g]=o,p=I(h,g);if(h<0||g<0||h>=t||g>=r||n.has(p))continue;const w=d.get(_)+1;if(w<d.get(p)){const S=w+Ie(o,e);i.set(p,l),d.set(p,w),v.set(p,S),s.has(p)||s.insert(o,S,p),yield{path:Ae(i,o),visited:u,frontier:new O(s.data.map(c=>I(c.value[0],c.value[1])))}}}}yield{path:[a],visited:u,frontier:new O(s.data.map(l=>I(l.value[0],l.value[1])))}};function Ae(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}const Ie=(a,e)=>Math.hypot(e[0]-a[0],e[1]-a[1]);var Wt=ee("<option> </option>"),Pt=ee('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select> <div><button>Start</button> <button>Stop</button></div></div></main>');function Gt(a,e){Ce(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:Re},astar:{name:"A*",algorithm:Lt}};let r=U(F(new O)),n=50,s=25,i=U(F([0,0])),u=U(F([49,24])),d,v=U("astar"),m=ce(()=>t[k(v)].algorithm);function x(){k(r).clear(),d.clearVisualisation(),d.startVisualisation(!0)}function l(){z(r,ve(n,s,k(i),k(u)),!0),d.clearVisualisation(),d.startVisualisation(!0)}var _=Pt();vt(b=>{ze.title="Pathfinder"});var f=$(K(_),2),o=K(f),h=K(o);Mt(Vt(h,{width:n,height:s,get start(){return k(i)},set start(b){z(i,b,!0)},get end(){return k(u)},set end(b){z(u,b,!0)},get walls(){return k(r)},set walls(b){z(r,b,!0)},get pathfindingAlgorithm(){return k(m)},set pathfindingAlgorithm(b){z(m,b)}}),b=>d=b,()=>d),P(o);var g=$(o,2),p=K(g);p.__click=x;var E=$(p,2);E.__click=l,P(g);var w=$(g,2);w.__change=()=>{d.clearVisualisation(),d.startVisualisation(!0)},he(w,21,()=>Object.entries(t),([b,A])=>b,(b,A,D,M)=>{var N=ce(()=>pt(k(A),2));let L=()=>k(N)[0],q=()=>k(N)[1];var C=Wt(),T=K(C,!0);P(C);var R={};fe(()=>{yt(T,q().name),R!==(R=L())&&(C.value=(C.__value=L())??"")}),X(b,C)}),P(w);var S=$(w,2),c=K(S);c.__click=()=>{d.startVisualisation()};var y=$(c,2);y.__click=()=>{d.stopVisualisation()},P(S),P(f),P(_),Dt(w,()=>k(v),b=>z(v,b)),X(a,_),He()}Ve(["click","change"]);export{Gt as component};
