import"../chunks/DsnmJJEf.js";import{av as me,b as Ce,ae as Q,d as S,m as Ie,e as Te,z as A,F as ze,aK as De,a8 as ke,ag as le,aq as Z,l as W,a7 as He,ax as Le,j as ae,aN as We,aL as Re,a6 as oe,aQ as Ue,a3 as re,at as ge,r as Pe,aU as F,aO as _e,aa as qe,aV as V,aW as Ke,aX as G,k as ye,al as Ye,aY as Fe,as as Ve,aZ as Xe,v as Be,a_ as be,q as Qe,a$ as Ze,aR as k,b0 as ue,B as T,a5 as J,X as Me,Y as ie,Z as fe,a as K,_ as we,A as H,b1 as xe,$ as R,a0 as D,c as Ge,f as Je,aS as je,h as $e,a1 as j}from"../chunks/DGK4cZqc.js";import{d as Ee,e as et}from"../chunks/BqHANwwa.js";import{p as $}from"../chunks/BXa_KlwF.js";function ce(s,e){return e}function tt(s,e,t){for(var a=s.items,r=[],o=e.length,n=0;n<o;n++)Fe(e[n].e,r,!0);var c=o>0&&r.length===0&&t!==null;if(c){var _=t.parentNode;Ve(_),_.append(t),a.clear(),I(s,e[0].prev,e[o-1].next)}Xe(r,()=>{for(var p=0;p<o;p++){var m=e[p];c||(a.delete(m.k),I(s,m.prev,m.next)),ye(m.e,!c)}})}function he(s,e,t,a,r,o=null){var n=s,c={flags:e,items:new Map,first:null},_=(e&be)!==0;if(_){var p=s;n=S?Q(Ie(p)):p.appendChild(me())}S&&Te();var m=null,M=!1,g=new Map,d=ze(()=>{var h=t();return Pe(h)?h:h==null?[]:ge(h)}),l,i;function u(){at(i,l,c,g,n,r,e,a,t),o!==null&&(l.length===0?m?_e(m):m=ae(()=>o(n)):m!==null&&qe(m,()=>{m=null}))}Ce(()=>{i??=Be,l=A(d);var h=l.length;if(M&&h===0)return;M=h===0;let y=!1;if(S){var x=De(n)===ke;x!==(h===0)&&(n=le(),Q(n),Z(!1),y=!0)}if(S){for(var b=null,w,f=0;f<h;f++){if(W.nodeType===He&&W.data===Le){n=W,y=!0,Z(!1);break}var v=l[f],E=a(v,f);w=se(W,c,b,null,v,E,f,r,e,t),c.items.set(E,w),b=w}h>0&&Q(le())}if(S)h===0&&o&&(m=ae(()=>o(n)));else if(We()){var O=new Set,P=Re;for(f=0;f<h;f+=1){v=l[f],E=a(v,f);var z=c.items.get(E)??g.get(E);z?(e&(V|F))!==0&&Ae(z,v,f,e):(w=se(null,c,null,null,v,E,f,r,e,t,!0),g.set(E,w)),O.add(E)}for(const[C,q]of c.items)O.has(C)||P.skipped_effects.add(q.e);P.add_callback(u)}else u();y&&Z(!0),A(d)}),S&&(n=W)}function at(s,e,t,a,r,o,n,c,_){var p=(n&Ze)!==0,m=(n&(V|F))!==0,M=e.length,g=t.items,d=t.first,l=d,i,u=null,h,y=[],x=[],b,w,f,v;if(p)for(v=0;v<M;v+=1)b=e[v],w=c(b,v),f=g.get(w),f!==void 0&&(f.a?.measure(),(h??=new Set).add(f));for(v=0;v<M;v+=1){if(b=e[v],w=c(b,v),f=g.get(w),f===void 0){var E=a.get(w);if(E!==void 0){a.delete(w),g.set(w,E);var O=u?u.next:l;I(t,u,E),I(t,E,O),ee(E,O,r),u=E}else{var P=l?l.e.nodes_start:r;u=se(P,t,u,u===null?t.first:u.next,b,w,v,o,n,_)}g.set(w,u),y=[],x=[],l=u.next;continue}if(m&&Ae(f,b,v,n),(f.e.f&G)!==0&&(_e(f.e),p&&(f.a?.unfix(),(h??=new Set).delete(f))),f!==l){if(i!==void 0&&i.has(f)){if(y.length<x.length){var z=x[0],C;u=z.prev;var q=y[0],X=y[y.length-1];for(C=0;C<y.length;C+=1)ee(y[C],z,r);for(C=0;C<x.length;C+=1)i.delete(x[C]);I(t,q.prev,X.next),I(t,u,q),I(t,X,z),l=z,u=X,v-=1,y=[],x=[]}else i.delete(f),ee(f,l,r),I(t,f.prev,f.next),I(t,f,u===null?t.first:u.next),I(t,u,f),u=f;continue}for(y=[],x=[];l!==null&&l.k!==w;)(l.e.f&G)===0&&(i??=new Set).add(l),x.push(l),l=l.next;if(l===null)continue;f=l}y.push(f),u=f,l=f.next}if(l!==null||i!==void 0){for(var L=i===void 0?[]:ge(i);l!==null;)(l.e.f&G)===0&&L.push(l),l=l.next;var B=L.length;if(B>0){var Oe=(n&be)!==0&&M===0?r:null;if(p){for(v=0;v<B;v+=1)L[v].a?.measure();for(v=0;v<B;v+=1)L[v].a?.fix()}tt(t,L,Oe)}}p&&Qe(()=>{if(h!==void 0)for(f of h)f.a?.apply()}),s.first=t.first&&t.first.e,s.last=u&&u.e;for(var Se of a.values())ye(Se.e);a.clear()}function Ae(s,e,t,a){(a&V)!==0&&oe(s.v,e),(a&F)!==0?oe(s.i,t):s.i=t}function se(s,e,t,a,r,o,n,c,_,p,m){var M=(_&V)!==0,g=(_&Ke)===0,d=M?g?Ue(r,!1,!1):re(r):r,l=(_&F)===0?n:re(n),i={i:l,v:d,k:o,a:null,e:null,prev:t,next:a};try{if(s===null){var u=document.createDocumentFragment();u.append(s=me())}return i.e=ae(()=>c(s,d,l,p),S),i.e.prev=t&&t.e,i.e.next=a&&a.e,t===null?m||(e.first=i):(t.next=i,t.e.next=i.e),a!==null&&(a.prev=i,a.e.prev=i.e),i}finally{}}function ee(s,e,t){for(var a=s.next?s.next.e.nodes_start:t,r=e?e.e.nodes_start:t,o=s.e.nodes_start;o!==null&&o!==a;){var n=Ye(o);r.before(o),o=n}}function I(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const de=[...` 	
\r\fÂ \v\uFEFF`];function rt(s,e,t){var a=""+s;if(t){for(var r in t)if(t[r])a=a?a+" "+r:r;else if(a.length)for(var o=r.length,n=0;(n=a.indexOf(r,n))>=0;){var c=n+o;(n===0||de.includes(a[n-1]))&&(c===a.length||de.includes(a[c]))?a=(n===0?"":a.substring(0,n))+a.substring(c+1):n=c}}return a===""?null:a}function st(s,e){return s==null?null:String(s)}function it(s,e,t,a,r,o){var n=s.__className;if(S||n!==t||n===void 0){var c=rt(t,a,o);(!S||c!==s.getAttribute("class"))&&(c==null?s.removeAttribute("class"):s.className=c),s.__className=t}else if(o&&r!==o)for(var _ in o){var p=!!o[_];(r==null||p!==!!r[_])&&s.classList.toggle(_,p)}return o}function ve(s,e,t,a){var r=s.__style;if(S||r!==e){var o=st(e);(!S||o!==s.getAttribute("style"))&&(o==null?s.removeAttribute("style"):s.style.cssText=o),s.__style=e}return a}class nt{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const r={value:e,priority:t,key:a};this.data.push(r);const o=this.data.length-1;this.indexMap.set(a,o),this.bubbleUp(o)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let r=e;t<this.data.length&&this.data[t].priority<this.data[r].priority&&(r=t),a<this.data.length&&this.data[a].priority<this.data[r].priority&&(r=a),r!==e&&(this.swap(e,r),this.minHeapify(r))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Ne=(s,e,t,a,r)=>{const o=[],n=new nt,c=new Map,_=new Map,p=new Set,m=Array.from({length:a},(g,d)=>Array.from({length:t},(l,i)=>({x:i,y:d,isWall:r.has(N(i,d))}))).flat();for(const g of m){const d=g.x===s[0]&&g.y===s[1]?0:1/0,l=N(g.x,g.y);c.set(l,d),_.set(l,null),n.insert(g,d,l)}for(;!n.isEmpty();){const d=n.extractMin().value,l=N(d.x,d.y);if(p.has(l))continue;if(p.add(l),d.x===e[0]&&d.y===e[1])break;const i=c.get(l),u=[[d.x+1,d.y],[d.x-1,d.y],[d.x,d.y+1],[d.x,d.y-1]];for(const[h,y]of u){const x=m[h+y*t];if(x===void 0||x.isWall||h<0||y<0||h>=t||y>=a)continue;const b=N(x.x,x.y),w=i+1;w<c.get(b)&&(c.set(b,w),_.set(b,l),n.decreasePriority(b,w))}}let M=N(m[e[0]+t*e[1]].x,m[e[0]+t*e[1]].y);for(;M;){const[g,d]=M.split(",").map(i=>parseInt(i));o.unshift([g,d]);const l=_.get(M);if(!l)break;M=l}return o};var lt=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ot=["difference","intersection","symmetricDifference","union"],pe=!1;class U extends Set{#a=new Map;#e=k(0);#t=k(0);#r=ue||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}pe||this.#i()}#s(e){return ue===this.#r?k(e):re(e)}#i(){pe=!0;var e=U.prototype,t=Set.prototype;for(const a of lt)e[a]=function(...r){return A(this.#e),t[a].apply(this,r)};for(const a of ot)e[a]=function(...r){A(this.#e);var o=t[a].apply(this,r);return new U(o)}}has(e){var t=super.has(e),a=this.#a,r=a.get(e);if(r===void 0){if(!t)return A(this.#e),!1;r=this.#s(!0),a.set(e,r)}return A(r),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),J(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,r=a.get(e);return r!==void 0&&(a.delete(e),T(r,!1)),t&&(T(this.#t,super.size),J(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),J(this.#e)}}keys(){return this.values()}values(){return A(this.#e),super.values()}entries(){return A(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return A(this.#t)}}class ut{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ne(s,e,t,a){const r=[],o=s,n=e;s=s%2===0?s+1:s,e=e%2===0?e+1:e;for(let i=0;i<e;i++)for(let u=0;u<s;u++)r.push({x:u,y:i,isWall:!0});const c=Y(r,s,t[0],t[1]),_=te(c,s,e,r,2),p=new ut,m=new Set,M=Y(r,s,a[0],a[1]),g=te(M,s,e,r,2);c.isWall=!1,M.isWall=!1,m.add(N(c.x,c.y));for(const i of[..._,...g])p.add(i.cell);for(;p.size>0;){const i=p.random(),u=te(i,s,e,r,2),h=u.filter(b=>m.has(N(b.cell.x,b.cell.y)));if(h.length===0){p.remove(i);continue}const y=h[Math.floor(Math.random()*h.length)],x=Y(r,s,i.x+y.direction[0],i.y+y.direction[1]);m.add(N(i.x,i.y)),x.isWall=!1,i.isWall=!1,p.remove(i);for(const b of u)m.has(N(b.cell.x,b.cell.y))||p.add(b.cell)}const d=new U(r.filter(i=>i.isWall&&(i.x!==a[0]||i.y!==a[1])&&i.x<o&&i.y<n).map(i=>N(i.x,i.y)));return Ne(t,a,o,n,d).length<=1?ne(o,n,t,a):d}function te(s,e,t,a,r=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:Y(a,e,s.x+n[0]*r,s.y+n[1]*r),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function Y(s,e,t,a){if(!(t<0||a<0))return s[t+e*a]}function N(s,e){return`${s},${e}`}var ft=s=>{s.preventDefault()},ct=ie('<div role="cell" tabindex="-1"></div>'),ht=ie('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function dt(s,e){Me(e,!0);let t=$(e,"start",31,()=>H([0,0])),a=$(e,"end",31,()=>H([e.width-1,e.height-1])),r=$(e,"walls",27,()=>H(ne(e.width,e.height,t(),a()))),o=!1,n=new Set,c="add",_=je(()=>Ne(t(),a(),e.width,e.height,r()));function p(i,u,h){o=!0,h?c="remove":i===t()[0]&&u===t()[1]?c="movestart":i===a()[0]&&u===a()[1]?c="movegoal":c="add",m(i,u),n.add(N(i,u))}function m(i,u){const h=N(i,u);if(!(!o||i===t()[0]&&u===t()[1]||i===a()[0]&&u===a()[1])){switch(c){case"add":{n.has(h)||r().add(h);break}case"remove":{n.has(h)||r().delete(h);break}case"movestart":{(i!==a()[0]||u!==a()[1])&&t([i,u]);break}case"movegoal":{(i!==t()[0]||u!==t()[1])&&a([i,u]);break}}n.add(h)}}function M(i,u){switch(c){case"movestart":case"movegoal":{const h=N(i,u);r().delete(h)}}}function g(){o=!1,n.clear()}var d=ht();et("mouseup",xe,()=>{g()});var l=R(d);he(l,21,()=>({length:e.width}),ce,(i,u,h)=>{var y=Ge(),x=Je(y);he(x,17,()=>({length:e.height}),ce,(b,w,f)=>{var v=ct();let E;ve(v,`grid-column-start: ${h+1}; grid-row-start: ${f+1};`),v.__mousedown=O=>{p(h,f,O.button===2)},v.__mousemove=()=>{m(h,f)},v.__mouseup=()=>{M(h,f)},v.__contextmenu=[ft],fe(O=>E=it(v,1,"cell svelte-c024sg",null,E,O),[()=>({wall:r().has(N(h,f)),start:h===t()[0]&&f===t()[1],goal:h===a()[0]&&f===a()[1],path:A(_).some(O=>O[0]===h&&O[1]===f)})]),K(b,v)}),K(i,y)}),D(l),D(d),fe(()=>ve(l,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),K(s,d),we()}Ee(["mousedown","mousemove","mouseup","contextmenu"]);function vt(s,e){A(e).clear()}function pt(s,e,t,a,r,o){T(e,ne(t,a,A(r),A(o)),!0)}var mt=ie('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div></div></main>');function Mt(s,e){Me(e,!0);let t=k(H(new U)),a=50,r=25,o=k(H([0,0])),n=k(H([49,24]));var c=mt();$e(l=>{xe.title="Pathfinder"});var _=j(R(c),2),p=R(_),m=R(p);dt(m,{width:a,height:r,get start(){return A(o)},set start(l){T(o,l,!0)},get end(){return A(n)},set end(l){T(n,l,!0)},get walls(){return A(t)},set walls(l){T(t,l,!0)}}),D(p);var M=j(p,2),g=R(M);g.__click=[vt,t];var d=j(g,2);d.__click=[pt,t,a,r,o,n],D(M),D(_),D(c),K(s,c),we()}Ee(["click"]);export{Mt as component};
