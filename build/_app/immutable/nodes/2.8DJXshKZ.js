import"../chunks/DsnmJJEf.js";import{a0 as Ee,V as Ke,_ as ae,T as H,aA as Ue,U as Ge,g as k,o as $e,X as Fe,Y as Ye,Z as _e,$ as re,a7 as Y,ah as Xe,aJ as Je,a1 as ue,a4 as Qe,a2 as Z,ag as ge,m as Ze,ae as fe,aF as ke,ay as De,aW as j,a5 as Ne,a6 as Be,aX as ee,aY as je,aZ as se,ap as Oe,av as et,a_ as tt,aE as at,a$ as rt,k as st,b0 as Te,q as it,b1 as nt,b2 as lt,e as ot,t as ut,b3 as ft,b4 as ct,b5 as ht,a9 as U,b6 as ye,b as z,af as ie,J as Ce,K as te,M as ce,a as X,N as He,j as G,b7 as ze,O as K,Q as R,c as dt,f as vt,ab as he,h as pt,R as F,b8 as mt}from"../chunks/Bqp-y4Du.js";import{d as Le,w as _t,b as gt,e as yt,a as bt}from"../chunks/BuxLWLka.js";import{p as Q,s as wt,a as ne,c as Mt,b as xt}from"../chunks/CvOZo088.js";function be(a,e){return e}function St(a,e,t){for(var r=a.items,n=[],s=e.length,i=0;i<s;i++)tt(e[i].e,n,!0);var f=s>0&&n.length===0&&t!==null;if(f){var d=t.parentNode;at(d),d.append(t),r.clear(),L(a,e[0].prev,e[s-1].next)}rt(n,()=>{for(var v=0;v<s;v++){var _=e[v];f||(r.delete(_.k),L(a,_.prev,_.next)),Oe(_.e,!f)}})}function de(a,e,t,r,n,s=null){var i=a,f={flags:e,items:new Map,first:null},d=(e&Te)!==0;if(d){var v=a;i=H?ae(Ue(v)):v.appendChild(Ee())}H&&Ge();var _=null,M=!1,l=new Map,m=$e(()=>{var g=t();return De(g)?g:g==null?[]:ke(g)}),u,o;function h(){At(o,u,f,l,i,n,e,r,t),s!==null&&(u.length===0?_?Ne(_):_=ue(()=>s(i)):_!==null&&Be(_,()=>{_=null}))}Ke(()=>{o??=st,u=k(m);var g=u.length;if(M&&g===0)return;M=g===0;let p=!1;if(H){var E=Fe(i)===Ye;E!==(g===0)&&(i=_e(),ae(i),re(!1),p=!0)}if(H){for(var w=null,S,c=0;c<g;c++){if(Y.nodeType===Xe&&Y.data===Je){i=Y,p=!0,re(!1);break}var y=u[c],b=r(y,c);S=ve(Y,f,w,null,y,b,c,n,e,t),f.items.set(b,S),w=S}g>0&&ae(_e())}if(H)g===0&&s&&(_=ue(()=>s(i)));else if(Qe()){var A=new Set,D=Z;for(c=0;c<g;c+=1){y=u[c],b=r(y,c);var x=f.items.get(b)??l.get(b);x?(e&(ee|j))!==0&&We(x,y,c,e):(S=ve(null,f,null,null,y,b,c,n,e,t,!0),l.set(b,S)),A.add(b)}for(const[O,W]of f.items)A.has(O)||D.skipped_effects.add(W.e);D.add_callback(h)}else h();p&&re(!0),k(m)}),H&&(i=Y)}function At(a,e,t,r,n,s,i,f,d){var v=(i&nt)!==0,_=(i&(ee|j))!==0,M=e.length,l=t.items,m=t.first,u=m,o,h=null,g,p=[],E=[],w,S,c,y;if(v)for(y=0;y<M;y+=1)w=e[y],S=f(w,y),c=l.get(S),c!==void 0&&(c.a?.measure(),(g??=new Set).add(c));for(y=0;y<M;y+=1){if(w=e[y],S=f(w,y),c=l.get(S),c===void 0){var b=r.get(S);if(b!==void 0){r.delete(S),l.set(S,b);var A=h?h.next:u;L(t,h,b),L(t,b,A),le(b,A,n),h=b}else{var D=u?u.e.nodes_start:n;h=ve(D,t,h,h===null?t.first:h.next,w,S,y,s,i,d)}l.set(S,h),p=[],E=[],u=h.next;continue}if(_&&We(c,w,y,i),(c.e.f&se)!==0&&(Ne(c.e),v&&(c.a?.unfix(),(g??=new Set).delete(c))),c!==u){if(o!==void 0&&o.has(c)){if(p.length<E.length){var x=E[0],O;h=x.prev;var W=p[0],q=p[p.length-1];for(O=0;O<p.length;O+=1)le(p[O],x,n);for(O=0;O<E.length;O+=1)o.delete(E[O]);L(t,W.prev,q.next),L(t,h,W),L(t,q,x),u=x,h=q,y-=1,p=[],E=[]}else o.delete(c),le(c,u,n),L(t,c.prev,c.next),L(t,c,h===null?t.first:h.next),L(t,h,c),h=c;continue}for(p=[],E=[];u!==null&&u.k!==S;)(u.e.f&se)===0&&(o??=new Set).add(u),E.push(u),u=u.next;if(u===null)continue;c=u}p.push(c),h=c,u=c.next}if(u!==null||o!==void 0){for(var C=o===void 0?[]:ke(o);u!==null;)(u.e.f&se)===0&&C.push(u),u=u.next;var T=C.length;if(T>0){var V=(i&Te)!==0&&M===0?n:null;if(v){for(y=0;y<T;y+=1)C[y].a?.measure();for(y=0;y<T;y+=1)C[y].a?.fix()}St(t,C,V)}}v&&it(()=>{if(g!==void 0)for(c of g)c.a?.apply()}),a.first=t.first&&t.first.e,a.last=h&&h.e;for(var P of r.values())Oe(P.e);r.clear()}function We(a,e,t,r){(r&ee)!==0&&ge(a.v,e),(r&j)!==0?ge(a.i,t):a.i=t}function ve(a,e,t,r,n,s,i,f,d,v,_){var M=(d&ee)!==0,l=(d&je)===0,m=M?l?Ze(n,!1,!1):fe(n):n,u=(d&j)===0?i:fe(i),o={i:u,v:m,k:s,a:null,e:null,prev:t,next:r};try{if(a===null){var h=document.createDocumentFragment();h.append(a=Ee())}return o.e=ue(()=>f(a,m,u,v),H),o.e.prev=t&&t.e,o.e.next=r&&r.e,t===null?_||(e.first=o):(t.next=o,t.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function le(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=a.e.nodes_start;s!==null&&s!==r;){var i=et(s);n.before(s),s=i}}function L(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const we=[...` 	
\r\fÂ \v\uFEFF`];function It(a,e,t){var r=""+a;if(t){for(var n in t)if(t[n])r=r?r+" "+n:n;else if(r.length)for(var s=n.length,i=0;(i=r.indexOf(n,i))>=0;){var f=i+s;(i===0||we.includes(r[i-1]))&&(f===r.length||we.includes(r[f]))?r=(i===0?"":r.substring(0,i))+r.substring(f+1):i=f}}return r===""?null:r}function Et(a,e){return a==null?null:String(a)}function kt(a,e,t,r,n,s){var i=a.__className;if(H||i!==t||i===void 0){var f=It(t,r,s);(!H||f!==a.getAttribute("class"))&&(f==null?a.removeAttribute("class"):a.className=f),a.__className=t}else if(s&&n!==s)for(var d in s){var v=!!s[d];(n==null||v!==!!n[d])&&a.classList.toggle(d,v)}return s}function Me(a,e,t,r){var n=a.__style;if(H||n!==e){var s=Et(e);(!H||s!==a.getAttribute("style"))&&(s==null?a.removeAttribute("style"):a.style.cssText=s),a.__style=e}return r}function Pe(a,e,t=!1){if(a.multiple){if(e==null)return;if(!De(e))return ft();for(var r of a.options)r.selected=e.includes(J(r));return}for(r of a.options){var n=J(r);if(ct(n,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function Dt(a){var e=new MutationObserver(()=>{Pe(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ut(()=>{e.disconnect()})}function Nt(a,e,t=e){var r=new WeakSet,n=!0;lt(a,"change",s=>{var i=s?"[selected]":":checked",f;if(a.multiple)f=[].map.call(a.querySelectorAll(i),J);else{var d=a.querySelector(i)??a.querySelector("option:not([disabled])");f=d&&J(d)}t(f),Z!==null&&r.add(Z)}),ot(()=>{var s=e();if(a===document.activeElement){var i=ht??Z;if(r.has(i))return}if(Pe(a,s,n),n&&s===void 0){var f=a.querySelector(":checked");f!==null&&(s=J(f),t(s))}a.__value=s,n=!1}),Dt(a)}function J(a){return"__value"in a?a.__value:a.value}var Ot=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Tt=["difference","intersection","symmetricDifference","union"],xe=!1;class N extends Set{#a=new Map;#e=U(0);#t=U(0);#r=ye||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}xe||this.#i()}#s(e){return ye===this.#r?U(e):fe(e)}#i(){xe=!0;var e=N.prototype,t=Set.prototype;for(const r of Ot)e[r]=function(...n){return k(this.#e),t[r].apply(this,n)};for(const r of Tt)e[r]=function(...n){k(this.#e);var s=t[r].apply(this,n);return new N(s)}}has(e){var t=super.has(e),r=this.#a,n=r.get(e);if(n===void 0){if(!t)return k(this.#e),!1;n=this.#s(!0),r.set(e,n)}return k(n),t}add(e){return super.has(e)||(super.add(e),z(this.#t,super.size),ie(this.#e)),this}delete(e){var t=super.delete(e),r=this.#a,n=r.get(e);return n!==void 0&&(r.delete(e),z(n,!1)),t&&(z(this.#t,super.size),ie(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())z(t,!1);e.clear(),z(this.#t,0),ie(this.#e)}}keys(){return this.values()}values(){return k(this.#e),super.values()}entries(){return k(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return k(this.#t)}}class Ct{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class Re{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,r){if(this.indexMap.has(r)){this.decreasePriority(r,t);return}const n={value:e,priority:t,key:r};this.data.push(n);const s=this.data.length-1;this.indexMap.set(r,s),this.bubbleUp(s)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),r=this.right(e);let n=e;t<this.data.length&&this.data[t].priority<this.data[n].priority&&(n=t),r<this.data.length&&this.data[r].priority<this.data[n].priority&&(n=r),n!==e&&(this.swap(e,n),this.minHeapify(n))}decreasePriority(e,t){const r=this.indexMap.get(e);r!==void 0&&(t>=this.data[r].priority||(this.data[r].priority=t,this.bubbleUp(r)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const r=this.data.length-1;if(t===r)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,r);const n=this.data.pop();this.indexMap.delete(n.key);const s=this.data[t],i=this.parent(t);return t>0&&this.data[i].priority>s.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Ve=function*(a,e,t,r,n){const s=new Re,i=new Map,f=new Map,d=new N,v=Array.from({length:r},(M,l)=>Array.from({length:t},(m,u)=>({x:u,y:l,isWall:n.has(I(u,l))}))).flat();for(const M of v){const l=I(M.x,M.y);i.set(l,1/0)}const _=I(a[0],a[1]);for(i.set(_,0),s.insert(v[a[0]+t*a[1]],0,_);!s.isEmpty();){const l=s.extractMin().value,m=I(l.x,l.y);if(d.has(m))continue;if(d.add(m),l.x===e[0]&&l.y===e[1])break;const u=i.get(m),o=[[l.x+1,l.y],[l.x-1,l.y],[l.x,l.y+1],[l.x,l.y-1]];for(const[h,g]of o){const p=v[h+g*t];if(p===void 0||p.isWall||h<0||g<0||h>=t||g>=r)continue;const E=I(p.x,p.y),w=u+1;w<i.get(E)&&(i.set(E,w),f.set(E,[l.x,l.y]),s.has(E)?s.decreasePriority(E,w):s.insert(p,w,E),yield{path:Se(f,[p.x,p.y]),visited:d,frontier:new N(s.data.map(S=>I(S.value.x,S.value.y)))})}}yield{path:Se(f,e),visited:d,frontier:new N(s.data.map(M=>I(M.value.x,M.value.y)))}};function Se(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}function pe(a,e,t,r){const n=[],s=a,i=e;a=a%2===0?a+1:a,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let h=0;h<a;h++)n.push({x:h,y:o,isWall:!0});const f=B(n,a,t[0],t[1]),d=oe(f,a,e,n,2),v=new Ct,_=new Set,M=B(n,a,r[0],r[1]),l=oe(M,a,e,n,2);f.isWall=!1,M.isWall=!1,_.add(I(f.x,f.y));for(const o of[...d,...l])v.add(o.cell);for(;v.size>0;){const o=v.random(),h=oe(o,a,e,n,2),g=h.filter(w=>_.has(I(w.cell.x,w.cell.y)));if(g.length===0){v.remove(o);continue}const p=g[Math.floor(Math.random()*g.length)],E=B(n,a,o.x+p.direction[0],o.y+p.direction[1]);_.add(I(o.x,o.y)),E.isWall=!1,o.isWall=!1,v.remove(o);for(const w of h)_.has(I(w.cell.x,w.cell.y))||v.add(w.cell)}const m=new N(n.filter(o=>o.isWall&&(o.x!==r[0]||o.y!==r[1])&&o.x<s&&o.y<i).map(o=>I(o.x,o.y)));return Ve(t,r,s,i,m).length<=1?pe(s,i,t,r):m}function oe(a,e,t,r,n=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:B(r,e,a.x+i[0]*n,a.y+i[1]*n),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<t)}function B(a,e,t,r){if(!(t<0||r<0))return a[t+e*r]}function I(a,e){return`${a},${e}`}var Ht=a=>{a.preventDefault()},zt=te('<div role="cell" tabindex="-1"></div>'),Lt=te('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function Wt(a,e){Ce(e,!0);const t=()=>Mt(l,"$visualisationData",r),[r,n]=wt();let s=Q(e,"start",31,()=>G([0,0])),i=Q(e,"end",31,()=>G([e.width-1,e.height-1])),f=Q(e,"walls",27,()=>G(pe(e.width,e.height,s(),i()))),d=Q(e,"pathfindingAlgorithm",27,()=>G(qe)),v=!1,_=new Set,M="add",l=_t({path:[],visited:new N,frontier:new N}),m=null,u=!1;function o(A=!1){if(u&&ne(l,{path:[],visited:new N,frontier:new N}),A&&!u)return;u=!0;const D=d()(s(),i(),e.width,e.height,f());m!==null&&clearInterval(m),m=setInterval(()=>{const x=D.next();x.done?(clearInterval(m),m=null):ne(l,x.value)},10)}function h(){u=!1,ne(l,{path:[],visited:new N,frontier:new N}),m!==null&&clearInterval(m)}function g(A,D,x){u||(v=!0,x?M="remove":A===s()[0]&&D===s()[1]?M="movestart":A===i()[0]&&D===i()[1]?M="movegoal":M="add",p(A,D),_.add(I(A,D)))}function p(A,D){const x=I(A,D);if(!(u||!v||A===s()[0]&&D===s()[1]||A===i()[0]&&D===i()[1])){switch(M){case"add":{_.has(x)||f().add(x);break}case"remove":{_.has(x)||f().delete(x);break}case"movestart":{(A!==i()[0]||D!==i()[1])&&s([A,D]);break}case"movegoal":{(A!==s()[0]||D!==s()[1])&&i([A,D]);break}}_.add(x)}}function E(A,D){if(!u)switch(M){case"movestart":case"movegoal":{const x=I(A,D);f().delete(x)}}}function w(){u||(v=!1,_.clear())}gt(()=>{m!==null&&clearInterval(m)});var S={startVisualisation:o,stopVisualisation:h},c=Lt();yt("mouseup",ze,()=>{w()});var y=K(c);de(y,21,()=>({length:e.width}),be,(A,D,x)=>{var O=dt(),W=vt(O);de(W,17,()=>({length:e.height}),be,(q,C,T)=>{const V=he(()=>I(x,T));var P=zt();let me;Me(P,`grid-column-start: ${x+1}; grid-row-start: ${T+1};`),P.__mousedown=$=>{g(x,T,$.button===2)},P.__mousemove=()=>{p(x,T)},P.__mouseup=()=>{E(x,T)},P.__contextmenu=[Ht],ce($=>me=kt(P,1,"cell svelte-c024sg",null,me,$),[()=>({wall:f().has(k(V)),start:x===s()[0]&&T===s()[1],goal:x===i()[0]&&T===i()[1],path:t().path.some($=>$[0]===x&&$[1]===T),visited:t().visited.has(k(V)),frontier:t().frontier.has(k(V))})]),X(q,P)}),X(A,O)}),R(y),R(c),ce(()=>Me(y,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),X(a,c);var b=He(S);return n(),b}Le(["mousedown","mousemove","mouseup","contextmenu"]);const qe=function*(a,e,t,r,n){const s=new Re,i=new Map,f=new N,d=new Map,v=new Map,_=Ie(a,e),M=I(a[0],a[1]);s.insert(a,0+_,M);for(let l=0;l<t;l++)for(let m=0;m<r;m++){const u=I(l,m);d.set(u,1/0),v.set(u,1/0)}for(d.set(M,0),v.set(M,_);!s.isEmpty();){const l=s.extractMin().value;if(l[0]===e[0]&&l[1]===e[1]){yield{path:Ae(i,l),visited:f,frontier:new N(s.data.map(o=>I(o.value[0],o.value[1])))};return}const m=I(l[0],l[1]);s.delete(m),f.add(m);const u=[[l[0]+1,l[1]],[l[0]-1,l[1]],[l[0],l[1]+1],[l[0],l[1]-1]];for(const o of u){const[h,g]=o,p=I(h,g);if(h<0||g<0||h>=t||g>=r||n.has(p))continue;const w=d.get(m)+1;if(w<d.get(p)){const S=w+Ie(o,e);i.set(p,l),d.set(p,w),v.set(p,S),s.has(p)||s.insert(o,S,p),yield{path:Ae(i,o),visited:f,frontier:new N(s.data.map(c=>I(c.value[0],c.value[1])))}}}}yield{path:[a],visited:f,frontier:new N(s.data.map(l=>I(l.value[0],l.value[1])))}};function Ae(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}const Ie=(a,e)=>Math.hypot(e[0]-a[0],e[1]-a[1]);var Pt=te("<option> </option>"),Rt=te('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select> <div><button>Start</button> <button>Stop</button></div></div></main>');function Gt(a,e){Ce(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:Ve},astar:{name:"A*",algorithm:qe}};let r=U(G(new N)),n=50,s=25,i=U(G([0,0])),f=U(G([49,24])),d,v=U("astar"),_=he(()=>t[k(v)].algorithm);function M(){k(r).clear(),d.startVisualisation(!0)}function l(){z(r,pe(n,s,k(i),k(f)),!0),d.startVisualisation(!0)}var m=Rt();pt(b=>{ze.title="Pathfinder"});var u=F(K(m),2),o=K(u),h=K(o);xt(Wt(h,{width:n,height:s,get start(){return k(i)},set start(b){z(i,b,!0)},get end(){return k(f)},set end(b){z(f,b,!0)},get walls(){return k(r)},set walls(b){z(r,b,!0)},get pathfindingAlgorithm(){return k(_)},set pathfindingAlgorithm(b){z(_,b)}}),b=>d=b,()=>d),R(o);var g=F(o,2),p=K(g);p.__click=M;var E=F(p,2);E.__click=l,R(g);var w=F(g,2);w.__change=()=>{d.startVisualisation(!0)},de(w,21,()=>Object.entries(t),([b,A])=>b,(b,A,D,x)=>{var O=he(()=>mt(k(A),2));let W=()=>k(O)[0],q=()=>k(O)[1];var C=Pt(),T=K(C,!0);R(C);var V={};ce(()=>{bt(T,q().name),V!==(V=W())&&(C.value=(C.__value=W())??"")}),X(b,C)}),R(w);var S=F(w,2),c=K(S);c.__click=()=>{d.startVisualisation()};var y=F(c,2);y.__click=()=>{d.stopVisualisation()},R(S),R(u),R(m),Nt(w,()=>k(v),b=>z(v,b)),X(a,m),He()}Le(["click","change"]);export{Gt as component};
