import"../chunks/DsnmJJEf.js";import"../chunks/uDWIAH8A.js";import{av as ve,b as Ee,ae as F,d as A,m as Me,e as Ae,A as T,G as Oe,aK as Ne,a8 as Se,ag as te,aq as K,l as z,a7 as Te,ax as Ce,j,aN as Ie,aL as De,a6 as se,aQ as xe,a3 as $,at as he,u as ze,aU as k,aO as me,aa as Le,aV as P,aW as Re,aX as Z,k as _e,al as He,aY as We,as as qe,aZ as Ue,x as Ye,a_ as ge,q as ke,a$ as Pe,aR as B,b0 as ie,C as L,a5 as G,X as Ve,Y as ae,Z as ne,a as q,_ as Xe,b1 as pe,$ as U,a0 as R,c as Fe,f as Ke,h as Ze,a1 as Be}from"../chunks/CdaaPVoF.js";import{d as Ge,e as Qe}from"../chunks/DX67L_GN.js";import{p as Q}from"../chunks/Dj_nLYmj.js";function le(t,e){return e}function Je(t,e,r){for(var a=t.items,i=[],u=e.length,s=0;s<u;s++)We(e[s].e,i,!0);var c=u>0&&i.length===0&&r!==null;if(c){var d=r.parentNode;qe(d),d.append(r),a.clear(),S(t,e[0].prev,e[u-1].next)}Ue(i,()=>{for(var h=0;h<u;h++){var _=e[h];c||(a.delete(_.k),S(t,_.prev,_.next)),_e(_.e,!c)}})}function fe(t,e,r,a,i,u=null){var s=t,c={flags:e,items:new Map,first:null},d=(e&ge)!==0;if(d){var h=t;s=A?F(Me(h)):h.appendChild(ve())}A&&Ae();var _=null,E=!1,y=new Map,w=Oe(()=>{var g=r();return ze(g)?g:g==null?[]:he(g)}),n,o;function f(){je(o,n,c,y,s,i,e,a,r),u!==null&&(n.length===0?_?me(_):_=j(()=>u(s)):_!==null&&Le(_,()=>{_=null}))}Ee(()=>{o??=Ye,n=T(w);var g=n.length;if(E&&g===0)return;E=g===0;let b=!1;if(A){var M=Ne(s)===Se;M!==(g===0)&&(s=te(),F(s),K(!1),b=!0)}if(A){for(var O=null,m,l=0;l<g;l++){if(z.nodeType===Te&&z.data===Ce){s=z,b=!0,K(!1);break}var v=n[l],p=a(v,l);m=ee(z,c,O,null,v,p,l,i,e,r),c.items.set(p,m),O=m}g>0&&F(te())}if(A)g===0&&u&&(_=j(()=>u(s)));else if(Ie()){var D=new Set,H=De;for(l=0;l<g;l+=1){v=n[l],p=a(v,l);var I=c.items.get(p)??y.get(p);I?(e&(P|k))!==0&&we(I,v,l,e):(m=ee(null,c,null,null,v,p,l,i,e,r,!0),y.set(p,m)),D.add(p)}for(const[N,W]of c.items)D.has(N)||H.skipped_effects.add(W.e);H.add_callback(f)}else f();b&&K(!0),T(w)}),A&&(s=z)}function je(t,e,r,a,i,u,s,c,d){var h=(s&Pe)!==0,_=(s&(P|k))!==0,E=e.length,y=r.items,w=r.first,n=w,o,f=null,g,b=[],M=[],O,m,l,v;if(h)for(v=0;v<E;v+=1)O=e[v],m=c(O,v),l=y.get(m),l!==void 0&&(l.a?.measure(),(g??=new Set).add(l));for(v=0;v<E;v+=1){if(O=e[v],m=c(O,v),l=y.get(m),l===void 0){var p=a.get(m);if(p!==void 0){a.delete(m),y.set(m,p);var D=f?f.next:n;S(r,f,p),S(r,p,D),J(p,D,i),f=p}else{var H=n?n.e.nodes_start:i;f=ee(H,r,f,f===null?r.first:f.next,O,m,v,u,s,d)}y.set(m,f),b=[],M=[],n=f.next;continue}if(_&&we(l,O,v,s),(l.e.f&Z)!==0&&(me(l.e),h&&(l.a?.unfix(),(g??=new Set).delete(l))),l!==n){if(o!==void 0&&o.has(l)){if(b.length<M.length){var I=M[0],N;f=I.prev;var W=b[0],V=b[b.length-1];for(N=0;N<b.length;N+=1)J(b[N],I,i);for(N=0;N<M.length;N+=1)o.delete(M[N]);S(r,W.prev,V.next),S(r,f,W),S(r,V,I),n=I,f=V,v-=1,b=[],M=[]}else o.delete(l),J(l,n,i),S(r,l.prev,l.next),S(r,l,f===null?r.first:f.next),S(r,f,l),f=l;continue}for(b=[],M=[];n!==null&&n.k!==m;)(n.e.f&Z)===0&&(o??=new Set).add(n),M.push(n),n=n.next;if(n===null)continue;l=n}b.push(l),f=l,n=l.next}if(n!==null||o!==void 0){for(var x=o===void 0?[]:he(o);n!==null;)(n.e.f&Z)===0&&x.push(n),n=n.next;var X=x.length;if(X>0){var ye=(s&ge)!==0&&E===0?i:null;if(h){for(v=0;v<X;v+=1)x[v].a?.measure();for(v=0;v<X;v+=1)x[v].a?.fix()}Je(r,x,ye)}}h&&ke(()=>{if(g!==void 0)for(l of g)l.a?.apply()}),t.first=r.first&&r.first.e,t.last=f&&f.e;for(var be of a.values())_e(be.e);a.clear()}function we(t,e,r,a){(a&P)!==0&&se(t.v,e),(a&k)!==0?se(t.i,r):t.i=r}function ee(t,e,r,a,i,u,s,c,d,h,_){var E=(d&P)!==0,y=(d&Re)===0,w=E?y?xe(i,!1,!1):$(i):i,n=(d&k)===0?s:$(s),o={i:n,v:w,k:u,a:null,e:null,prev:r,next:a};try{if(t===null){var f=document.createDocumentFragment();f.append(t=ve())}return o.e=j(()=>c(t,w,n,h),A),o.e.prev=r&&r.e,o.e.next=a&&a.e,r===null?_||(e.first=o):(r.next=o,r.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function J(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,i=e?e.e.nodes_start:r,u=t.e.nodes_start;u!==null&&u!==a;){var s=He(u);i.before(u),u=s}}function S(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const ue=[...` 	
\r\fÂ \v\uFEFF`];function $e(t,e,r){var a=""+t;if(r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var u=i.length,s=0;(s=a.indexOf(i,s))>=0;){var c=s+u;(s===0||ue.includes(a[s-1]))&&(c===a.length||ue.includes(a[c]))?a=(s===0?"":a.substring(0,s))+a.substring(c+1):s=c}}return a===""?null:a}function er(t,e){return t==null?null:String(t)}function rr(t,e,r,a,i,u){var s=t.__className;if(A||s!==r||s===void 0){var c=$e(r,a,u);(!A||c!==t.getAttribute("class"))&&(c==null?t.removeAttribute("class"):t.className=c),t.__className=r}else if(u&&i!==u)for(var d in u){var h=!!u[d];(i==null||h!==!!i[d])&&t.classList.toggle(d,h)}return u}function oe(t,e,r,a){var i=t.__style;if(A||i!==e){var u=er(e);(!A||u!==t.getAttribute("style"))&&(u==null?t.removeAttribute("style"):t.style.cssText=u),t.__style=e}return a}var ar=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],tr=["difference","intersection","symmetricDifference","union"],ce=!1;class Y extends Set{#a=new Map;#e=B(0);#r=B(0);#t=ie||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#r.v=super.size}ce||this.#i()}#s(e){return ie===this.#t?B(e):$(e)}#i(){ce=!0;var e=Y.prototype,r=Set.prototype;for(const a of ar)e[a]=function(...i){return T(this.#e),r[a].apply(this,i)};for(const a of tr)e[a]=function(...i){T(this.#e);var u=r[a].apply(this,i);return new Y(u)}}has(e){var r=super.has(e),a=this.#a,i=a.get(e);if(i===void 0){if(!r)return T(this.#e),!1;i=this.#s(!0),a.set(e,i)}return T(i),r}add(e){return super.has(e)||(super.add(e),L(this.#r,super.size),G(this.#e)),this}delete(e){var r=super.delete(e),a=this.#a,i=a.get(e);return i!==void 0&&(a.delete(e),L(i,!1)),r&&(L(this.#r,super.size),G(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var r of e.values())L(r,!1);e.clear(),L(this.#r,0),G(this.#e)}}keys(){return this.values()}values(){return T(this.#e),super.values()}entries(){return T(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return T(this.#r)}}class sr{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const r=this.array.indexOf(e);r!==-1&&this.array.splice(r,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ir(t,e,r){const a=[];for(let d=0;d<e;d++)for(let h=0;h<t;h++)a.push({x:h,y:d,isWall:!0});const i=re(a,t,r[0],r[1]),u=de(i,t,e,a,2),s=new sr,c=new Set;i.isWall=!1,c.add(C(i.x,i.y));for(const d of u)s.add(d.cell);for(;s.size>0;){const d=s.random(),h=de(d,t,e,a,2),_=h.filter(w=>c.has(C(w.cell.x,w.cell.y)));if(_.length===0){s.remove(d);continue}const E=_[Math.floor(Math.random()*_.length)],y=re(a,t,d.x+E.direction[0],d.y+E.direction[1]);c.add(C(d.x,d.y)),y.isWall=!1,d.isWall=!1,s.remove(d);for(const w of h)c.has(C(w.cell.x,w.cell.y))||s.add(w.cell)}return new Y(a.filter(d=>d.isWall).map(d=>C(d.x,d.y)))}function de(t,e,r,a,i=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(s=>({cell:re(a,e,t.x+s[0]*i,t.y+s[1]*i),direction:s})).filter(s=>s.cell&&s.cell.x>=0&&s.cell.y>=0&&s.cell.x<e&&s.cell.y<r)}function re(t,e,r,a){if(!(r<0||a<0))return t[r+e*a]}function C(t,e){return`${t},${e}`}var nr=t=>{t.preventDefault()},lr=ae('<div role="cell" tabindex="-1"></div>'),fr=ae('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function ur(t,e){Ve(e,!0);let r=Q(e,"start",23,()=>[0,0]),a=Q(e,"goal",23,()=>[e.width-1,e.height-1]),i=Q(e,"walls",19,()=>ir(e.width,e.height,r())),u=!1,s=new Set,c="add";function d(n,o,f){u=!0,f?c="remove":n===r()[0]&&o===r()[1]?c="movestart":n===a()[0]&&o===a()[1]?c="movegoal":c="add",s.add(C(n,o)),h(n,o)}function h(n,o){const f=C(n,o);if(!(!u||n===r()[0]&&o===r()[1]||n===a()[0]&&o===a()[1])){switch(c){case"add":{s.has(f)||i().add(f);break}case"remove":{s.has(f)||i().delete(f);break}case"movestart":{(n!==a()[0]||o!==a()[1])&&r([n,o]);break}case"movegoal":{(n!==r()[0]||o!==r()[1])&&a([n,o]);break}}s.add(f)}}function _(n,o){switch(c){case"movestart":case"movegoal":{const f=C(n,o);i().delete(f)}}}function E(){u=!1,s.clear()}var y=fr();Qe("mouseup",pe,()=>{E()});var w=U(y);fe(w,21,()=>({length:e.width}),le,(n,o,f)=>{var g=Fe(),b=Ke(g);fe(b,17,()=>({length:e.height}),le,(M,O,m)=>{var l=lr();let v;oe(l,`grid-column-start: ${f+1}; grid-row-start: ${m+1};`),l.__mousedown=p=>{d(f,m,p.button===2)},l.__mousemove=()=>{h(f,m)},l.__mouseup=()=>{_(f,m)},l.__contextmenu=[nr],ne(p=>v=rr(l,1,"cell svelte-c024sg",null,v,p),[()=>({wall:i().has(C(f,m)),start:f===r()[0]&&m===r()[1],goal:f===a()[0]&&m===a()[1]})]),q(M,l)}),q(n,g)}),R(w),R(y),ne(()=>oe(w,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),q(t,y),Xe()}Ge(["mousedown","mousemove","mouseup","contextmenu"]);var or=ae('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div></div></main>');function _r(t){var e=or();Ze(u=>{pe.title="Pathfinder"});var r=Be(U(e),2),a=U(r),i=U(a);ur(i,{width:51,height:25}),R(a),R(r),R(e),q(t,e)}export{_r as component};
