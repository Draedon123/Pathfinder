import"../chunks/DsnmJJEf.js";import{av as Se,W as Re,a8 as te,U as C,an as Ve,X as qe,b as A,l as Ge,aM as Ke,Z as Ue,aa as ve,aq as ae,T as Y,Y as Fe,ay as Ye,_ as le,aP as Qe,aN as B,V as pe,aR as Xe,Q as oe,at as Ie,al as Ae,aV as $,aQ as Ee,a0 as Ze,aW as j,aX as Be,aY as re,a7 as Ne,ag as Je,aZ as $e,as as je,a_ as et,j as tt,a$ as ke,q as at,b0 as rt,b1 as it,e as st,ai as nt,b2 as lt,b3 as ot,b4 as ut,aS as G,b5 as me,i as T,R as ie,G as Oe,d as q,H as ee,I as ue,a as Q,J as Te,b6 as De,K as U,M as W,c as ft,f as ct,aT as fe,h as ht,N as F,b7 as dt}from"../chunks/DXq1jusL.js";import{d as He,a as vt,e as pt,s as mt}from"../chunks/CtUVcy4A.js";import{p as Z,b as gt}from"../chunks/8tpBX6B5.js";function ge(a,e){return e}function _t(a,e,t){for(var r=a.items,i=[],s=e.length,n=0;n<s;n++)$e(e[n].e,i,!0);var u=s>0&&i.length===0&&t!==null;if(u){var v=t.parentNode;je(v),v.append(t),r.clear(),L(a,e[0].prev,e[s-1].next)}et(i,()=>{for(var m=0;m<s;m++){var b=e[m];u||(r.delete(b.k),L(a,b.prev,b.next)),Ne(b.e,!u)}})}function ce(a,e,t,r,i,s=null){var n=a,u={flags:e,items:new Map,first:null},v=(e&ke)!==0;if(v){var m=a;n=C?te(Ve(m)):m.appendChild(Se())}C&&qe();var b=null,x=!1,l=new Map,_=Ge(()=>{var y=t();return Ae(y)?y:y==null?[]:Ie(y)}),c,o;function p(){yt(o,c,u,l,n,i,e,r,t),s!==null&&(c.length===0?b?Ee(b):b=le(()=>s(n)):b!==null&&Ze(b,()=>{b=null}))}Re(()=>{o??=tt,c=A(_);var y=c.length;if(x&&y===0)return;x=y===0;let g=!1;if(C){var E=Ke(n)===Ue;E!==(y===0)&&(n=ve(),te(n),ae(!1),g=!0)}if(C){for(var w=null,S,h=0;h<y;h++){if(Y.nodeType===Fe&&Y.data===Ye){n=Y,g=!0,ae(!1);break}var d=c[h],f=r(d,h);S=he(Y,u,w,null,d,f,h,i,e,t),u.items.set(f,S),w=S}y>0&&te(ve())}if(C)y===0&&s&&(b=le(()=>s(n)));else if(Qe()){var M=new Set,P=B;for(h=0;h<y;h+=1){d=c[h],f=r(d,h);var z=u.items.get(f)??l.get(f);z?(e&(j|$))!==0&&Ce(z,d,h,e):(S=he(null,u,null,null,d,f,h,i,e,t,!0),l.set(f,S)),M.add(f)}for(const[N,R]of u.items)M.has(N)||P.skipped_effects.add(R.e);P.add_callback(p)}else p();g&&ae(!0),A(_)}),C&&(n=Y)}function yt(a,e,t,r,i,s,n,u,v){var m=(n&rt)!==0,b=(n&(j|$))!==0,x=e.length,l=t.items,_=t.first,c=_,o,p=null,y,g=[],E=[],w,S,h,d;if(m)for(d=0;d<x;d+=1)w=e[d],S=u(w,d),h=l.get(S),h!==void 0&&(h.a?.measure(),(y??=new Set).add(h));for(d=0;d<x;d+=1){if(w=e[d],S=u(w,d),h=l.get(S),h===void 0){var f=r.get(S);if(f!==void 0){r.delete(S),l.set(S,f);var M=p?p.next:c;L(t,p,f),L(t,f,M),se(f,M,i),p=f}else{var P=c?c.e.nodes_start:i;p=he(P,t,p,p===null?t.first:p.next,w,S,d,s,n,v)}l.set(S,p),g=[],E=[],c=p.next;continue}if(b&&Ce(h,w,d,n),(h.e.f&re)!==0&&(Ee(h.e),m&&(h.a?.unfix(),(y??=new Set).delete(h))),h!==c){if(o!==void 0&&o.has(h)){if(g.length<E.length){var z=E[0],N;p=z.prev;var R=g[0],O=g[g.length-1];for(N=0;N<g.length;N+=1)se(g[N],z,i);for(N=0;N<E.length;N+=1)o.delete(E[N]);L(t,R.prev,O.next),L(t,p,R),L(t,O,z),c=z,p=O,d-=1,g=[],E=[]}else o.delete(h),se(h,c,i),L(t,h.prev,h.next),L(t,h,p===null?t.first:p.next),L(t,p,h),p=h;continue}for(g=[],E=[];c!==null&&c.k!==S;)(c.e.f&re)===0&&(o??=new Set).add(c),E.push(c),c=c.next;if(c===null)continue;h=c}g.push(h),p=h,c=h.next}if(c!==null||o!==void 0){for(var k=o===void 0?[]:Ie(o);c!==null;)(c.e.f&re)===0&&k.push(c),c=c.next;var H=k.length;if(H>0){var K=(n&ke)!==0&&x===0?i:null;if(m){for(d=0;d<H;d+=1)k[d].a?.measure();for(d=0;d<H;d+=1)k[d].a?.fix()}_t(t,k,K)}}m&&at(()=>{if(y!==void 0)for(h of y)h.a?.apply()}),a.first=t.first&&t.first.e,a.last=p&&p.e;for(var V of r.values())Ne(V.e);r.clear()}function Ce(a,e,t,r){(r&j)!==0&&pe(a.v,e),(r&$)!==0?pe(a.i,t):a.i=t}function he(a,e,t,r,i,s,n,u,v,m,b){var x=(v&j)!==0,l=(v&Be)===0,_=x?l?Xe(i,!1,!1):oe(i):i,c=(v&$)===0?n:oe(n),o={i:c,v:_,k:s,a:null,e:null,prev:t,next:r};try{if(a===null){var p=document.createDocumentFragment();p.append(a=Se())}return o.e=le(()=>u(a,_,c,m),C),o.e.prev=t&&t.e,o.e.next=r&&r.e,t===null?b||(e.first=o):(t.next=o,t.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function se(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=a.e.nodes_start;s!==null&&s!==r;){var n=Je(s);i.before(s),s=n}}function L(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const _e=[...` 	
\r\fÂ \v\uFEFF`];function bt(a,e,t){var r=""+a;if(t){for(var i in t)if(t[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,n=0;(n=r.indexOf(i,n))>=0;){var u=n+s;(n===0||_e.includes(r[n-1]))&&(u===r.length||_e.includes(r[u]))?r=(n===0?"":r.substring(0,n))+r.substring(u+1):n=u}}return r===""?null:r}function wt(a,e){return a==null?null:String(a)}function Mt(a,e,t,r,i,s){var n=a.__className;if(C||n!==t||n===void 0){var u=bt(t,r,s);(!C||u!==a.getAttribute("class"))&&(u==null?a.removeAttribute("class"):a.className=u),a.__className=t}else if(s&&i!==s)for(var v in s){var m=!!s[v];(i==null||m!==!!i[v])&&a.classList.toggle(v,m)}return s}function ye(a,e,t,r){var i=a.__style;if(C||i!==e){var s=wt(e);(!C||s!==a.getAttribute("style"))&&(s==null?a.removeAttribute("style"):a.style.cssText=s),a.__style=e}return r}function ze(a,e,t=!1){if(a.multiple){if(e==null)return;if(!Ae(e))return lt();for(var r of a.options)r.selected=e.includes(X(r));return}for(r of a.options){var i=X(r);if(ot(i,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function xt(a){var e=new MutationObserver(()=>{ze(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),nt(()=>{e.disconnect()})}function St(a,e,t=e){var r=new WeakSet,i=!0;it(a,"change",s=>{var n=s?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(n),X);else{var v=a.querySelector(n)??a.querySelector("option:not([disabled])");u=v&&X(v)}t(u),B!==null&&r.add(B)}),st(()=>{var s=e();if(a===document.activeElement){var n=ut??B;if(r.has(n))return}if(ze(a,s,i),i&&s===void 0){var u=a.querySelector(":checked");u!==null&&(s=X(u),t(s))}a.__value=s,i=!1}),xt(a)}function X(a){return"__value"in a?a.__value:a.value}var It=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],At=["difference","intersection","symmetricDifference","union"],be=!1;class D extends Set{#a=new Map;#e=G(0);#t=G(0);#r=me||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}be||this.#s()}#i(e){return me===this.#r?G(e):oe(e)}#s(){be=!0;var e=D.prototype,t=Set.prototype;for(const r of It)e[r]=function(...i){return A(this.#e),t[r].apply(this,i)};for(const r of At)e[r]=function(...i){A(this.#e);var s=t[r].apply(this,i);return new D(s)}}has(e){var t=super.has(e),r=this.#a,i=r.get(e);if(i===void 0){if(!t)return A(this.#e),!1;i=this.#i(!0),r.set(e,i)}return A(i),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),ie(this.#e)),this}delete(e){var t=super.delete(e),r=this.#a,i=r.get(e);return i!==void 0&&(r.delete(e),T(i,!1)),t&&(T(this.#t,super.size),ie(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),ie(this.#e)}}keys(){return this.values()}values(){return A(this.#e),super.values()}entries(){return A(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return A(this.#t)}}class Et{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class Le{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,r){if(this.indexMap.has(r)){this.decreasePriority(r,t);return}const i={value:e,priority:t,key:r};this.data.push(i);const s=this.data.length-1;this.indexMap.set(r,s),this.bubbleUp(s)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),r=this.right(e);let i=e;t<this.data.length&&this.data[t].priority<this.data[i].priority&&(i=t),r<this.data.length&&this.data[r].priority<this.data[i].priority&&(i=r),i!==e&&(this.swap(e,i),this.minHeapify(i))}decreasePriority(e,t){const r=this.indexMap.get(e);r!==void 0&&(t>=this.data[r].priority||(this.data[r].priority=t,this.bubbleUp(r)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const r=this.data.length-1;if(t===r)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,r);const i=this.data.pop();this.indexMap.delete(i.key);const s=this.data[t],n=this.parent(t);return t>0&&this.data[n].priority>s.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const We=function*(a,e,t,r,i){const s=new Le,n=new Map,u=new Map,v=new D,m=Array.from({length:r},(x,l)=>Array.from({length:t},(_,c)=>({x:c,y:l,isWall:i.has(I(c,l))}))).flat();for(const x of m){const l=I(x.x,x.y);n.set(l,1/0)}const b=I(a[0],a[1]);for(n.set(b,0),s.insert(m[a[0]+t*a[1]],0,b);!s.isEmpty();){const l=s.extractMin().value,_=I(l.x,l.y);if(v.has(_))continue;if(v.add(_),l.x===e[0]&&l.y===e[1])break;const c=n.get(_),o=[[l.x+1,l.y],[l.x-1,l.y],[l.x,l.y+1],[l.x,l.y-1]];for(const[p,y]of o){const g=m[p+y*t];if(g===void 0||g.isWall||p<0||y<0||p>=t||y>=r)continue;const E=I(g.x,g.y),w=c+1;w<n.get(E)&&(n.set(E,w),u.set(E,[l.x,l.y]),s.has(E)?s.decreasePriority(E,w):s.insert(g,w,E),yield{path:we(u,[g.x,g.y]),visited:v,frontier:new D(s.data.map(S=>I(S.value.x,S.value.y)))})}}yield{path:we(u,e),visited:v,frontier:new D(s.data.map(x=>I(x.value.x,x.value.y)))}};function we(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}function de(a,e,t,r){const i=[],s=a,n=e;a=a%2===0?a+1:a,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let p=0;p<a;p++)i.push({x:p,y:o,isWall:!0});const u=J(i,a,t[0],t[1]),v=ne(u,a,e,i,2),m=new Et,b=new Set,x=J(i,a,r[0],r[1]),l=ne(x,a,e,i,2);u.isWall=!1,x.isWall=!1,b.add(I(u.x,u.y));for(const o of[...v,...l])m.add(o.cell);for(;m.size>0;){const o=m.random(),p=ne(o,a,e,i,2),y=p.filter(w=>b.has(I(w.cell.x,w.cell.y)));if(y.length===0){m.remove(o);continue}const g=y[Math.floor(Math.random()*y.length)],E=J(i,a,o.x+g.direction[0],o.y+g.direction[1]);b.add(I(o.x,o.y)),E.isWall=!1,o.isWall=!1,m.remove(o);for(const w of p)b.has(I(w.cell.x,w.cell.y))||m.add(w.cell)}const _=new D(i.filter(o=>o.isWall&&(o.x!==r[0]||o.y!==r[1])&&o.x<s&&o.y<n).map(o=>I(o.x,o.y)));return We(t,r,s,n,_).length<=1?de(s,n,t,r):_}function ne(a,e,t,r,i=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:J(r,e,a.x+n[0]*i,a.y+n[1]*i),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function J(a,e,t,r){if(!(t<0||r<0))return a[t+e*r]}function I(a,e){return`${a},${e}`}var Nt=a=>{a.preventDefault()},kt=ee('<div role="cell" tabindex="-1"></div>'),Ot=ee('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function Tt(a,e){Oe(e,!0);let t=Z(e,"start",31,()=>q([0,0])),r=Z(e,"end",31,()=>q([e.width-1,e.height-1])),i=Z(e,"walls",27,()=>q(de(e.width,e.height,t(),r()))),s=Z(e,"pathfindingAlgorithm",27,()=>q(Pe)),n=!1,u=new Set,v="add",m=G(q([])),b=new D,x=new D,l=null,_=!1;function c(d=!1){if(_&&(T(m,[],!0),b.clear(),x.clear()),d&&!_)return;_=!0;const f=s()(t(),r(),e.width,e.height,i());l!==null&&clearInterval(l),l=setInterval(()=>{const M=f.next();M.done?(clearInterval(l),l=null):(T(m,M.value.path,!0),b=M.value.visited,x=M.value.frontier)},5)}function o(){_=!1,T(m,[],!0),l!==null&&clearInterval(l)}function p(d,f,M){_||(n=!0,M?v="remove":d===t()[0]&&f===t()[1]?v="movestart":d===r()[0]&&f===r()[1]?v="movegoal":v="add",y(d,f),u.add(I(d,f)))}function y(d,f){const M=I(d,f);if(!(_||!n||d===t()[0]&&f===t()[1]||d===r()[0]&&f===r()[1])){switch(v){case"add":{u.has(M)||i().add(M);break}case"remove":{u.has(M)||i().delete(M);break}case"movestart":{(d!==r()[0]||f!==r()[1])&&t([d,f]);break}case"movegoal":{(d!==t()[0]||f!==t()[1])&&r([d,f]);break}}u.add(M)}}function g(d,f){if(!_)switch(v){case"movestart":case"movegoal":{const M=I(d,f);i().delete(M)}}}function E(){_||(n=!1,u.clear())}vt(()=>{l!==null&&clearInterval(l)});var w={startVisualisation:c,stopVisualisation:o},S=Ot();pt("mouseup",De,()=>{E()});var h=U(S);return ce(h,21,()=>({length:e.width}),ge,(d,f,M)=>{var P=ft(),z=ct(P);ce(z,17,()=>({length:e.height}),ge,(N,R,O)=>{const k=fe(()=>I(M,O));var H=kt();let K;ye(H,`grid-column-start: ${M+1}; grid-row-start: ${O+1};`),H.__mousedown=V=>{p(M,O,V.button===2)},H.__mousemove=()=>{y(M,O)},H.__mouseup=()=>{g(M,O)},H.__contextmenu=[Nt],ue(V=>K=Mt(H,1,"cell svelte-c024sg",null,K,V),[()=>({wall:i().has(A(k)),start:M===t()[0]&&O===t()[1],goal:M===r()[0]&&O===r()[1],path:A(m).some(V=>V[0]===M&&V[1]===O),visited:b.has(A(k)),frontier:x.has(A(k))})]),Q(N,H)}),Q(d,P)}),W(h),W(S),ue(()=>ye(h,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),Q(a,S),Te(w)}He(["mousedown","mousemove","mouseup","contextmenu"]);const Pe=function*(a,e,t,r,i){const s=new Le,n=new Map,u=new D,v=new Map,m=new Map,b=xe(a,e),x=I(a[0],a[1]);s.insert(a,0+b,x);for(let l=0;l<t;l++)for(let _=0;_<r;_++){const c=I(l,_);v.set(c,1/0),m.set(c,1/0)}for(v.set(x,0),m.set(x,b);!s.isEmpty();){const l=s.extractMin().value;if(l[0]===e[0]&&l[1]===e[1]){yield{path:Me(n,l),visited:u,frontier:new D(s.data.map(o=>I(o.value[0],o.value[1])))};return}const _=I(l[0],l[1]);s.delete(_),u.add(_);const c=[[l[0]+1,l[1]],[l[0]-1,l[1]],[l[0],l[1]+1],[l[0],l[1]-1]];for(const o of c){const[p,y]=o,g=I(p,y);if(p<0||y<0||p>=t||y>=r||i.has(g))continue;const w=v.get(_)+1;if(w<v.get(g)){const S=w+xe(o,e);n.set(g,l),v.set(g,w),m.set(g,S),s.has(g)||s.insert(o,S,g),yield{path:Me(n,o),visited:u,frontier:new D(s.data.map(h=>I(h.value[0],h.value[1])))}}}}yield{path:[a],visited:u,frontier:new D(s.data.map(l=>I(l.value[0],l.value[1])))}};function Me(a,e){const t=[e];for(;a.has(I(e[0],e[1]));)e=a.get(I(e[0],e[1])),t.unshift(e);return t}const xe=(a,e)=>Math.hypot(e[0]-a[0],e[1]-a[1]);var Dt=ee("<option> </option>"),Ht=ee('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select> <div><button>Start</button> <button>Stop</button></div></div></main>');function Pt(a,e){Oe(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:We},astar:{name:"A*",algorithm:Pe}};let r=G(q(new D)),i=50,s=25,n=G(q([0,0])),u=G(q([49,24])),v,m=G("astar"),b=fe(()=>t[A(m)].algorithm);function x(){A(r).clear(),v.startVisualisation(!0)}function l(){T(r,de(i,s,A(n),A(u)),!0),v.startVisualisation(!0)}var _=Ht();ht(f=>{De.title="Pathfinder"});var c=F(U(_),2),o=U(c),p=U(o);gt(Tt(p,{width:i,height:s,get start(){return A(n)},set start(f){T(n,f,!0)},get end(){return A(u)},set end(f){T(u,f,!0)},get walls(){return A(r)},set walls(f){T(r,f,!0)},get pathfindingAlgorithm(){return A(b)},set pathfindingAlgorithm(f){T(b,f)}}),f=>v=f,()=>v),W(o);var y=F(o,2),g=U(y);g.__click=x;var E=F(g,2);E.__click=l,W(y);var w=F(y,2);w.__change=()=>{v.startVisualisation(!0)},ce(w,21,()=>Object.entries(t),([f,M])=>f,(f,M,P,z)=>{var N=fe(()=>dt(A(M),2));let R=()=>A(N)[0],O=()=>A(N)[1];var k=Dt(),H=U(k,!0);W(k);var K={};ue(()=>{mt(H,O().name),K!==(K=R())&&(k.value=(k.__value=R())??"")}),Q(f,k)}),W(w);var S=F(w,2),h=U(S);h.__click=()=>{v.startVisualisation()};var d=F(h,2);d.__click=()=>{v.stopVisualisation()},W(S),W(c),W(_),St(w,()=>A(m),f=>T(m,f)),Q(a,_),Te()}He(["click","change"]);export{Pt as component};
