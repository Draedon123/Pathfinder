import"../chunks/DsnmJJEf.js";import"../chunks/uDWIAH8A.js";import{av as ve,b as Ee,ae as K,d as N,m as Ae,e as Me,A as T,G as Ne,aK as Oe,a8 as Se,ag as te,aq as U,l as z,a7 as Te,ax as xe,j,aN as Ce,aL as Ie,a6 as se,aQ as De,a3 as $,at as he,u as ze,aU as V,aO as me,aa as Le,aV as X,aW as Re,aX as Z,k as _e,al as He,aY as We,as as qe,aZ as Ye,x as Pe,a_ as ge,q as Ve,a$ as Xe,aR as B,b0 as ie,C as L,a5 as G,X as ke,Y as ae,Z as ne,a as q,_ as Fe,b1 as pe,$ as Y,a0 as R,c as Ke,f as Ue,h as Ze,a1 as Be}from"../chunks/CdaaPVoF.js";import{d as Ge,e as Qe}from"../chunks/DX67L_GN.js";import{p as Q}from"../chunks/Dj_nLYmj.js";function le(t,e){return e}function Je(t,e,r){for(var a=t.items,s=[],f=e.length,i=0;i<f;i++)We(e[i].e,s,!0);var o=f>0&&s.length===0&&r!==null;if(o){var u=r.parentNode;qe(u),u.append(r),a.clear(),S(t,e[0].prev,e[f-1].next)}Ye(s,()=>{for(var v=0;v<f;v++){var _=e[v];o||(a.delete(_.k),S(t,_.prev,_.next)),_e(_.e,!o)}})}function fe(t,e,r,a,s,f=null){var i=t,o={flags:e,items:new Map,first:null},u=(e&ge)!==0;if(u){var v=t;i=N?K(Ae(v)):v.appendChild(ve())}N&&Me();var _=null,E=!1,m=new Map,h=Ne(()=>{var p=r();return ze(p)?p:p==null?[]:he(p)}),n,g;function c(){je(g,n,o,m,i,s,e,a,r),f!==null&&(n.length===0?_?me(_):_=j(()=>f(i)):_!==null&&Le(_,()=>{_=null}))}Ee(()=>{g??=Pe,n=T(h);var p=n.length;if(E&&p===0)return;E=p===0;let A=!1;if(N){var y=Oe(i)===Se;y!==(p===0)&&(i=te(),K(i),U(!1),A=!0)}if(N){for(var b=null,w,l=0;l<p;l++){if(z.nodeType===Te&&z.data===xe){i=z,A=!0,U(!1);break}var d=n[l],M=a(d,l);w=ee(z,o,b,null,d,M,l,s,e,r),o.items.set(M,w),b=w}p>0&&K(te())}if(N)p===0&&f&&(_=j(()=>f(i)));else if(Ce()){var I=new Set,H=Ie;for(l=0;l<p;l+=1){d=n[l],M=a(d,l);var C=o.items.get(M)??m.get(M);C?(e&(X|V))!==0&&we(C,d,l,e):(w=ee(null,o,null,null,d,M,l,s,e,r,!0),m.set(M,w)),I.add(M)}for(const[O,W]of o.items)I.has(O)||H.skipped_effects.add(W.e);H.add_callback(c)}else c();A&&U(!0),T(h)}),N&&(i=z)}function je(t,e,r,a,s,f,i,o,u){var v=(i&Xe)!==0,_=(i&(X|V))!==0,E=e.length,m=r.items,h=r.first,n=h,g,c=null,p,A=[],y=[],b,w,l,d;if(v)for(d=0;d<E;d+=1)b=e[d],w=o(b,d),l=m.get(w),l!==void 0&&(l.a?.measure(),(p??=new Set).add(l));for(d=0;d<E;d+=1){if(b=e[d],w=o(b,d),l=m.get(w),l===void 0){var M=a.get(w);if(M!==void 0){a.delete(w),m.set(w,M);var I=c?c.next:n;S(r,c,M),S(r,M,I),J(M,I,s),c=M}else{var H=n?n.e.nodes_start:s;c=ee(H,r,c,c===null?r.first:c.next,b,w,d,f,i,u)}m.set(w,c),A=[],y=[],n=c.next;continue}if(_&&we(l,b,d,i),(l.e.f&Z)!==0&&(me(l.e),v&&(l.a?.unfix(),(p??=new Set).delete(l))),l!==n){if(g!==void 0&&g.has(l)){if(A.length<y.length){var C=y[0],O;c=C.prev;var W=A[0],k=A[A.length-1];for(O=0;O<A.length;O+=1)J(A[O],C,s);for(O=0;O<y.length;O+=1)g.delete(y[O]);S(r,W.prev,k.next),S(r,c,W),S(r,k,C),n=C,c=k,d-=1,A=[],y=[]}else g.delete(l),J(l,n,s),S(r,l.prev,l.next),S(r,l,c===null?r.first:c.next),S(r,c,l),c=l;continue}for(A=[],y=[];n!==null&&n.k!==w;)(n.e.f&Z)===0&&(g??=new Set).add(n),y.push(n),n=n.next;if(n===null)continue;l=n}A.push(l),c=l,n=l.next}if(n!==null||g!==void 0){for(var D=g===void 0?[]:he(g);n!==null;)(n.e.f&Z)===0&&D.push(n),n=n.next;var F=D.length;if(F>0){var ye=(i&ge)!==0&&E===0?s:null;if(v){for(d=0;d<F;d+=1)D[d].a?.measure();for(d=0;d<F;d+=1)D[d].a?.fix()}Je(r,D,ye)}}v&&Ve(()=>{if(p!==void 0)for(l of p)l.a?.apply()}),t.first=r.first&&r.first.e,t.last=c&&c.e;for(var be of a.values())_e(be.e);a.clear()}function we(t,e,r,a){(a&X)!==0&&se(t.v,e),(a&V)!==0?se(t.i,r):t.i=r}function ee(t,e,r,a,s,f,i,o,u,v,_){var E=(u&X)!==0,m=(u&Re)===0,h=E?m?De(s,!1,!1):$(s):s,n=(u&V)===0?i:$(i),g={i:n,v:h,k:f,a:null,e:null,prev:r,next:a};try{if(t===null){var c=document.createDocumentFragment();c.append(t=ve())}return g.e=j(()=>o(t,h,n,v),N),g.e.prev=r&&r.e,g.e.next=a&&a.e,r===null?_||(e.first=g):(r.next=g,r.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function J(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,f=t.e.nodes_start;f!==null&&f!==a;){var i=He(f);s.before(f),f=i}}function S(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const ue=[...` 	
\r\fÂ \v\uFEFF`];function $e(t,e,r){var a=""+t;if(r){for(var s in r)if(r[s])a=a?a+" "+s:s;else if(a.length)for(var f=s.length,i=0;(i=a.indexOf(s,i))>=0;){var o=i+f;(i===0||ue.includes(a[i-1]))&&(o===a.length||ue.includes(a[o]))?a=(i===0?"":a.substring(0,i))+a.substring(o+1):i=o}}return a===""?null:a}function er(t,e){return t==null?null:String(t)}function rr(t,e,r,a,s,f){var i=t.__className;if(N||i!==r||i===void 0){var o=$e(r,a,f);(!N||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):t.className=o),t.__className=r}else if(f&&s!==f)for(var u in f){var v=!!f[u];(s==null||v!==!!s[u])&&t.classList.toggle(u,v)}return f}function oe(t,e,r,a){var s=t.__style;if(N||s!==e){var f=er(e);(!N||f!==t.getAttribute("style"))&&(f==null?t.removeAttribute("style"):t.style.cssText=f),t.__style=e}return a}var ar=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],tr=["difference","intersection","symmetricDifference","union"],de=!1;class P extends Set{#a=new Map;#e=B(0);#r=B(0);#t=ie||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#r.v=super.size}de||this.#i()}#s(e){return ie===this.#t?B(e):$(e)}#i(){de=!0;var e=P.prototype,r=Set.prototype;for(const a of ar)e[a]=function(...s){return T(this.#e),r[a].apply(this,s)};for(const a of tr)e[a]=function(...s){T(this.#e);var f=r[a].apply(this,s);return new P(f)}}has(e){var r=super.has(e),a=this.#a,s=a.get(e);if(s===void 0){if(!r)return T(this.#e),!1;s=this.#s(!0),a.set(e,s)}return T(s),r}add(e){return super.has(e)||(super.add(e),L(this.#r,super.size),G(this.#e)),this}delete(e){var r=super.delete(e),a=this.#a,s=a.get(e);return s!==void 0&&(a.delete(e),L(s,!1)),r&&(L(this.#r,super.size),G(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var r of e.values())L(r,!1);e.clear(),L(this.#r,0),G(this.#e)}}keys(){return this.values()}values(){return T(this.#e),super.values()}entries(){return T(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return T(this.#r)}}class sr{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const r=this.array.indexOf(e);r!==-1&&this.array.splice(r,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ir(t,e,r){const a=[];for(let u=0;u<e;u++)for(let v=0;v<t;v++)a.push({x:v,y:u,isWall:!0});const s=re(a,t,r[0],r[1]),f=ce(s,t,e,a,2),i=new sr,o=new Set;s.isWall=!1,o.add(x(s.x,s.y));for(const u of f)i.add(u.cell);for(;i.size>0;){const u=i.random(),v=ce(u,t,e,a,2),_=v.filter(h=>o.has(x(h.cell.x,h.cell.y)));if(_.length===0){i.remove(u);continue}const E=_[Math.floor(Math.random()*_.length)],m=re(a,t,u.x+E.direction[0],u.y+E.direction[1]);o.add(x(u.x,u.y)),m.isWall=!1,u.isWall=!1,i.remove(u);for(const h of v)o.has(x(h.cell.x,h.cell.y))||i.add(h.cell)}return new P(a.filter(u=>u.isWall).map(u=>x(u.x,u.y)))}function ce(t,e,r,a,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:re(a,e,t.x+i[0]*s,t.y+i[1]*s),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<r)}function re(t,e,r,a){if(!(r<0||a<0))return t[r+e*a]}function x(t,e){return`${t},${e}`}var nr=t=>{t.preventDefault()},lr=ae('<div role="cell" tabindex="-1"></div>'),fr=ae('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function ur(t,e){ke(e,!0);let r=Q(e,"start",23,()=>[0,0]),a=Q(e,"goal",23,()=>[e.width-1,e.height-1]),s=Q(e,"walls",19,()=>ir(e.width,e.height,r())),f=!1,i=new Set,o="add";function u(m,h,n){f=!0,n?o="remove":m===r()[0]&&h===r()[1]?o="movestart":m===a()[0]&&h===a()[1]?o="movegoal":o="add",i.add(x(m,h)),v(m,h)}function v(m,h){const n=x(m,h);if(!(!f||i.has(n)||m===r()[0]&&h===r()[1]||m===a()[0]&&h===a()[1]))switch(i.add(n),o){case"add":{s().add(n);break}case"remove":{s().delete(n);break}case"movestart":{s().delete(n),r([m,h]);break}case"movegoal":{s().delete(n),a([m,h]);break}}}var _=fr();Qe("mouseup",pe,()=>{f=!1,i.clear()});var E=Y(_);fe(E,21,()=>({length:e.width}),le,(m,h,n)=>{var g=Ke(),c=Ue(g);fe(c,17,()=>({length:e.height}),le,(p,A,y)=>{var b=lr();let w;oe(b,`grid-column-start: ${n+1}; grid-row-start: ${y+1};`),b.__mousedown=l=>{u(n,y,l.button===2)},b.__mousemove=()=>{v(n,y)},b.__contextmenu=[nr],ne(l=>w=rr(b,1,"cell svelte-c024sg",null,w,l),[()=>({wall:s().has(x(n,y)),start:n===r()[0]&&y===r()[1],goal:n===a()[0]&&y===a()[1]})]),q(p,b)}),q(m,g)}),R(E),R(_),ne(()=>oe(E,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),q(t,_),Fe()}Ge(["mousedown","mousemove","contextmenu"]);var or=ae('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div></div></main>');function _r(t){var e=or();Ze(f=>{pe.title="Pathfinder"});var r=Be(Y(e),2),a=Y(r),s=Y(a);ur(s,{width:51,height:25}),R(a),R(r),R(e),q(t,e)}export{_r as component};
