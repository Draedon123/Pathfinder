import"../chunks/DsnmJJEf.js";import{av as xe,W as Re,a8 as j,U as D,an as qe,X as Ve,b as S,l as Ge,aM as Ue,Z as Ke,aa as ce,aq as ee,T as V,Y as Fe,ay as Ye,_ as ie,aP as Qe,aN as Q,V as he,aR as Xe,Q as ne,at as we,al as Se,aV as Z,aQ as Ae,a0 as Ze,aW as B,aX as Be,aY as te,a7 as Ie,ag as Je,aZ as $e,as as je,a_ as et,j as tt,a$ as Ee,q as at,b0 as rt,b1 as st,e as it,ai as nt,b2 as lt,b3 as ot,b4 as ut,aS as R,b5 as de,i as T,R as ae,G as Ne,d as P,H as J,I as le,a as U,J as Oe,b6 as Te,K as q,M as W,c as ft,f as ct,h as ht,N as G,aT as ve,b7 as dt}from"../chunks/DXq1jusL.js";import{d as ke,a as vt,e as pt,s as mt}from"../chunks/CtUVcy4A.js";import{p as Y,b as gt}from"../chunks/8tpBX6B5.js";function pe(r,e){return e}function _t(r,e,t){for(var a=r.items,s=[],l=e.length,n=0;n<l;n++)$e(e[n].e,s,!0);var f=l>0&&s.length===0&&t!==null;if(f){var m=t.parentNode;je(m),m.append(t),a.clear(),H(r,e[0].prev,e[l-1].next)}et(s,()=>{for(var g=0;g<l;g++){var h=e[g];f||(a.delete(h.k),H(r,h.prev,h.next)),Ie(h.e,!f)}})}function oe(r,e,t,a,s,l=null){var n=r,f={flags:e,items:new Map,first:null},m=(e&Ee)!==0;if(m){var g=r;n=D?j(qe(g)):g.appendChild(xe())}D&&Ve();var h=null,o=!1,b=new Map,x=Ge(()=>{var p=t();return Se(p)?p:p==null?[]:we(p)}),c,u;function d(){yt(u,c,f,b,n,s,e,a,t),l!==null&&(c.length===0?h?Ae(h):h=ie(()=>l(n)):h!==null&&Ze(h,()=>{h=null}))}Re(()=>{u??=tt,c=S(x);var p=c.length;if(o&&p===0)return;o=p===0;let M=!1;if(D){var w=Ue(n)===Ke;w!==(p===0)&&(n=ce(),j(n),ee(!1),M=!0)}if(D){for(var v=null,_,i=0;i<p;i++){if(V.nodeType===Fe&&V.data===Ye){n=V,M=!0,ee(!1);break}var y=c[i],N=a(y,i);_=ue(V,f,v,null,y,N,i,s,e,t),f.items.set(N,_),v=_}p>0&&j(ce())}if(D)p===0&&l&&(h=ie(()=>l(n)));else if(Qe()){var C=new Set,z=Q;for(i=0;i<p;i+=1){y=c[i],N=a(y,i);var E=f.items.get(N)??b.get(N);E?(e&(B|Z))!==0&&De(E,y,i,e):(_=ue(null,f,null,null,y,N,i,s,e,t,!0),b.set(N,_)),C.add(N)}for(const[I,O]of f.items)C.has(I)||z.skipped_effects.add(O.e);z.add_callback(d)}else d();M&&ee(!0),S(x)}),D&&(n=V)}function yt(r,e,t,a,s,l,n,f,m){var g=(n&rt)!==0,h=(n&(B|Z))!==0,o=e.length,b=t.items,x=t.first,c=x,u,d=null,p,M=[],w=[],v,_,i,y;if(g)for(y=0;y<o;y+=1)v=e[y],_=f(v,y),i=b.get(_),i!==void 0&&(i.a?.measure(),(p??=new Set).add(i));for(y=0;y<o;y+=1){if(v=e[y],_=f(v,y),i=b.get(_),i===void 0){var N=a.get(_);if(N!==void 0){a.delete(_),b.set(_,N);var C=d?d.next:c;H(t,d,N),H(t,N,C),re(N,C,s),d=N}else{var z=c?c.e.nodes_start:s;d=ue(z,t,d,d===null?t.first:d.next,v,_,y,l,n,m)}b.set(_,d),M=[],w=[],c=d.next;continue}if(h&&De(i,v,y,n),(i.e.f&te)!==0&&(Ae(i.e),g&&(i.a?.unfix(),(p??=new Set).delete(i))),i!==c){if(u!==void 0&&u.has(i)){if(M.length<w.length){var E=w[0],I;d=E.prev;var O=M[0],k=M[M.length-1];for(I=0;I<M.length;I+=1)re(M[I],E,s);for(I=0;I<w.length;I+=1)u.delete(w[I]);H(t,O.prev,k.next),H(t,d,O),H(t,k,E),c=E,d=k,y-=1,M=[],w=[]}else u.delete(i),re(i,c,s),H(t,i.prev,i.next),H(t,i,d===null?t.first:d.next),H(t,d,i),d=i;continue}for(M=[],w=[];c!==null&&c.k!==_;)(c.e.f&te)===0&&(u??=new Set).add(c),w.push(c),c=c.next;if(c===null)continue;i=c}M.push(i),d=i,c=i.next}if(c!==null||u!==void 0){for(var L=u===void 0?[]:we(u);c!==null;)(c.e.f&te)===0&&L.push(c),c=c.next;var $=L.length;if($>0){var We=(n&Ee)!==0&&o===0?s:null;if(g){for(y=0;y<$;y+=1)L[y].a?.measure();for(y=0;y<$;y+=1)L[y].a?.fix()}_t(t,L,We)}}g&&at(()=>{if(p!==void 0)for(i of p)i.a?.apply()}),r.first=t.first&&t.first.e,r.last=d&&d.e;for(var Pe of a.values())Ie(Pe.e);a.clear()}function De(r,e,t,a){(a&B)!==0&&he(r.v,e),(a&Z)!==0?he(r.i,t):r.i=t}function ue(r,e,t,a,s,l,n,f,m,g,h){var o=(m&B)!==0,b=(m&Be)===0,x=o?b?Xe(s,!1,!1):ne(s):s,c=(m&Z)===0?n:ne(n),u={i:c,v:x,k:l,a:null,e:null,prev:t,next:a};try{if(r===null){var d=document.createDocumentFragment();d.append(r=xe())}return u.e=ie(()=>f(r,x,c,g),D),u.e.prev=t&&t.e,u.e.next=a&&a.e,t===null?h||(e.first=u):(t.next=u,t.e.next=u.e),a!==null&&(a.prev=u,a.e.prev=u.e),u}finally{}}function re(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,l=r.e.nodes_start;l!==null&&l!==a;){var n=Je(l);s.before(l),l=n}}function H(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const me=[...` 	
\r\fÂ \v\uFEFF`];function bt(r,e,t){var a=""+r;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var l=s.length,n=0;(n=a.indexOf(s,n))>=0;){var f=n+l;(n===0||me.includes(a[n-1]))&&(f===a.length||me.includes(a[f]))?a=(n===0?"":a.substring(0,n))+a.substring(f+1):n=f}}return a===""?null:a}function Mt(r,e){return r==null?null:String(r)}function xt(r,e,t,a,s,l){var n=r.__className;if(D||n!==t||n===void 0){var f=bt(t,a,l);(!D||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):r.className=f),r.__className=t}else if(l&&s!==l)for(var m in l){var g=!!l[m];(s==null||g!==!!s[m])&&r.classList.toggle(m,g)}return l}function ge(r,e,t,a){var s=r.__style;if(D||s!==e){var l=Mt(e);(!D||l!==r.getAttribute("style"))&&(l==null?r.removeAttribute("style"):r.style.cssText=l),r.__style=e}return a}function He(r,e,t=!1){if(r.multiple){if(e==null)return;if(!Se(e))return lt();for(var a of r.options)a.selected=e.includes(K(a));return}for(a of r.options){var s=K(a);if(ot(s,e)){a.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function wt(r){var e=new MutationObserver(()=>{He(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),nt(()=>{e.disconnect()})}function St(r,e,t=e){var a=new WeakSet,s=!0;st(r,"change",l=>{var n=l?"[selected]":":checked",f;if(r.multiple)f=[].map.call(r.querySelectorAll(n),K);else{var m=r.querySelector(n)??r.querySelector("option:not([disabled])");f=m&&K(m)}t(f),Q!==null&&a.add(Q)}),it(()=>{var l=e();if(r===document.activeElement){var n=ut??Q;if(a.has(n))return}if(He(r,l,s),s&&l===void 0){var f=r.querySelector(":checked");f!==null&&(l=K(f),t(l))}r.__value=l,s=!1}),wt(r)}function K(r){return"__value"in r?r.__value:r.value}var At=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],It=["difference","intersection","symmetricDifference","union"],_e=!1;class F extends Set{#a=new Map;#e=R(0);#t=R(0);#r=de||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}_e||this.#i()}#s(e){return de===this.#r?R(e):ne(e)}#i(){_e=!0;var e=F.prototype,t=Set.prototype;for(const a of At)e[a]=function(...s){return S(this.#e),t[a].apply(this,s)};for(const a of It)e[a]=function(...s){S(this.#e);var l=t[a].apply(this,s);return new F(l)}}has(e){var t=super.has(e),a=this.#a,s=a.get(e);if(s===void 0){if(!t)return S(this.#e),!1;s=this.#s(!0),a.set(e,s)}return S(s),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),ae(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,s=a.get(e);return s!==void 0&&(a.delete(e),T(s,!1)),t&&(T(this.#t,super.size),ae(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),ae(this.#e)}}keys(){return this.values()}values(){return S(this.#e),super.values()}entries(){return S(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return S(this.#t)}}class Et{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class Ce{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const s={value:e,priority:t,key:a};this.data.push(s);const l=this.data.length-1;this.indexMap.set(a,l),this.bubbleUp(l)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let s=e;t<this.data.length&&this.data[t].priority<this.data[s].priority&&(s=t),a<this.data.length&&this.data[a].priority<this.data[s].priority&&(s=a),s!==e&&(this.swap(e,s),this.minHeapify(s))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const a=this.data.length-1;if(t===a)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,a);const s=this.data.pop();this.indexMap.delete(s.key);const l=this.data[t],n=this.parent(t);return t>0&&this.data[n].priority>l.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const ze=function*(r,e,t,a,s){const l=new Ce,n=new Map,f=new Map,m=new Set,g=Array.from({length:a},(h,o)=>Array.from({length:t},(b,x)=>({x,y:o,isWall:s.has(A(x,o))}))).flat();for(const h of g){const o=h.x===r[0]&&h.y===r[1]?0:1/0,b=A(h.x,h.y);n.set(b,o),l.insert(h,o,b)}for(;!l.isEmpty();){const o=l.extractMin().value,b=A(o.x,o.y);if(m.has(b))continue;if(m.add(b),o.x===e[0]&&o.y===e[1])break;const x=n.get(b),c=[[o.x+1,o.y],[o.x-1,o.y],[o.x,o.y+1],[o.x,o.y-1]];for(const[u,d]of c){const p=g[u+d*t];if(p===void 0||p.isWall||u<0||d<0||u>=t||d>=a)continue;const M=A(p.x,p.y),w=x+1;w<n.get(M)&&(n.set(M,w),f.set(M,[o.x,o.y]),l.decreasePriority(M,w),yield ye(f,[p.x,p.y]))}}yield ye(f,e)};function ye(r,e){const t=[e];for(;r.has(A(e[0],e[1]));)e=r.get(A(e[0],e[1])),t.unshift(e);return t}function fe(r,e,t,a){const s=[],l=r,n=e;r=r%2===0?r+1:r,e=e%2===0?e+1:e;for(let u=0;u<e;u++)for(let d=0;d<r;d++)s.push({x:d,y:u,isWall:!0});const f=X(s,r,t[0],t[1]),m=se(f,r,e,s,2),g=new Et,h=new Set,o=X(s,r,a[0],a[1]),b=se(o,r,e,s,2);f.isWall=!1,o.isWall=!1,h.add(A(f.x,f.y));for(const u of[...m,...b])g.add(u.cell);for(;g.size>0;){const u=g.random(),d=se(u,r,e,s,2),p=d.filter(v=>h.has(A(v.cell.x,v.cell.y)));if(p.length===0){g.remove(u);continue}const M=p[Math.floor(Math.random()*p.length)],w=X(s,r,u.x+M.direction[0],u.y+M.direction[1]);h.add(A(u.x,u.y)),w.isWall=!1,u.isWall=!1,g.remove(u);for(const v of d)h.has(A(v.cell.x,v.cell.y))||g.add(v.cell)}const x=new F(s.filter(u=>u.isWall&&(u.x!==a[0]||u.y!==a[1])&&u.x<l&&u.y<n).map(u=>A(u.x,u.y)));return ze(t,a,l,n,x).length<=1?fe(l,n,t,a):x}function se(r,e,t,a,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:X(a,e,r.x+n[0]*s,r.y+n[1]*s),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function X(r,e,t,a){if(!(t<0||a<0))return r[t+e*a]}function A(r,e){return`${r},${e}`}var Nt=r=>{r.preventDefault()},Ot=J('<div role="cell" tabindex="-1"></div>'),Tt=J('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function kt(r,e){Ne(e,!0);let t=Y(e,"start",31,()=>P([0,0])),a=Y(e,"end",31,()=>P([e.width-1,e.height-1])),s=Y(e,"walls",27,()=>P(fe(e.width,e.height,t(),a()))),l=Y(e,"pathfindingAlgorithm",27,()=>P(Le)),n=!1,f=new Set,m="add",g=R(P([])),h=null,o=!1;function b(v=!1){if(o&&T(g,[],!0),v&&!o)return;o=!0;const _=l()(t(),a(),e.width,e.height,s());h!==null&&clearInterval(h),h=setInterval(()=>{const i=_.next();i.done?(clearInterval(h),h=null):T(g,i.value,!0)},5)}function x(v,_,i){o||(n=!0,i?m="remove":v===t()[0]&&_===t()[1]?m="movestart":v===a()[0]&&_===a()[1]?m="movegoal":m="add",c(v,_),f.add(A(v,_)))}function c(v,_){const i=A(v,_);if(!(o||!n||v===t()[0]&&_===t()[1]||v===a()[0]&&_===a()[1])){switch(m){case"add":{f.has(i)||s().add(i);break}case"remove":{f.has(i)||s().delete(i);break}case"movestart":{(v!==a()[0]||_!==a()[1])&&t([v,_]);break}case"movegoal":{(v!==t()[0]||_!==t()[1])&&a([v,_]);break}}f.add(i)}}function u(v,_){if(!o)switch(m){case"movestart":case"movegoal":{const i=A(v,_);s().delete(i)}}}function d(){o||(n=!1,f.clear())}vt(()=>{h!==null&&clearInterval(h)});var p={startVisualisation:b},M=Tt();pt("mouseup",Te,()=>{d()});var w=q(M);return oe(w,21,()=>({length:e.width}),pe,(v,_,i)=>{var y=ft(),N=ct(y);oe(N,17,()=>({length:e.height}),pe,(C,z,E)=>{var I=Ot();let O;ge(I,`grid-column-start: ${i+1}; grid-row-start: ${E+1};`),I.__mousedown=k=>{x(i,E,k.button===2)},I.__mousemove=()=>{c(i,E)},I.__mouseup=()=>{u(i,E)},I.__contextmenu=[Nt],le(k=>O=xt(I,1,"cell svelte-c024sg",null,O,k),[()=>({wall:s().has(A(i,E)),start:i===t()[0]&&E===t()[1],goal:i===a()[0]&&E===a()[1],path:S(g).some(k=>k[0]===i&&k[1]===E)})]),U(C,I)}),U(v,y)}),W(w),W(M),le(()=>ge(w,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),U(r,M),Oe(p)}ke(["mousedown","mousemove","mouseup","contextmenu"]);const Le=function*(r,e,t,a,s){const l=new Ce,n=new Map,f=new Map,m=new Map,g=Me(r,e),h=A(r[0],r[1]);l.insert(r,0+g,h);for(let o=0;o<t;o++)for(let b=0;b<a;b++){const x=A(o,b);f.set(x,1/0),m.set(x,1/0)}for(f.set(h,0),m.set(h,g);!l.isEmpty();){const o=l.extractMin().value;if(o[0]===e[0]&&o[1]===e[1]){yield be(n,o);return}const b=A(o[0],o[1]);l.delete(b);const x=[[o[0]+1,o[1]],[o[0]-1,o[1]],[o[0],o[1]+1],[o[0],o[1]-1]];for(const c of x){const[u,d]=c,p=A(u,d);if(u<0||d<0||u>=t||d>=a||s.has(p))continue;const w=f.get(b)+1;if(w<f.get(p)){const v=w+Me(c,e);n.set(p,o),f.set(p,w),m.set(p,v),l.has(p)||l.insert(c,v,p),yield be(n,c)}}}yield[r]};function be(r,e){const t=[e];for(;r.has(A(e[0],e[1]));)e=r.get(A(e[0],e[1])),t.unshift(e);return t}const Me=(r,e)=>Math.hypot(e[0]-r[0],e[1]-r[1]);var Dt=J("<option> </option>"),Ht=J('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select> <button>Start</button></div></main>');function Pt(r,e){Ne(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:ze},astar:{name:"A*",algorithm:Le}};let a=R(P(new F)),s=50,l=25,n=R(P([0,0])),f=R(P([49,24])),m,g=R("astar"),h=ve(()=>t[S(g)].algorithm);function o(){S(a).clear(),m.startVisualisation(!0)}function b(){T(a,fe(s,l,S(n),S(f)),!0),m.startVisualisation(!0)}var x=Ht();ht(i=>{Te.title="Pathfinder"});var c=G(q(x),2),u=q(c),d=q(u);gt(kt(d,{width:s,height:l,get start(){return S(n)},set start(i){T(n,i,!0)},get end(){return S(f)},set end(i){T(f,i,!0)},get walls(){return S(a)},set walls(i){T(a,i,!0)},get pathfindingAlgorithm(){return S(h)},set pathfindingAlgorithm(i){T(h,i)}}),i=>m=i,()=>m),W(u);var p=G(u,2),M=q(p);M.__click=o;var w=G(M,2);w.__click=b,W(p);var v=G(p,2);v.__change=()=>{m.startVisualisation(!0)},oe(v,21,()=>Object.entries(t),([i,y])=>i,(i,y,N,C)=>{var z=ve(()=>dt(S(y),2));let E=()=>S(z)[0],I=()=>S(z)[1];var O=Dt(),k=q(O,!0);W(O);var L={};le(()=>{mt(k,I().name),L!==(L=E())&&(O.value=(O.__value=E())??"")}),U(i,O)}),W(v);var _=G(v,2);_.__click=()=>{m.startVisualisation()},W(c),W(x),St(v,()=>S(g),i=>T(g,i)),U(r,x),Oe()}ke(["click","change"]);export{Pt as component};
