import"../chunks/DsnmJJEf.js";import{av as me,b as Ce,ae as Q,d as S,m as Ie,e as Te,z as A,F as ze,aK as De,a8 as ke,ag as le,aq as Z,l as H,a7 as He,ax as Le,j as ae,aN as We,aL as Re,a6 as oe,aQ as Ue,a3 as re,at as ge,r as Pe,aU as F,aO as _e,aa as qe,aV as V,aW as Ke,aX as G,k as ye,al as Ye,aY as Fe,as as Ve,aZ as Xe,v as Be,a_ as be,q as Qe,a$ as Ze,aR as W,b0 as ue,B as z,a5 as J,X as Me,Y as ie,Z as fe,a as K,_ as we,A as R,b1 as xe,$ as L,a0 as D,c as Ge,f as Je,aS as je,h as $e,a1 as j}from"../chunks/DGK4cZqc.js";import{d as Ee,e as et}from"../chunks/BqHANwwa.js";import{p as $}from"../chunks/BXa_KlwF.js";function ce(s,e){return e}function tt(s,e,t){for(var a=s.items,r=[],u=e.length,n=0;n<u;n++)Fe(e[n].e,r,!0);var h=u>0&&r.length===0&&t!==null;if(h){var _=t.parentNode;Ve(_),_.append(t),a.clear(),I(s,e[0].prev,e[u-1].next)}Xe(r,()=>{for(var p=0;p<u;p++){var m=e[p];h||(a.delete(m.k),I(s,m.prev,m.next)),ye(m.e,!h)}})}function he(s,e,t,a,r,u=null){var n=s,h={flags:e,items:new Map,first:null},_=(e&be)!==0;if(_){var p=s;n=S?Q(Ie(p)):p.appendChild(me())}S&&Te();var m=null,M=!1,g=new Map,d=ze(()=>{var c=t();return Pe(c)?c:c==null?[]:ge(c)}),o,i;function l(){at(i,o,h,g,n,r,e,a,t),u!==null&&(o.length===0?m?_e(m):m=ae(()=>u(n)):m!==null&&qe(m,()=>{m=null}))}Ce(()=>{i??=Be,o=A(d);var c=o.length;if(M&&c===0)return;M=c===0;let y=!1;if(S){var x=De(n)===ke;x!==(c===0)&&(n=le(),Q(n),Z(!1),y=!0)}if(S){for(var b=null,w,f=0;f<c;f++){if(H.nodeType===He&&H.data===Le){n=H,y=!0,Z(!1);break}var v=o[f],E=a(v,f);w=se(H,h,b,null,v,E,f,r,e,t),h.items.set(E,w),b=w}c>0&&Q(le())}if(S)c===0&&u&&(m=ae(()=>u(n)));else if(We()){var O=new Set,P=Re;for(f=0;f<c;f+=1){v=o[f],E=a(v,f);var T=h.items.get(E)??g.get(E);T?(e&(V|F))!==0&&Ae(T,v,f,e):(w=se(null,h,null,null,v,E,f,r,e,t,!0),g.set(E,w)),O.add(E)}for(const[C,q]of h.items)O.has(C)||P.skipped_effects.add(q.e);P.add_callback(l)}else l();y&&Z(!0),A(d)}),S&&(n=H)}function at(s,e,t,a,r,u,n,h,_){var p=(n&Ze)!==0,m=(n&(V|F))!==0,M=e.length,g=t.items,d=t.first,o=d,i,l=null,c,y=[],x=[],b,w,f,v;if(p)for(v=0;v<M;v+=1)b=e[v],w=h(b,v),f=g.get(w),f!==void 0&&(f.a?.measure(),(c??=new Set).add(f));for(v=0;v<M;v+=1){if(b=e[v],w=h(b,v),f=g.get(w),f===void 0){var E=a.get(w);if(E!==void 0){a.delete(w),g.set(w,E);var O=l?l.next:o;I(t,l,E),I(t,E,O),ee(E,O,r),l=E}else{var P=o?o.e.nodes_start:r;l=se(P,t,l,l===null?t.first:l.next,b,w,v,u,n,_)}g.set(w,l),y=[],x=[],o=l.next;continue}if(m&&Ae(f,b,v,n),(f.e.f&G)!==0&&(_e(f.e),p&&(f.a?.unfix(),(c??=new Set).delete(f))),f!==o){if(i!==void 0&&i.has(f)){if(y.length<x.length){var T=x[0],C;l=T.prev;var q=y[0],X=y[y.length-1];for(C=0;C<y.length;C+=1)ee(y[C],T,r);for(C=0;C<x.length;C+=1)i.delete(x[C]);I(t,q.prev,X.next),I(t,l,q),I(t,X,T),o=T,l=X,v-=1,y=[],x=[]}else i.delete(f),ee(f,o,r),I(t,f.prev,f.next),I(t,f,l===null?t.first:l.next),I(t,l,f),l=f;continue}for(y=[],x=[];o!==null&&o.k!==w;)(o.e.f&G)===0&&(i??=new Set).add(o),x.push(o),o=o.next;if(o===null)continue;f=o}y.push(f),l=f,o=f.next}if(o!==null||i!==void 0){for(var k=i===void 0?[]:ge(i);o!==null;)(o.e.f&G)===0&&k.push(o),o=o.next;var B=k.length;if(B>0){var Oe=(n&be)!==0&&M===0?r:null;if(p){for(v=0;v<B;v+=1)k[v].a?.measure();for(v=0;v<B;v+=1)k[v].a?.fix()}tt(t,k,Oe)}}p&&Qe(()=>{if(c!==void 0)for(f of c)f.a?.apply()}),s.first=t.first&&t.first.e,s.last=l&&l.e;for(var Se of a.values())ye(Se.e);a.clear()}function Ae(s,e,t,a){(a&V)!==0&&oe(s.v,e),(a&F)!==0?oe(s.i,t):s.i=t}function se(s,e,t,a,r,u,n,h,_,p,m){var M=(_&V)!==0,g=(_&Ke)===0,d=M?g?Ue(r,!1,!1):re(r):r,o=(_&F)===0?n:re(n),i={i:o,v:d,k:u,a:null,e:null,prev:t,next:a};try{if(s===null){var l=document.createDocumentFragment();l.append(s=me())}return i.e=ae(()=>h(s,d,o,p),S),i.e.prev=t&&t.e,i.e.next=a&&a.e,t===null?m||(e.first=i):(t.next=i,t.e.next=i.e),a!==null&&(a.prev=i,a.e.prev=i.e),i}finally{}}function ee(s,e,t){for(var a=s.next?s.next.e.nodes_start:t,r=e?e.e.nodes_start:t,u=s.e.nodes_start;u!==null&&u!==a;){var n=Ye(u);r.before(u),u=n}}function I(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const de=[...` 	
\r\fÂ \v\uFEFF`];function rt(s,e,t){var a=""+s;if(t){for(var r in t)if(t[r])a=a?a+" "+r:r;else if(a.length)for(var u=r.length,n=0;(n=a.indexOf(r,n))>=0;){var h=n+u;(n===0||de.includes(a[n-1]))&&(h===a.length||de.includes(a[h]))?a=(n===0?"":a.substring(0,n))+a.substring(h+1):n=h}}return a===""?null:a}function st(s,e){return s==null?null:String(s)}function it(s,e,t,a,r,u){var n=s.__className;if(S||n!==t||n===void 0){var h=rt(t,a,u);(!S||h!==s.getAttribute("class"))&&(h==null?s.removeAttribute("class"):s.className=h),s.__className=t}else if(u&&r!==u)for(var _ in u){var p=!!u[_];(r==null||p!==!!r[_])&&s.classList.toggle(_,p)}return u}function ve(s,e,t,a){var r=s.__style;if(S||r!==e){var u=st(e);(!S||u!==s.getAttribute("style"))&&(u==null?s.removeAttribute("style"):s.style.cssText=u),s.__style=e}return a}class nt{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const r={value:e,priority:t,key:a};this.data.push(r);const u=this.data.length-1;this.indexMap.set(a,u),this.bubbleUp(u)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let r=e;t<this.data.length&&this.data[t].priority<this.data[r].priority&&(r=t),a<this.data.length&&this.data[a].priority<this.data[r].priority&&(r=a),r!==e&&(this.swap(e,r),this.minHeapify(r))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Ne=(s,e,t,a,r)=>{const u=[],n=new nt,h=new Map,_=new Map,p=new Set,m=Array.from({length:a},(g,d)=>Array.from({length:t},(o,i)=>({x:i,y:d,isWall:r.has(N(i,d))}))).flat();for(const g of m){const d=g.x===s[0]&&g.y===s[1]?0:1/0,o=N(g.x,g.y);h.set(o,d),_.set(o,null),n.insert(g,d,o)}for(;!n.isEmpty();){const d=n.extractMin().value,o=N(d.x,d.y);if(p.has(o))continue;if(p.add(o),d.x===e[0]&&d.y===e[1])break;const i=h.get(o),l=[[d.x+1,d.y],[d.x-1,d.y],[d.x,d.y+1],[d.x,d.y-1]];for(const[c,y]of l){const x=m[c+y*t];if(x===void 0||x.isWall||c<0||y<0||c>=t||y>=a)continue;const b=N(x.x,x.y),w=i+1;w<h.get(b)&&(h.set(b,w),_.set(b,o),n.decreasePriority(b,w))}}let M=N(m[e[0]+t*e[1]].x,m[e[0]+t*e[1]].y);for(;M;){const[g,d]=M.split(",").map(i=>parseInt(i));u.unshift([g,d]);const o=_.get(M);if(!o)break;M=o}return u};var lt=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ot=["difference","intersection","symmetricDifference","union"],pe=!1;class U extends Set{#a=new Map;#e=W(0);#t=W(0);#r=ue||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}pe||this.#i()}#s(e){return ue===this.#r?W(e):re(e)}#i(){pe=!0;var e=U.prototype,t=Set.prototype;for(const a of lt)e[a]=function(...r){return A(this.#e),t[a].apply(this,r)};for(const a of ot)e[a]=function(...r){A(this.#e);var u=t[a].apply(this,r);return new U(u)}}has(e){var t=super.has(e),a=this.#a,r=a.get(e);if(r===void 0){if(!t)return A(this.#e),!1;r=this.#s(!0),a.set(e,r)}return A(r),t}add(e){return super.has(e)||(super.add(e),z(this.#t,super.size),J(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,r=a.get(e);return r!==void 0&&(a.delete(e),z(r,!1)),t&&(z(this.#t,super.size),J(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())z(t,!1);e.clear(),z(this.#t,0),J(this.#e)}}keys(){return this.values()}values(){return A(this.#e),super.values()}entries(){return A(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return A(this.#t)}}class ut{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ne(s,e,t,a){const r=[],u=s,n=e;s=s%2===0?s+1:s,e=e%2===0?e+1:e;for(let i=0;i<e;i++)for(let l=0;l<s;l++)r.push({x:l,y:i,isWall:!0});const h=Y(r,s,t[0],t[1]),_=te(h,s,e,r,2),p=new ut,m=new Set,M=Y(r,s,a[0],a[1]),g=te(M,s,e,r,2);h.isWall=!1,M.isWall=!1,m.add(N(h.x,h.y));for(const i of[..._,...g])p.add(i.cell);for(;p.size>0;){const i=p.random(),l=te(i,s,e,r,2),c=l.filter(b=>m.has(N(b.cell.x,b.cell.y)));if(c.length===0){p.remove(i);continue}const y=c[Math.floor(Math.random()*c.length)],x=Y(r,s,i.x+y.direction[0],i.y+y.direction[1]);m.add(N(i.x,i.y)),x.isWall=!1,i.isWall=!1,p.remove(i);for(const b of l)m.has(N(b.cell.x,b.cell.y))||p.add(b.cell)}const d=new U(r.filter(i=>i.isWall&&(i.x!==a[0]||i.y!==a[1])&&i.x<u&&i.y<n).map(i=>N(i.x,i.y)));return Ne(t,a,u,n,d).length<=1?ne(u,n,t,a):d}function te(s,e,t,a,r=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:Y(a,e,s.x+n[0]*r,s.y+n[1]*r),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function Y(s,e,t,a){if(!(t<0||a<0))return s[t+e*a]}function N(s,e){return`${s},${e}`}var ft=s=>{s.preventDefault()},ct=ie('<div role="cell" tabindex="-1"></div>'),ht=ie('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function dt(s,e){Me(e,!0);let t=$(e,"start",31,()=>R([0,0])),a=$(e,"end",31,()=>R([e.width-1,e.height-1])),r=$(e,"walls",27,()=>R(ne(e.width,e.height,t(),a()))),u=!1,n=new Set,h="add",_=je(()=>Ne(t(),a(),e.width,e.height,r()));function p(i,l,c){u=!0,c?h="remove":i===t()[0]&&l===t()[1]?h="movestart":i===a()[0]&&l===a()[1]?h="movegoal":h="add",m(i,l),n.add(N(i,l))}function m(i,l){const c=N(i,l);if(!(!u||i===t()[0]&&l===t()[1]||i===a()[0]&&l===a()[1])){switch(h){case"add":{n.has(c)||r().add(c);break}case"remove":{n.has(c)||r().delete(c);break}case"movestart":{(i!==a()[0]||l!==a()[1])&&t([i,l]);break}case"movegoal":{(i!==t()[0]||l!==t()[1])&&a([i,l]);break}}n.add(c)}}function M(i,l){switch(h){case"movestart":case"movegoal":{const c=N(i,l);r().delete(c)}}}function g(){u=!1,n.clear()}var d=ht();et("mouseup",xe,()=>{g()});var o=L(d);he(o,21,()=>({length:e.width}),ce,(i,l,c)=>{var y=Ge(),x=Je(y);he(x,17,()=>({length:e.height}),ce,(b,w,f)=>{var v=ct();let E;ve(v,`grid-column-start: ${c+1}; grid-row-start: ${f+1};`),v.__mousedown=O=>{p(c,f,O.button===2)},v.__mousemove=()=>{m(c,f)},v.__mouseup=()=>{M(c,f)},v.__contextmenu=[ft],fe(O=>E=it(v,1,"cell svelte-c024sg",null,E,O),[()=>({wall:r().has(N(c,f)),start:c===t()[0]&&f===t()[1],goal:c===a()[0]&&f===a()[1],path:A(_).some(O=>O[0]===c&&O[1]===f)})]),K(b,v)}),K(i,y)}),D(o),D(d),fe(()=>ve(o,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),K(s,d),we()}Ee(["mousedown","mousemove","mouseup","contextmenu"]);var vt=ie('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div></div></main>');function yt(s,e){Me(e,!0);let t=new U,a=50,r=25,u=W(R([0,0])),n=W(R([49,24]));function h(){t.clear()}function _(){t=ne(a,r,A(u),A(n))}var p=vt();$e(l=>{xe.title="Pathfinder"});var m=j(L(p),2),M=L(m),g=L(M);dt(g,{width:a,height:r,get start(){return A(u)},set start(l){z(u,l,!0)},get end(){return A(n)},set end(l){z(n,l,!0)},get walls(){return t},set walls(l){t=l}}),D(M);var d=j(M,2),o=L(d);o.__click=h;var i=j(o,2);i.__click=_,D(d),D(m),D(p),K(s,p),we()}Ee(["click"]);export{yt as component};
