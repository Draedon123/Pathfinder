import"../chunks/DsnmJJEf.js";import{av as ge,b as Ce,ae as Q,d as N,m as Te,e as ze,z as A,F as De,aK as ke,a8 as He,ag as le,aq as Z,l as R,a7 as Le,ax as We,j as ae,aN as Re,aL as Ue,a6 as oe,aQ as Ke,a3 as re,at as _e,r as Pe,aU as F,aO as ye,aa as qe,aV as V,aW as Ge,aX as J,k as be,al as Ye,aY as Fe,as as Ve,aZ as Xe,v as Be,a_ as Me,q as Qe,a$ as Ze,aR as H,b0 as ue,B as T,a5 as j,X as xe,Y as ne,Z as fe,a as G,_ as we,A as L,b1 as Ee,$ as U,a0 as k,c as Je,f as je,aS as $e,h as et,a1 as $}from"../chunks/DGK4cZqc.js";import{d as Se,e as tt}from"../chunks/BqHANwwa.js";import{p as q}from"../chunks/BXa_KlwF.js";function ce(r,e){return e}function at(r,e,t){for(var a=r.items,s=[],i=e.length,n=0;n<i;n++)Fe(e[n].e,s,!0);var f=i>0&&s.length===0&&t!==null;if(f){var _=t.parentNode;Ve(_),_.append(t),a.clear(),C(r,e[0].prev,e[i-1].next)}Xe(s,()=>{for(var g=0;g<i;g++){var y=e[g];f||(a.delete(y.k),C(r,y.prev,y.next)),be(y.e,!f)}})}function he(r,e,t,a,s,i=null){var n=r,f={flags:e,items:new Map,first:null},_=(e&Me)!==0;if(_){var g=r;n=N?Q(Te(g)):g.appendChild(ge())}N&&ze();var y=null,h=!1,b=new Map,v=De(()=>{var c=t();return Pe(c)?c:c==null?[]:_e(c)}),l,o;function u(){rt(o,l,f,b,n,s,e,a,t),i!==null&&(l.length===0?y?ye(y):y=ae(()=>i(n)):y!==null&&qe(y,()=>{y=null}))}Ce(()=>{o??=Be,l=A(v);var c=l.length;if(h&&c===0)return;h=c===0;let d=!1;if(N){var x=ke(n)===He;x!==(c===0)&&(n=le(),Q(n),Z(!1),d=!0)}if(N){for(var M=null,E,p=0;p<c;p++){if(R.nodeType===Le&&R.data===We){n=R,d=!0,Z(!1);break}var m=l[p],w=a(m,p);E=se(R,f,M,null,m,w,p,s,e,t),f.items.set(w,E),M=E}c>0&&Q(le())}if(N)c===0&&i&&(y=ae(()=>i(n)));else if(Re()){var z=new Set,I=Ue;for(p=0;p<c;p+=1){m=l[p],w=a(m,p);var D=f.items.get(w)??b.get(w);D?(e&(V|F))!==0&&Ae(D,m,p,e):(E=se(null,f,null,null,m,w,p,s,e,t,!0),b.set(w,E)),z.add(w)}for(const[O,P]of f.items)z.has(O)||I.skipped_effects.add(P.e);I.add_callback(u)}else u();d&&Z(!0),A(v)}),N&&(n=R)}function rt(r,e,t,a,s,i,n,f,_){var g=(n&Ze)!==0,y=(n&(V|F))!==0,h=e.length,b=t.items,v=t.first,l=v,o,u=null,c,d=[],x=[],M,E,p,m;if(g)for(m=0;m<h;m+=1)M=e[m],E=f(M,m),p=b.get(E),p!==void 0&&(p.a?.measure(),(c??=new Set).add(p));for(m=0;m<h;m+=1){if(M=e[m],E=f(M,m),p=b.get(E),p===void 0){var w=a.get(E);if(w!==void 0){a.delete(E),b.set(E,w);var z=u?u.next:l;C(t,u,w),C(t,w,z),ee(w,z,s),u=w}else{var I=l?l.e.nodes_start:s;u=se(I,t,u,u===null?t.first:u.next,M,E,m,i,n,_)}b.set(E,u),d=[],x=[],l=u.next;continue}if(y&&Ae(p,M,m,n),(p.e.f&J)!==0&&(ye(p.e),g&&(p.a?.unfix(),(c??=new Set).delete(p))),p!==l){if(o!==void 0&&o.has(p)){if(d.length<x.length){var D=x[0],O;u=D.prev;var P=d[0],X=d[d.length-1];for(O=0;O<d.length;O+=1)ee(d[O],D,s);for(O=0;O<x.length;O+=1)o.delete(x[O]);C(t,P.prev,X.next),C(t,u,P),C(t,X,D),l=D,u=X,m-=1,d=[],x=[]}else o.delete(p),ee(p,l,s),C(t,p.prev,p.next),C(t,p,u===null?t.first:u.next),C(t,u,p),u=p;continue}for(d=[],x=[];l!==null&&l.k!==E;)(l.e.f&J)===0&&(o??=new Set).add(l),x.push(l),l=l.next;if(l===null)continue;p=l}d.push(p),u=p,l=p.next}if(l!==null||o!==void 0){for(var W=o===void 0?[]:_e(o);l!==null;)(l.e.f&J)===0&&W.push(l),l=l.next;var B=W.length;if(B>0){var Ne=(n&Me)!==0&&h===0?s:null;if(g){for(m=0;m<B;m+=1)W[m].a?.measure();for(m=0;m<B;m+=1)W[m].a?.fix()}at(t,W,Ne)}}g&&Qe(()=>{if(c!==void 0)for(p of c)p.a?.apply()}),r.first=t.first&&t.first.e,r.last=u&&u.e;for(var Oe of a.values())be(Oe.e);a.clear()}function Ae(r,e,t,a){(a&V)!==0&&oe(r.v,e),(a&F)!==0?oe(r.i,t):r.i=t}function se(r,e,t,a,s,i,n,f,_,g,y){var h=(_&V)!==0,b=(_&Ge)===0,v=h?b?Ke(s,!1,!1):re(s):s,l=(_&F)===0?n:re(n),o={i:l,v,k:i,a:null,e:null,prev:t,next:a};try{if(r===null){var u=document.createDocumentFragment();u.append(r=ge())}return o.e=ae(()=>f(r,v,l,g),N),o.e.prev=t&&t.e,o.e.next=a&&a.e,t===null?y||(e.first=o):(t.next=o,t.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function ee(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,i=r.e.nodes_start;i!==null&&i!==a;){var n=Ye(i);s.before(i),i=n}}function C(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const de=[...` 	
\r\fÂ \v\uFEFF`];function st(r,e,t){var a=""+r;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var i=s.length,n=0;(n=a.indexOf(s,n))>=0;){var f=n+i;(n===0||de.includes(a[n-1]))&&(f===a.length||de.includes(a[f]))?a=(n===0?"":a.substring(0,n))+a.substring(f+1):n=f}}return a===""?null:a}function nt(r,e){return r==null?null:String(r)}function it(r,e,t,a,s,i){var n=r.__className;if(N||n!==t||n===void 0){var f=st(t,a,i);(!N||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):r.className=f),r.__className=t}else if(i&&s!==i)for(var _ in i){var g=!!i[_];(s==null||g!==!!s[_])&&r.classList.toggle(_,g)}return i}function ve(r,e,t,a){var s=r.__style;if(N||s!==e){var i=nt(e);(!N||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=e}return a}class Ie{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const s={value:e,priority:t,key:a};this.data.push(s);const i=this.data.length-1;this.indexMap.set(a,i),this.bubbleUp(i)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let s=e;t<this.data.length&&this.data[t].priority<this.data[s].priority&&(s=t),a<this.data.length&&this.data[a].priority<this.data[s].priority&&(s=a),s!==e&&(this.swap(e,s),this.minHeapify(s))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const a=this.data.length-1;if(t===a)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,a);const s=this.data.pop();this.indexMap.delete(s.key);const i=this.data[t],n=this.parent(t);return t>0&&this.data[n].priority>i.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const lt=(r,e,t,a,s)=>{const i=new Ie,n=new Map,f=new Map,_=new Map,g=pe(r,e),y=S(r[0],r[1]);i.insert(r,0+g,y);for(let h=0;h<t;h++)for(let b=0;b<a;b++){const v=S(h,b);f.set(v,1/0),_.set(v,1/0)}for(f.set(y,0),_.set(y,g);!i.isEmpty();){const h=i.extractMin().value;if(h[0]===e[0]&&h[1]===e[1])return ot(n,h);const b=S(h[0],h[1]);i.delete(b);const v=[[h[0]+1,h[1]],[h[0]-1,h[1]],[h[0],h[1]+1],[h[0],h[1]-1]];for(const l of v){const[o,u]=l,c=S(o,u);if(o<0||u<0||o>=t||u>=a||s.has(c))continue;const x=f.get(b)+1;if(x<f.get(c)){const M=x+pe(l,e);n.set(c,h),f.set(c,x),_.set(c,M),i.has(c)||i.insert(l,M,c)}}}return[r]};function ot(r,e){const t=[e];for(;r.has(S(e[0],e[1]));)e=r.get(S(e[0],e[1])),t.unshift(e);return t}const pe=(r,e)=>Math.hypot(e[0]-r[0],e[1]-r[1]),ut=(r,e,t,a,s)=>{const i=[],n=new Ie,f=new Map,_=new Map,g=new Set,y=Array.from({length:a},(b,v)=>Array.from({length:t},(l,o)=>({x:o,y:v,isWall:s.has(S(o,v))}))).flat();for(const b of y){const v=b.x===r[0]&&b.y===r[1]?0:1/0,l=S(b.x,b.y);f.set(l,v),_.set(l,null),n.insert(b,v,l)}for(;!n.isEmpty();){const v=n.extractMin().value,l=S(v.x,v.y);if(g.has(l))continue;if(g.add(l),v.x===e[0]&&v.y===e[1])break;const o=f.get(l),u=[[v.x+1,v.y],[v.x-1,v.y],[v.x,v.y+1],[v.x,v.y-1]];for(const[c,d]of u){const x=y[c+d*t];if(x===void 0||x.isWall||c<0||d<0||c>=t||d>=a)continue;const M=S(x.x,x.y),E=o+1;E<f.get(M)&&(f.set(M,E),_.set(M,l),n.decreasePriority(M,E))}}let h=S(y[e[0]+t*e[1]].x,y[e[0]+t*e[1]].y);for(;h;){const[b,v]=h.split(",").map(o=>parseInt(o));i.unshift([b,v]);const l=_.get(h);if(!l)break;h=l}return i};var ft=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ct=["difference","intersection","symmetricDifference","union"],me=!1;class K extends Set{#a=new Map;#e=H(0);#t=H(0);#r=ue||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}me||this.#n()}#s(e){return ue===this.#r?H(e):re(e)}#n(){me=!0;var e=K.prototype,t=Set.prototype;for(const a of ft)e[a]=function(...s){return A(this.#e),t[a].apply(this,s)};for(const a of ct)e[a]=function(...s){A(this.#e);var i=t[a].apply(this,s);return new K(i)}}has(e){var t=super.has(e),a=this.#a,s=a.get(e);if(s===void 0){if(!t)return A(this.#e),!1;s=this.#s(!0),a.set(e,s)}return A(s),t}add(e){return super.has(e)||(super.add(e),T(this.#t,super.size),j(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,s=a.get(e);return s!==void 0&&(a.delete(e),T(s,!1)),t&&(T(this.#t,super.size),j(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())T(t,!1);e.clear(),T(this.#t,0),j(this.#e)}}keys(){return this.values()}values(){return A(this.#e),super.values()}entries(){return A(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return A(this.#t)}}class ht{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ie(r,e,t,a){const s=[],i=r,n=e;r=r%2===0?r+1:r,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let u=0;u<r;u++)s.push({x:u,y:o,isWall:!0});const f=Y(s,r,t[0],t[1]),_=te(f,r,e,s,2),g=new ht,y=new Set,h=Y(s,r,a[0],a[1]),b=te(h,r,e,s,2);f.isWall=!1,h.isWall=!1,y.add(S(f.x,f.y));for(const o of[..._,...b])g.add(o.cell);for(;g.size>0;){const o=g.random(),u=te(o,r,e,s,2),c=u.filter(M=>y.has(S(M.cell.x,M.cell.y)));if(c.length===0){g.remove(o);continue}const d=c[Math.floor(Math.random()*c.length)],x=Y(s,r,o.x+d.direction[0],o.y+d.direction[1]);y.add(S(o.x,o.y)),x.isWall=!1,o.isWall=!1,g.remove(o);for(const M of u)y.has(S(M.cell.x,M.cell.y))||g.add(M.cell)}const v=new K(s.filter(o=>o.isWall&&(o.x!==a[0]||o.y!==a[1])&&o.x<i&&o.y<n).map(o=>S(o.x,o.y)));return ut(t,a,i,n,v).length<=1?ie(i,n,t,a):v}function te(r,e,t,a,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:Y(a,e,r.x+n[0]*s,r.y+n[1]*s),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function Y(r,e,t,a){if(!(t<0||a<0))return r[t+e*a]}function S(r,e){return`${r},${e}`}var dt=r=>{r.preventDefault()},vt=ne('<div role="cell" tabindex="-1"></div>'),pt=ne('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function mt(r,e){xe(e,!0);let t=q(e,"start",31,()=>L([0,0])),a=q(e,"end",31,()=>L([e.width-1,e.height-1])),s=q(e,"walls",27,()=>L(ie(e.width,e.height,t(),a()))),i=q(e,"pathfindingAlgorithm",3,lt),n=!1,f=new Set,_="add",g=$e(()=>i()(t(),a(),e.width,e.height,s()));function y(u,c,d){n=!0,d?_="remove":u===t()[0]&&c===t()[1]?_="movestart":u===a()[0]&&c===a()[1]?_="movegoal":_="add",h(u,c),f.add(S(u,c))}function h(u,c){const d=S(u,c);if(!(!n||u===t()[0]&&c===t()[1]||u===a()[0]&&c===a()[1])){switch(_){case"add":{f.has(d)||s().add(d);break}case"remove":{f.has(d)||s().delete(d);break}case"movestart":{(u!==a()[0]||c!==a()[1])&&t([u,c]);break}case"movegoal":{(u!==t()[0]||c!==t()[1])&&a([u,c]);break}}f.add(d)}}function b(u,c){switch(_){case"movestart":case"movegoal":{const d=S(u,c);s().delete(d)}}}function v(){n=!1,f.clear()}var l=pt();tt("mouseup",Ee,()=>{v()});var o=U(l);he(o,21,()=>({length:e.width}),ce,(u,c,d)=>{var x=Je(),M=je(x);he(M,17,()=>({length:e.height}),ce,(E,p,m)=>{var w=vt();let z;ve(w,`grid-column-start: ${d+1}; grid-row-start: ${m+1};`),w.__mousedown=I=>{y(d,m,I.button===2)},w.__mousemove=()=>{h(d,m)},w.__mouseup=()=>{b(d,m)},w.__contextmenu=[dt],fe(I=>z=it(w,1,"cell svelte-c024sg",null,z,I),[()=>({wall:s().has(S(d,m)),start:d===t()[0]&&m===t()[1],goal:d===a()[0]&&m===a()[1],path:A(g).some(I=>I[0]===d&&I[1]===m)})]),G(E,w)}),G(u,x)}),k(o),k(l),fe(()=>ve(o,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),G(r,l),we()}Se(["mousedown","mousemove","mouseup","contextmenu"]);function gt(r,e){A(e).clear()}function _t(r,e,t,a,s,i){T(e,ie(t,a,A(s),A(i)),!0)}var yt=ne('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div></div></main>');function Et(r,e){xe(e,!0);let t=H(L(new K)),a=50,s=25,i=H(L([0,0])),n=H(L([49,24]));var f=yt();et(l=>{Ee.title="Pathfinder"});var _=$(U(f),2),g=U(_),y=U(g);mt(y,{width:a,height:s,get start(){return A(i)},set start(l){T(i,l,!0)},get end(){return A(n)},set end(l){T(n,l,!0)},get walls(){return A(t)},set walls(l){T(t,l,!0)}}),k(g);var h=$(g,2),b=U(h);b.__click=[gt,t];var v=$(b,2);v.__click=[_t,t,a,s,i,n],k(h),k(_),k(f),G(r,f),we()}Se(["click"]);export{Et as component};
