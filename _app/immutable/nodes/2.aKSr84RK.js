import"../chunks/DsnmJJEf.js";import{aG as be,w as We,an as $,x as O,G as Re,y as Pe,J as S,Q as qe,aK as Ge,af as Ke,ap as he,aB as ee,F as P,ae as Ue,aI as Fe,C as ie,aN as Be,aL as Q,ad as de,aQ as Qe,a9 as ne,aE as Me,i as xe,aU as Y,aO as we,ah as Ve,aV as X,aW as Ye,aX as te,D as Ae,au as Xe,aY as Je,aD as Ze,aZ as je,M as $e,a_ as Se,ac as et,a$ as tt,b0 as at,aP as rt,B as st,b1 as it,b2 as nt,b3 as lt,aR as z,b4 as ve,L as C,ab as ae,a1 as Ee,a2 as J,a3 as le,a as q,a4 as Ie,K as W,b5 as Ne,a5 as L,a6 as H,c as ot,f as ut,aS as oe,h as ft,a7 as F,b6 as ct}from"../chunks/DUfXUGjj.js";import{d as Oe,e as ht,s as dt}from"../chunks/DFWED9ty.js";import{p as B}from"../chunks/D6GcIwcf.js";function pe(r,e){return e}function vt(r,e,t){for(var a=r.items,s=[],n=e.length,i=0;i<n;i++)Je(e[i].e,s,!0);var u=n>0&&s.length===0&&t!==null;if(u){var g=t.parentNode;Ze(g),g.append(t),a.clear(),T(r,e[0].prev,e[n-1].next)}je(s,()=>{for(var b=0;b<n;b++){var _=e[b];u||(a.delete(_.k),T(r,_.prev,_.next)),Ae(_.e,!u)}})}function ue(r,e,t,a,s,n=null){var i=r,u={flags:e,items:new Map,first:null},g=(e&Se)!==0;if(g){var b=r;i=O?$(Re(b)):b.appendChild(be())}O&&Pe();var _=null,v=!1,y=new Map,m=qe(()=>{var h=t();return xe(h)?h:h==null?[]:Me(h)}),o,l;function f(){pt(l,o,u,y,i,s,e,a,t),n!==null&&(o.length===0?_?we(_):_=ie(()=>n(i)):_!==null&&Ve(_,()=>{_=null}))}We(()=>{l??=$e,o=S(m);var h=o.length;if(v&&h===0)return;v=h===0;let c=!1;if(O){var M=Ge(i)===Ke;M!==(h===0)&&(i=he(),$(i),ee(!1),c=!0)}if(O){for(var x=null,A,d=0;d<h;d++){if(P.nodeType===Ue&&P.data===Fe){i=P,c=!0,ee(!1);break}var p=o[d],w=a(p,d);A=fe(P,u,x,null,p,w,d,s,e,t),u.items.set(w,A),x=A}h>0&&$(he())}if(O)h===0&&n&&(_=ie(()=>n(i)));else if(Be()){var I=new Set,N=Q;for(d=0;d<h;d+=1){p=o[d],w=a(p,d);var D=u.items.get(w)??y.get(w);D?(e&(X|Y))!==0&&De(D,p,d,e):(A=fe(null,u,null,null,p,w,d,s,e,t,!0),y.set(w,A)),I.add(w)}for(const[k,U]of u.items)I.has(k)||N.skipped_effects.add(U.e);N.add_callback(f)}else f();c&&ee(!0),S(m)}),O&&(i=P)}function pt(r,e,t,a,s,n,i,u,g){var b=(i&tt)!==0,_=(i&(X|Y))!==0,v=e.length,y=t.items,m=t.first,o=m,l,f=null,h,c=[],M=[],x,A,d,p;if(b)for(p=0;p<v;p+=1)x=e[p],A=u(x,p),d=y.get(A),d!==void 0&&(d.a?.measure(),(h??=new Set).add(d));for(p=0;p<v;p+=1){if(x=e[p],A=u(x,p),d=y.get(A),d===void 0){var w=a.get(A);if(w!==void 0){a.delete(A),y.set(A,w);var I=f?f.next:o;T(t,f,w),T(t,w,I),re(w,I,s),f=w}else{var N=o?o.e.nodes_start:s;f=fe(N,t,f,f===null?t.first:f.next,x,A,p,n,i,g)}y.set(A,f),c=[],M=[],o=f.next;continue}if(_&&De(d,x,p,i),(d.e.f&te)!==0&&(we(d.e),b&&(d.a?.unfix(),(h??=new Set).delete(d))),d!==o){if(l!==void 0&&l.has(d)){if(c.length<M.length){var D=M[0],k;f=D.prev;var U=c[0],Z=c[c.length-1];for(k=0;k<c.length;k+=1)re(c[k],D,s);for(k=0;k<M.length;k+=1)l.delete(M[k]);T(t,U.prev,Z.next),T(t,f,U),T(t,Z,D),o=D,f=Z,p-=1,c=[],M=[]}else l.delete(d),re(d,o,s),T(t,d.prev,d.next),T(t,d,f===null?t.first:f.next),T(t,f,d),f=d;continue}for(c=[],M=[];o!==null&&o.k!==A;)(o.e.f&te)===0&&(l??=new Set).add(o),M.push(o),o=o.next;if(o===null)continue;d=o}c.push(d),f=d,o=d.next}if(o!==null||l!==void 0){for(var R=l===void 0?[]:Me(l);o!==null;)(o.e.f&te)===0&&R.push(o),o=o.next;var j=R.length;if(j>0){var ze=(i&Se)!==0&&v===0?s:null;if(b){for(p=0;p<j;p+=1)R[p].a?.measure();for(p=0;p<j;p+=1)R[p].a?.fix()}vt(t,R,ze)}}b&&et(()=>{if(h!==void 0)for(d of h)d.a?.apply()}),r.first=t.first&&t.first.e,r.last=f&&f.e;for(var Le of a.values())Ae(Le.e);a.clear()}function De(r,e,t,a){(a&X)!==0&&de(r.v,e),(a&Y)!==0?de(r.i,t):r.i=t}function fe(r,e,t,a,s,n,i,u,g,b,_){var v=(g&X)!==0,y=(g&Ye)===0,m=v?y?Qe(s,!1,!1):ne(s):s,o=(g&Y)===0?i:ne(i),l={i:o,v:m,k:n,a:null,e:null,prev:t,next:a};try{if(r===null){var f=document.createDocumentFragment();f.append(r=be())}return l.e=ie(()=>u(r,m,o,b),O),l.e.prev=t&&t.e,l.e.next=a&&a.e,t===null?_||(e.first=l):(t.next=l,t.e.next=l.e),a!==null&&(a.prev=l,a.e.prev=l.e),l}finally{}}function re(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,n=r.e.nodes_start;n!==null&&n!==a;){var i=Xe(n);s.before(n),n=i}}function T(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const me=[...` 	
\r\fÂ \v\uFEFF`];function mt(r,e,t){var a=""+r;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var n=s.length,i=0;(i=a.indexOf(s,i))>=0;){var u=i+n;(i===0||me.includes(a[i-1]))&&(u===a.length||me.includes(a[u]))?a=(i===0?"":a.substring(0,i))+a.substring(u+1):i=u}}return a===""?null:a}function gt(r,e){return r==null?null:String(r)}function _t(r,e,t,a,s,n){var i=r.__className;if(O||i!==t||i===void 0){var u=mt(t,a,n);(!O||u!==r.getAttribute("class"))&&(u==null?r.removeAttribute("class"):r.className=u),r.__className=t}else if(n&&s!==n)for(var g in n){var b=!!n[g];(s==null||b!==!!s[g])&&r.classList.toggle(g,b)}return n}function ge(r,e,t,a){var s=r.__style;if(O||s!==e){var n=gt(e);(!O||n!==r.getAttribute("style"))&&(n==null?r.removeAttribute("style"):r.style.cssText=n),r.__style=e}return a}function ke(r,e,t=!1){if(r.multiple){if(e==null)return;if(!xe(e))return it();for(var a of r.options)a.selected=e.includes(G(a));return}for(a of r.options){var s=G(a);if(nt(s,e)){a.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function yt(r){var e=new MutationObserver(()=>{ke(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),st(()=>{e.disconnect()})}function bt(r,e,t=e){var a=new WeakSet,s=!0;at(r,"change",n=>{var i=n?"[selected]":":checked",u;if(r.multiple)u=[].map.call(r.querySelectorAll(i),G);else{var g=r.querySelector(i)??r.querySelector("option:not([disabled])");u=g&&G(g)}t(u),Q!==null&&a.add(Q)}),rt(()=>{var n=e();if(r===document.activeElement){var i=lt??Q;if(a.has(i))return}if(ke(r,n,s),s&&n===void 0){var u=r.querySelector(":checked");u!==null&&(n=G(u),t(n))}r.__value=n,s=!1}),yt(r)}function G(r){return"__value"in r?r.__value:r.value}function Mt(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}var xt=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],wt=["difference","intersection","symmetricDifference","union"],_e=!1;class K extends Set{#a=new Map;#e=z(0);#t=z(0);#r=ve||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}_e||this.#i()}#s(e){return ve===this.#r?z(e):ne(e)}#i(){_e=!0;var e=K.prototype,t=Set.prototype;for(const a of xt)e[a]=function(...s){return S(this.#e),t[a].apply(this,s)};for(const a of wt)e[a]=function(...s){S(this.#e);var n=t[a].apply(this,s);return new K(n)}}has(e){var t=super.has(e),a=this.#a,s=a.get(e);if(s===void 0){if(!t)return S(this.#e),!1;s=this.#s(!0),a.set(e,s)}return S(s),t}add(e){return super.has(e)||(super.add(e),C(this.#t,super.size),ae(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,s=a.get(e);return s!==void 0&&(a.delete(e),C(s,!1)),t&&(C(this.#t,super.size),ae(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())C(t,!1);e.clear(),C(this.#t,0),ae(this.#e)}}keys(){return this.values()}values(){return S(this.#e),super.values()}entries(){return S(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return S(this.#t)}}class At{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class Te{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const s={value:e,priority:t,key:a};this.data.push(s);const n=this.data.length-1;this.indexMap.set(a,n),this.bubbleUp(n)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let s=e;t<this.data.length&&this.data[t].priority<this.data[s].priority&&(s=t),a<this.data.length&&this.data[a].priority<this.data[s].priority&&(s=a),s!==e&&(this.swap(e,s),this.minHeapify(s))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const a=this.data.length-1;if(t===a)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,a);const s=this.data.pop();this.indexMap.delete(s.key);const n=this.data[t],i=this.parent(t);return t>0&&this.data[i].priority>n.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const Ce=(r,e,t,a,s)=>{const n=[],i=new Te,u=new Map,g=new Map,b=new Set,_=Array.from({length:a},(y,m)=>Array.from({length:t},(o,l)=>({x:l,y:m,isWall:s.has(E(l,m))}))).flat();for(const y of _){const m=y.x===r[0]&&y.y===r[1]?0:1/0,o=E(y.x,y.y);u.set(o,m),g.set(o,null),i.insert(y,m,o)}for(;!i.isEmpty();){const m=i.extractMin().value,o=E(m.x,m.y);if(b.has(o))continue;if(b.add(o),m.x===e[0]&&m.y===e[1])break;const l=u.get(o),f=[[m.x+1,m.y],[m.x-1,m.y],[m.x,m.y+1],[m.x,m.y-1]];for(const[h,c]of f){const M=_[h+c*t];if(M===void 0||M.isWall||h<0||c<0||h>=t||c>=a)continue;const x=E(M.x,M.y),A=l+1;A<u.get(x)&&(u.set(x,A),g.set(x,o),i.decreasePriority(x,A))}}let v=E(_[e[0]+t*e[1]].x,_[e[0]+t*e[1]].y);for(;v;){const[y,m]=v.split(",").map(l=>parseInt(l));n.unshift([y,m]);const o=g.get(v);if(!o)break;v=o}return n};function ce(r,e,t,a){const s=[],n=r,i=e;r=r%2===0?r+1:r,e=e%2===0?e+1:e;for(let l=0;l<e;l++)for(let f=0;f<r;f++)s.push({x:f,y:l,isWall:!0});const u=V(s,r,t[0],t[1]),g=se(u,r,e,s,2),b=new At,_=new Set,v=V(s,r,a[0],a[1]),y=se(v,r,e,s,2);u.isWall=!1,v.isWall=!1,_.add(E(u.x,u.y));for(const l of[...g,...y])b.add(l.cell);for(;b.size>0;){const l=b.random(),f=se(l,r,e,s,2),h=f.filter(x=>_.has(E(x.cell.x,x.cell.y)));if(h.length===0){b.remove(l);continue}const c=h[Math.floor(Math.random()*h.length)],M=V(s,r,l.x+c.direction[0],l.y+c.direction[1]);_.add(E(l.x,l.y)),M.isWall=!1,l.isWall=!1,b.remove(l);for(const x of f)_.has(E(x.cell.x,x.cell.y))||b.add(x.cell)}const m=new K(s.filter(l=>l.isWall&&(l.x!==a[0]||l.y!==a[1])&&l.x<n&&l.y<i).map(l=>E(l.x,l.y)));return Ce(t,a,n,i,m).length<=1?ce(n,i,t,a):m}function se(r,e,t,a,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:V(a,e,r.x+i[0]*s,r.y+i[1]*s),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<t)}function V(r,e,t,a){if(!(t<0||a<0))return r[t+e*a]}function E(r,e){return`${r},${e}`}var St=r=>{r.preventDefault()},Et=J('<div role="cell" tabindex="-1"></div>'),It=J('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function Nt(r,e){Ee(e,!0);let t=B(e,"start",31,()=>W([0,0])),a=B(e,"end",31,()=>W([e.width-1,e.height-1])),s=B(e,"walls",27,()=>W(ce(e.width,e.height,t(),a()))),n=B(e,"pathfindingAlgorithm",3,He),i=!1,u=new Set,g="add",b=oe(()=>n()(t(),a(),e.width,e.height,s()));function _(f,h,c){i=!0,c?g="remove":f===t()[0]&&h===t()[1]?g="movestart":f===a()[0]&&h===a()[1]?g="movegoal":g="add",v(f,h),u.add(E(f,h))}function v(f,h){const c=E(f,h);if(!(!i||f===t()[0]&&h===t()[1]||f===a()[0]&&h===a()[1])){switch(g){case"add":{u.has(c)||s().add(c);break}case"remove":{u.has(c)||s().delete(c);break}case"movestart":{(f!==a()[0]||h!==a()[1])&&t([f,h]);break}case"movegoal":{(f!==t()[0]||h!==t()[1])&&a([f,h]);break}}u.add(c)}}function y(f,h){switch(g){case"movestart":case"movegoal":{const c=E(f,h);s().delete(c)}}}function m(){i=!1,u.clear()}var o=It();ht("mouseup",Ne,()=>{m()});var l=L(o);ue(l,21,()=>({length:e.width}),pe,(f,h,c)=>{var M=ot(),x=ut(M);ue(x,17,()=>({length:e.height}),pe,(A,d,p)=>{var w=Et();let I;ge(w,`grid-column-start: ${c+1}; grid-row-start: ${p+1};`),w.__mousedown=N=>{_(c,p,N.button===2)},w.__mousemove=()=>{v(c,p)},w.__mouseup=()=>{y(c,p)},w.__contextmenu=[St],le(N=>I=_t(w,1,"cell svelte-c024sg",null,I,N),[()=>({wall:s().has(E(c,p)),start:c===t()[0]&&p===t()[1],goal:c===a()[0]&&p===a()[1],path:S(b).some(N=>N[0]===c&&N[1]===p)})]),q(A,w)}),q(f,M)}),H(l),H(o),le(()=>ge(l,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),q(r,o),Ie()}Oe(["mousedown","mousemove","mouseup","contextmenu"]);const He=(r,e,t,a,s)=>{const n=new Te,i=new Map,u=new Map,g=new Map,b=ye(r,e),_=E(r[0],r[1]);n.insert(r,0+b,_);for(let v=0;v<t;v++)for(let y=0;y<a;y++){const m=E(v,y);u.set(m,1/0),g.set(m,1/0)}for(u.set(_,0),g.set(_,b);!n.isEmpty();){const v=n.extractMin().value;if(v[0]===e[0]&&v[1]===e[1])return Ot(i,v);const y=E(v[0],v[1]);n.delete(y);const m=[[v[0]+1,v[1]],[v[0]-1,v[1]],[v[0],v[1]+1],[v[0],v[1]-1]];for(const o of m){const[l,f]=o,h=E(l,f);if(l<0||f<0||l>=t||f>=a||s.has(h))continue;const M=u.get(y)+1;if(M<u.get(h)){const x=M+ye(o,e);i.set(h,v),u.set(h,M),g.set(h,x),n.has(h)||n.insert(o,x,h)}}}return[r]};function Ot(r,e){const t=[e];for(;r.has(E(e[0],e[1]));)e=r.get(E(e[0],e[1])),t.unshift(e);return t}const ye=(r,e)=>Math.hypot(e[0]-r[0],e[1]-r[1]);function Dt(r,e){S(e).clear()}function kt(r,e,t,a,s,n){C(e,ce(t,a,S(s),S(n)),!0)}var Tt=J("<option> </option>"),Ct=J('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select></div></main>');function Rt(r,e){Ee(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:Ce},astar:{name:"A*",algorithm:He}};let a=z(W(new K)),s=50,n=25,i=z(W([0,0])),u=z(W([49,24])),g=z("astar"),b=oe(()=>t[S(g)].algorithm);var _=Ct();ft(c=>{Ne.title="Pathfinder"});var v=F(L(_),2),y=L(v),m=L(y);Nt(m,{width:s,height:n,get pathfindingAlgorithm(){return S(b)},get start(){return S(i)},set start(c){C(i,c,!0)},get end(){return S(u)},set end(c){C(u,c,!0)},get walls(){return S(a)},set walls(c){C(a,c,!0)}}),H(y);var o=F(y,2),l=L(o);l.__click=[Dt,a];var f=F(l,2);f.__click=[kt,a,s,n,i,u],H(o);var h=F(o,2);ue(h,21,()=>Object.entries(t),([c,M])=>c,(c,M,x,A)=>{var d=oe(()=>ct(S(M),2));let p=()=>S(d)[0],w=()=>S(d)[1];var I=Tt(),N=L(I,!0);H(I);var D={};le(()=>{Mt(I,p()===S(g)),dt(N,w().name),D!==(D=p())&&(I.value=(I.__value=p())??"")}),q(c,I)}),H(h),H(v),H(_),bt(h,()=>S(g),c=>C(g,c)),q(r,_),Ie()}Oe(["click"]);export{Rt as component};
