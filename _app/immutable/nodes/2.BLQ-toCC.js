import"../chunks/DsnmJJEf.js";import{au as xe,V as Re,a7 as j,T as k,am as qe,W as Ge,b as w,k as Ue,aL as Ke,Y as Fe,a9 as he,ap as ee,R,X as Ve,ax as Ye,Z as ne,aO as Qe,aM as Y,U as de,aR as Xe,M as ie,as as we,ak as Ae,aV as X,aP as Se,$ as Ze,aW as Z,aX as Be,aY as te,a6 as Ie,af as Je,aZ as $e,ar as je,a_ as et,i as tt,a$ as Ee,Q as at,b0 as rt,b1 as st,aQ as nt,ah as it,b2 as lt,b3 as ot,b4 as ut,aS as z,b5 as ve,e as D,O as ae,C as Oe,d as L,x as ft,E as B,F as le,a as q,G as Ne,aT as oe,b6 as Te,H as W,I as H,c as ct,f as ht,h as dt,J as F,b7 as vt}from"../chunks/DlFM8xMc.js";import{d as ke,a as pt,e as mt,s as gt}from"../chunks/Y9bf5WMX.js";import{p as V}from"../chunks/Bv3bz-ZJ.js";function pe(a,e){return e}function _t(a,e,t){for(var r=a.items,s=[],i=e.length,n=0;n<i;n++)$e(e[n].e,s,!0);var u=i>0&&s.length===0&&t!==null;if(u){var _=t.parentNode;je(_),_.append(t),r.clear(),C(a,e[0].prev,e[i-1].next)}et(s,()=>{for(var y=0;y<i;y++){var p=e[y];u||(r.delete(p.k),C(a,p.prev,p.next)),Ie(p.e,!u)}})}function ue(a,e,t,r,s,i=null){var n=a,u={flags:e,items:new Map,first:null},_=(e&Ee)!==0;if(_){var y=a;n=k?j(qe(y)):y.appendChild(xe())}k&&Ge();var p=null,l=!1,M=new Map,x=Ue(()=>{var d=t();return Ae(d)?d:d==null?[]:we(d)}),c,o;function h(){yt(o,c,u,M,n,s,e,r,t),i!==null&&(c.length===0?p?Se(p):p=ne(()=>i(n)):p!==null&&Ze(p,()=>{p=null}))}Re(()=>{o??=tt,c=w(x);var d=c.length;if(l&&d===0)return;l=d===0;let f=!1;if(k){var m=Ke(n)===Fe;m!==(d===0)&&(n=he(),j(n),ee(!1),f=!0)}if(k){for(var g=null,I,v=0;v<d;v++){if(R.nodeType===Ve&&R.data===Ye){n=R,f=!0,ee(!1);break}var b=c[v],E=r(b,v);I=fe(R,u,g,null,b,E,v,s,e,t),u.items.set(E,I),g=I}d>0&&j(he())}if(k)d===0&&i&&(p=ne(()=>i(n)));else if(Qe()){var A=new Set,N=Y;for(v=0;v<d;v+=1){b=c[v],E=r(b,v);var T=u.items.get(E)??M.get(E);T?(e&(Z|X))!==0&&De(T,b,v,e):(I=fe(null,u,null,null,b,E,v,s,e,t,!0),M.set(E,I)),A.add(E)}for(const[O,K]of u.items)A.has(O)||N.skipped_effects.add(K.e);N.add_callback(h)}else h();f&&ee(!0),w(x)}),k&&(n=R)}function yt(a,e,t,r,s,i,n,u,_){var y=(n&rt)!==0,p=(n&(Z|X))!==0,l=e.length,M=t.items,x=t.first,c=x,o,h=null,d,f=[],m=[],g,I,v,b;if(y)for(b=0;b<l;b+=1)g=e[b],I=u(g,b),v=M.get(I),v!==void 0&&(v.a?.measure(),(d??=new Set).add(v));for(b=0;b<l;b+=1){if(g=e[b],I=u(g,b),v=M.get(I),v===void 0){var E=r.get(I);if(E!==void 0){r.delete(I),M.set(I,E);var A=h?h.next:c;C(t,h,E),C(t,E,A),re(E,A,s),h=E}else{var N=c?c.e.nodes_start:s;h=fe(N,t,h,h===null?t.first:h.next,g,I,b,i,n,_)}M.set(I,h),f=[],m=[],c=h.next;continue}if(p&&De(v,g,b,n),(v.e.f&te)!==0&&(Se(v.e),y&&(v.a?.unfix(),(d??=new Set).delete(v))),v!==c){if(o!==void 0&&o.has(v)){if(f.length<m.length){var T=m[0],O;h=T.prev;var K=f[0],J=f[f.length-1];for(O=0;O<f.length;O+=1)re(f[O],T,s);for(O=0;O<m.length;O+=1)o.delete(m[O]);C(t,K.prev,J.next),C(t,h,K),C(t,J,T),c=T,h=J,b-=1,f=[],m=[]}else o.delete(v),re(v,c,s),C(t,v.prev,v.next),C(t,v,h===null?t.first:h.next),C(t,h,v),h=v;continue}for(f=[],m=[];c!==null&&c.k!==I;)(c.e.f&te)===0&&(o??=new Set).add(c),m.push(c),c=c.next;if(c===null)continue;v=c}f.push(v),h=v,c=v.next}if(c!==null||o!==void 0){for(var P=o===void 0?[]:we(o);c!==null;)(c.e.f&te)===0&&P.push(c),c=c.next;var $=P.length;if($>0){var We=(n&Ee)!==0&&l===0?s:null;if(y){for(b=0;b<$;b+=1)P[b].a?.measure();for(b=0;b<$;b+=1)P[b].a?.fix()}_t(t,P,We)}}y&&at(()=>{if(d!==void 0)for(v of d)v.a?.apply()}),a.first=t.first&&t.first.e,a.last=h&&h.e;for(var Pe of r.values())Ie(Pe.e);r.clear()}function De(a,e,t,r){(r&Z)!==0&&de(a.v,e),(r&X)!==0?de(a.i,t):a.i=t}function fe(a,e,t,r,s,i,n,u,_,y,p){var l=(_&Z)!==0,M=(_&Be)===0,x=l?M?Xe(s,!1,!1):ie(s):s,c=(_&X)===0?n:ie(n),o={i:c,v:x,k:i,a:null,e:null,prev:t,next:r};try{if(a===null){var h=document.createDocumentFragment();h.append(a=xe())}return o.e=ne(()=>u(a,x,c,y),k),o.e.prev=t&&t.e,o.e.next=r&&r.e,t===null?p||(e.first=o):(t.next=o,t.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function re(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,s=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==null&&i!==r;){var n=Je(i);s.before(i),i=n}}function C(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const me=[...` 	
\r\fÂ \v\uFEFF`];function bt(a,e,t){var r=""+a;if(t){for(var s in t)if(t[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,n=0;(n=r.indexOf(s,n))>=0;){var u=n+i;(n===0||me.includes(r[n-1]))&&(u===r.length||me.includes(r[u]))?r=(n===0?"":r.substring(0,n))+r.substring(u+1):n=u}}return r===""?null:r}function Mt(a,e){return a==null?null:String(a)}function xt(a,e,t,r,s,i){var n=a.__className;if(k||n!==t||n===void 0){var u=bt(t,r,i);(!k||u!==a.getAttribute("class"))&&(u==null?a.removeAttribute("class"):a.className=u),a.__className=t}else if(i&&s!==i)for(var _ in i){var y=!!i[_];(s==null||y!==!!s[_])&&a.classList.toggle(_,y)}return i}function ge(a,e,t,r){var s=a.__style;if(k||s!==e){var i=Mt(e);(!k||i!==a.getAttribute("style"))&&(i==null?a.removeAttribute("style"):a.style.cssText=i),a.__style=e}return r}function Ce(a,e,t=!1){if(a.multiple){if(e==null)return;if(!Ae(e))return lt();for(var r of a.options)r.selected=e.includes(G(r));return}for(r of a.options){var s=G(r);if(ot(s,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function wt(a){var e=new MutationObserver(()=>{Ce(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),it(()=>{e.disconnect()})}function At(a,e,t=e){var r=new WeakSet,s=!0;st(a,"change",i=>{var n=i?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(n),G);else{var _=a.querySelector(n)??a.querySelector("option:not([disabled])");u=_&&G(_)}t(u),Y!==null&&r.add(Y)}),nt(()=>{var i=e();if(a===document.activeElement){var n=ut??Y;if(r.has(n))return}if(Ce(a,i,s),s&&i===void 0){var u=a.querySelector(":checked");u!==null&&(i=G(u),t(i))}a.__value=i,s=!1}),wt(a)}function G(a){return"__value"in a?a.__value:a.value}function St(a,e){e?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}var It=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Et=["difference","intersection","symmetricDifference","union"],_e=!1;class U extends Set{#a=new Map;#e=z(0);#t=z(0);#r=ve||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}_e||this.#n()}#s(e){return ve===this.#r?z(e):ie(e)}#n(){_e=!0;var e=U.prototype,t=Set.prototype;for(const r of It)e[r]=function(...s){return w(this.#e),t[r].apply(this,s)};for(const r of Et)e[r]=function(...s){w(this.#e);var i=t[r].apply(this,s);return new U(i)}}has(e){var t=super.has(e),r=this.#a,s=r.get(e);if(s===void 0){if(!t)return w(this.#e),!1;s=this.#s(!0),r.set(e,s)}return w(s),t}add(e){return super.has(e)||(super.add(e),D(this.#t,super.size),ae(this.#e)),this}delete(e){var t=super.delete(e),r=this.#a,s=r.get(e);return s!==void 0&&(r.delete(e),D(s,!1)),t&&(D(this.#t,super.size),ae(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())D(t,!1);e.clear(),D(this.#t,0),ae(this.#e)}}keys(){return this.values()}values(){return w(this.#e),super.values()}entries(){return w(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return w(this.#t)}}class Ot{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}class He{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,r){if(this.indexMap.has(r)){this.decreasePriority(r,t);return}const s={value:e,priority:t,key:r};this.data.push(s);const i=this.data.length-1;this.indexMap.set(r,i),this.bubbleUp(i)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),r=this.right(e);let s=e;t<this.data.length&&this.data[t].priority<this.data[s].priority&&(s=t),r<this.data.length&&this.data[r].priority<this.data[s].priority&&(s=r),s!==e&&(this.swap(e,s),this.minHeapify(s))}decreasePriority(e,t){const r=this.indexMap.get(e);r!==void 0&&(t>=this.data[r].priority||(this.data[r].priority=t,this.bubbleUp(r)))}delete(e){const t=this.indexMap.get(e);if(t===void 0)return!1;const r=this.data.length-1;if(t===r)return this.indexMap.delete(e),this.data.pop(),!0;this.swap(t,r);const s=this.data.pop();this.indexMap.delete(s.key);const i=this.data[t],n=this.parent(t);return t>0&&this.data[n].priority>i.priority?this.bubbleUp(t):this.minHeapify(t),!0}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const ze=function*(a,e,t,r,s){const i=new He,n=new Map,u=new Map,_=new Set,y=Array.from({length:r},(p,l)=>Array.from({length:t},(M,x)=>({x,y:l,isWall:s.has(S(x,l))}))).flat();for(const p of y){const l=p.x===a[0]&&p.y===a[1]?0:1/0,M=S(p.x,p.y);n.set(M,l),i.insert(p,l,M)}for(;!i.isEmpty();){const l=i.extractMin().value,M=S(l.x,l.y);if(_.has(M))continue;if(_.add(M),l.x===e[0]&&l.y===e[1])break;const x=n.get(M),c=[[l.x+1,l.y],[l.x-1,l.y],[l.x,l.y+1],[l.x,l.y-1]];for(const[o,h]of c){const d=y[o+h*t];if(d===void 0||d.isWall||o<0||h<0||o>=t||h>=r)continue;const f=S(d.x,d.y),m=x+1;m<n.get(f)&&(n.set(f,m),u.set(f,[l.x,l.y]),i.decreasePriority(f,m),yield ye(u,[d.x,d.y]))}}yield ye(u,e)};function ye(a,e){const t=[e];for(;a.has(S(e[0],e[1]));)e=a.get(S(e[0],e[1])),t.unshift(e);return t}function ce(a,e,t,r){const s=[],i=a,n=e;a=a%2===0?a+1:a,e=e%2===0?e+1:e;for(let o=0;o<e;o++)for(let h=0;h<a;h++)s.push({x:h,y:o,isWall:!0});const u=Q(s,a,t[0],t[1]),_=se(u,a,e,s,2),y=new Ot,p=new Set,l=Q(s,a,r[0],r[1]),M=se(l,a,e,s,2);u.isWall=!1,l.isWall=!1,p.add(S(u.x,u.y));for(const o of[..._,...M])y.add(o.cell);for(;y.size>0;){const o=y.random(),h=se(o,a,e,s,2),d=h.filter(g=>p.has(S(g.cell.x,g.cell.y)));if(d.length===0){y.remove(o);continue}const f=d[Math.floor(Math.random()*d.length)],m=Q(s,a,o.x+f.direction[0],o.y+f.direction[1]);p.add(S(o.x,o.y)),m.isWall=!1,o.isWall=!1,y.remove(o);for(const g of h)p.has(S(g.cell.x,g.cell.y))||y.add(g.cell)}const x=new U(s.filter(o=>o.isWall&&(o.x!==r[0]||o.y!==r[1])&&o.x<i&&o.y<n).map(o=>S(o.x,o.y)));return ze(t,r,i,n,x).length<=1?ce(i,n,t,r):x}function se(a,e,t,r,s=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(n=>({cell:Q(r,e,a.x+n[0]*s,a.y+n[1]*s),direction:n})).filter(n=>n.cell&&n.cell.x>=0&&n.cell.y>=0&&n.cell.x<e&&n.cell.y<t)}function Q(a,e,t,r){if(!(t<0||r<0))return a[t+e*r]}function S(a,e){return`${a},${e}`}var Nt=a=>{a.preventDefault()},Tt=B('<div role="cell" tabindex="-1"></div>'),kt=B('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function Dt(a,e){Oe(e,!0);let t=V(e,"start",31,()=>L([0,0])),r=V(e,"end",31,()=>L([e.width-1,e.height-1])),s=V(e,"walls",27,()=>L(ce(e.width,e.height,t(),r()))),i=V(e,"pathfindingAlgorithm",3,Le),n=!1,u=new Set,_="add",y=oe(()=>(s().size,i()(t(),r(),e.width,e.height,s()))),p=z(L([])),l=null;ft(()=>{l!==null&&clearInterval(l),l=setInterval(()=>{const f=w(y).next();D(p,w(y).next().value,!0),f.done&&(clearInterval(l),l=null)},10)});function M(f,m,g){n=!0,g?_="remove":f===t()[0]&&m===t()[1]?_="movestart":f===r()[0]&&m===r()[1]?_="movegoal":_="add",x(f,m),u.add(S(f,m))}function x(f,m){const g=S(f,m);if(!(!n||f===t()[0]&&m===t()[1]||f===r()[0]&&m===r()[1])){switch(_){case"add":{u.has(g)||s().add(g);break}case"remove":{u.has(g)||s().delete(g);break}case"movestart":{(f!==r()[0]||m!==r()[1])&&t([f,m]);break}case"movegoal":{(f!==t()[0]||m!==t()[1])&&r([f,m]);break}}u.add(g)}}function c(f,m){switch(_){case"movestart":case"movegoal":{const g=S(f,m);s().delete(g)}}}function o(){n=!1,u.clear()}pt(()=>{l!==null&&clearInterval(l)});var h=kt();mt("mouseup",Te,()=>{o()});var d=W(h);ue(d,21,()=>({length:e.width}),pe,(f,m,g)=>{var I=ct(),v=ht(I);ue(v,17,()=>({length:e.height}),pe,(b,E,A)=>{var N=Tt();let T;ge(N,`grid-column-start: ${g+1}; grid-row-start: ${A+1};`),N.__mousedown=O=>{M(g,A,O.button===2)},N.__mousemove=()=>{x(g,A)},N.__mouseup=()=>{c(g,A)},N.__contextmenu=[Nt],le(O=>T=xt(N,1,"cell svelte-c024sg",null,T,O),[()=>({wall:s().has(S(g,A)),start:g===t()[0]&&A===t()[1],goal:g===r()[0]&&A===r()[1],path:w(p).some(O=>O[0]===g&&O[1]===A)})]),q(b,N)}),q(f,I)}),H(d),H(h),le(()=>ge(d,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),q(a,h),Ne()}ke(["mousedown","mousemove","mouseup","contextmenu"]);const Le=function*(a,e,t,r,s){const i=new He,n=new Map,u=new Map,_=new Map,y=Me(a,e),p=S(a[0],a[1]);i.insert(a,0+y,p);for(let l=0;l<t;l++)for(let M=0;M<r;M++){const x=S(l,M);u.set(x,1/0),_.set(x,1/0)}for(u.set(p,0),_.set(p,y);!i.isEmpty();){const l=i.extractMin().value;if(l[0]===e[0]&&l[1]===e[1]){yield be(n,l);return}const M=S(l[0],l[1]);i.delete(M);const x=[[l[0]+1,l[1]],[l[0]-1,l[1]],[l[0],l[1]+1],[l[0],l[1]-1]];for(const c of x){const[o,h]=c,d=S(o,h);if(o<0||h<0||o>=t||h>=r||s.has(d))continue;const m=u.get(M)+1;if(m<u.get(d)){const g=m+Me(c,e);n.set(d,l),u.set(d,m),_.set(d,g),i.has(d)||i.insert(c,g,d),yield be(n,c)}}}yield[a]};function be(a,e){const t=[e];for(;a.has(S(e[0],e[1]));)e=a.get(S(e[0],e[1])),t.unshift(e);return t}const Me=(a,e)=>Math.hypot(e[0]-a[0],e[1]-a[1]);function Ct(a,e){w(e).clear()}function Ht(a,e,t,r,s,i){D(e,ce(t,r,w(s),w(i)),!0)}var zt=B("<option> </option>"),Lt=B('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div> <div><button>Clear</button> <button>Generate Maze</button></div> <select></select></div></main>');function Gt(a,e){Oe(e,!0);const t={dijkstra:{name:"Dijkstra's Algorithm",algorithm:ze},astar:{name:"A*",algorithm:Le}};let r=z(L(new U)),s=50,i=25,n=z(L([0,0])),u=z(L([49,24])),_=z("astar"),y=oe(()=>t[w(_)].algorithm);var p=Lt();dt(f=>{Te.title="Pathfinder"});var l=F(W(p),2),M=W(l),x=W(M);Dt(x,{width:s,height:i,get pathfindingAlgorithm(){return w(y)},get start(){return w(n)},set start(f){D(n,f,!0)},get end(){return w(u)},set end(f){D(u,f,!0)},get walls(){return w(r)},set walls(f){D(r,f,!0)}}),H(M);var c=F(M,2),o=W(c);o.__click=[Ct,r];var h=F(o,2);h.__click=[Ht,r,s,i,n,u],H(c);var d=F(c,2);ue(d,21,()=>Object.entries(t),([f,m])=>f,(f,m,g,I)=>{var v=oe(()=>vt(w(m),2));let b=()=>w(v)[0],E=()=>w(v)[1];var A=zt(),N=W(A,!0);H(A);var T={};le(()=>{St(A,b()===w(_)),gt(N,E().name),T!==(T=b())&&(A.value=(A.__value=b())??"")}),q(f,A)}),H(d),H(l),H(p),At(d,()=>w(_),f=>D(_,f)),q(a,p),Ne()}ke(["click"]);export{Gt as component};
