import"../chunks/DsnmJJEf.js";import"../chunks/uDWIAH8A.js";import{av as de,b as be,ae as X,d as S,m as xe,e as Ee,A as T,G as Ae,aK as Oe,a8 as Se,ag as re,aq as F,l as z,a7 as Ne,ax as Ie,j,aN as Te,aL as Ce,a6 as se,aQ as De,a3 as $,at as ve,u as ze,aU as q,aO as pe,aa as He,aV as K,aW as ke,aX as Q,k as me,al as Le,aY as Re,as as We,aZ as Ue,x as Pe,a_ as ge,q as qe,a$ as Ke,aR as Z,b0 as ie,C as H,a5 as B,X as Ye,Y as ae,Z as ne,a as W,_ as Ve,b1 as _e,$ as U,a0 as k,c as Xe,f as Fe,aS as Qe,h as Ze,a1 as Be}from"../chunks/CdaaPVoF.js";import{d as Ge,e as Je}from"../chunks/DX67L_GN.js";import{p as G}from"../chunks/Dj_nLYmj.js";function le(s,e){return e}function je(s,e,t){for(var a=s.items,r=[],l=e.length,i=0;i<l;i++)Re(e[i].e,r,!0);var h=l>0&&r.length===0&&t!==null;if(h){var c=t.parentNode;We(c),c.append(t),a.clear(),I(s,e[0].prev,e[l-1].next)}Ue(r,()=>{for(var m=0;m<l;m++){var g=e[m];h||(a.delete(g.k),I(s,g.prev,g.next)),me(g.e,!h)}})}function oe(s,e,t,a,r,l=null){var i=s,h={flags:e,items:new Map,first:null},c=(e&ge)!==0;if(c){var m=s;i=S?X(xe(m)):m.appendChild(de())}S&&Ee();var g=null,w=!1,_=new Map,d=Ae(()=>{var v=t();return ze(v)?v:v==null?[]:ve(v)}),n,u;function f(){$e(u,n,h,_,i,r,e,a,t),l!==null&&(n.length===0?g?pe(g):g=j(()=>l(i)):g!==null&&He(g,()=>{g=null}))}be(()=>{u??=Pe,n=T(d);var v=n.length;if(w&&v===0)return;w=v===0;let M=!1;if(S){var x=Oe(i)===Se;x!==(v===0)&&(i=re(),X(i),F(!1),M=!0)}if(S){for(var E=null,y,o=0;o<v;o++){if(z.nodeType===Ne&&z.data===Ie){i=z,M=!0,F(!1);break}var p=n[o],b=a(p,o);y=ee(z,h,E,null,p,b,o,r,e,t),h.items.set(b,y),E=y}v>0&&X(re())}if(S)v===0&&l&&(g=j(()=>l(i)));else if(Te()){var O=new Set,L=Ce;for(o=0;o<v;o+=1){p=n[o],b=a(p,o);var C=h.items.get(b)??_.get(b);C?(e&(K|q))!==0&&ye(C,p,o,e):(y=ee(null,h,null,null,p,b,o,r,e,t,!0),_.set(b,y)),O.add(b)}for(const[N,R]of h.items)O.has(N)||L.skipped_effects.add(R.e);L.add_callback(f)}else f();M&&F(!0),T(d)}),S&&(i=z)}function $e(s,e,t,a,r,l,i,h,c){var m=(i&Ke)!==0,g=(i&(K|q))!==0,w=e.length,_=t.items,d=t.first,n=d,u,f=null,v,M=[],x=[],E,y,o,p;if(m)for(p=0;p<w;p+=1)E=e[p],y=h(E,p),o=_.get(y),o!==void 0&&(o.a?.measure(),(v??=new Set).add(o));for(p=0;p<w;p+=1){if(E=e[p],y=h(E,p),o=_.get(y),o===void 0){var b=a.get(y);if(b!==void 0){a.delete(y),_.set(y,b);var O=f?f.next:n;I(t,f,b),I(t,b,O),J(b,O,r),f=b}else{var L=n?n.e.nodes_start:r;f=ee(L,t,f,f===null?t.first:f.next,E,y,p,l,i,c)}_.set(y,f),M=[],x=[],n=f.next;continue}if(g&&ye(o,E,p,i),(o.e.f&Q)!==0&&(pe(o.e),m&&(o.a?.unfix(),(v??=new Set).delete(o))),o!==n){if(u!==void 0&&u.has(o)){if(M.length<x.length){var C=x[0],N;f=C.prev;var R=M[0],Y=M[M.length-1];for(N=0;N<M.length;N+=1)J(M[N],C,r);for(N=0;N<x.length;N+=1)u.delete(x[N]);I(t,R.prev,Y.next),I(t,f,R),I(t,Y,C),n=C,f=Y,p-=1,M=[],x=[]}else u.delete(o),J(o,n,r),I(t,o.prev,o.next),I(t,o,f===null?t.first:f.next),I(t,f,o),f=o;continue}for(M=[],x=[];n!==null&&n.k!==y;)(n.e.f&Q)===0&&(u??=new Set).add(n),x.push(n),n=n.next;if(n===null)continue;o=n}M.push(o),f=o,n=o.next}if(n!==null||u!==void 0){for(var D=u===void 0?[]:ve(u);n!==null;)(n.e.f&Q)===0&&D.push(n),n=n.next;var V=D.length;if(V>0){var Me=(i&ge)!==0&&w===0?r:null;if(m){for(p=0;p<V;p+=1)D[p].a?.measure();for(p=0;p<V;p+=1)D[p].a?.fix()}je(t,D,Me)}}m&&qe(()=>{if(v!==void 0)for(o of v)o.a?.apply()}),s.first=t.first&&t.first.e,s.last=f&&f.e;for(var we of a.values())me(we.e);a.clear()}function ye(s,e,t,a){(a&K)!==0&&se(s.v,e),(a&q)!==0?se(s.i,t):s.i=t}function ee(s,e,t,a,r,l,i,h,c,m,g){var w=(c&K)!==0,_=(c&ke)===0,d=w?_?De(r,!1,!1):$(r):r,n=(c&q)===0?i:$(i),u={i:n,v:d,k:l,a:null,e:null,prev:t,next:a};try{if(s===null){var f=document.createDocumentFragment();f.append(s=de())}return u.e=j(()=>h(s,d,n,m),S),u.e.prev=t&&t.e,u.e.next=a&&a.e,t===null?g||(e.first=u):(t.next=u,t.e.next=u.e),a!==null&&(a.prev=u,a.e.prev=u.e),u}finally{}}function J(s,e,t){for(var a=s.next?s.next.e.nodes_start:t,r=e?e.e.nodes_start:t,l=s.e.nodes_start;l!==null&&l!==a;){var i=Le(l);r.before(l),l=i}}function I(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const ue=[...` 	
\r\fÂ \v\uFEFF`];function et(s,e,t){var a=""+s;if(t){for(var r in t)if(t[r])a=a?a+" "+r:r;else if(a.length)for(var l=r.length,i=0;(i=a.indexOf(r,i))>=0;){var h=i+l;(i===0||ue.includes(a[i-1]))&&(h===a.length||ue.includes(a[h]))?a=(i===0?"":a.substring(0,i))+a.substring(h+1):i=h}}return a===""?null:a}function tt(s,e){return s==null?null:String(s)}function at(s,e,t,a,r,l){var i=s.__className;if(S||i!==t||i===void 0){var h=et(t,a,l);(!S||h!==s.getAttribute("class"))&&(h==null?s.removeAttribute("class"):s.className=h),s.__className=t}else if(l&&r!==l)for(var c in l){var m=!!l[c];(r==null||m!==!!r[c])&&s.classList.toggle(c,m)}return l}function fe(s,e,t,a){var r=s.__style;if(S||r!==e){var l=tt(e);(!S||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=e}return a}class rt{data=[];indexMap=new Map;left(e){return 2*e+1}right(e){return 2*e+2}parent(e){return Math.floor((e-1)/2)}swap(e,t){[this.data[e],this.data[t]]=[this.data[t],this.data[e]],this.indexMap.set(this.data[e].key,e),this.indexMap.set(this.data[t].key,t)}peek(){return this.data[0]}insert(e,t,a){if(this.indexMap.has(a)){this.decreasePriority(a,t);return}const r={value:e,priority:t,key:a};this.data.push(r);const l=this.data.length-1;this.indexMap.set(a,l),this.bubbleUp(l)}bubbleUp(e){for(;e>0&&this.data[this.parent(e)].priority>this.data[e].priority;){const t=this.parent(e);this.swap(e,t),e=t}}extractMin(){if(this.data.length===0)return null;const e=this.data[0],t=this.data.pop();return this.indexMap.delete(e.key),this.data.length>0&&(this.data[0]=t,this.indexMap.set(t.key,0),this.minHeapify(0)),e}minHeapify(e){const t=this.left(e),a=this.right(e);let r=e;t<this.data.length&&this.data[t].priority<this.data[r].priority&&(r=t),a<this.data.length&&this.data[a].priority<this.data[r].priority&&(r=a),r!==e&&(this.swap(e,r),this.minHeapify(r))}decreasePriority(e,t){const a=this.indexMap.get(e);a!==void 0&&(t>=this.data[a].priority||(this.data[a].priority=t,this.bubbleUp(a)))}has(e){return this.indexMap.has(e)}isEmpty(){return this.data.length===0}size(){return this.data.length}}const st=(s,e,t,a,r)=>{const l=[],i=new rt,h=new Map,c=new Map,m=new Set,g=Array.from({length:a},(_,d)=>Array.from({length:t},(n,u)=>({x:u,y:d,isWall:r.has(A(u,d))}))).flat();for(const _ of g){const d=_.x===s[0]&&_.y===s[1]?0:1/0,n=A(_.x,_.y);h.set(n,d),c.set(n,null),i.insert(_,d,n)}for(console.log(h);!i.isEmpty();){const d=i.extractMin().value,n=A(d.x,d.y);if(m.has(n))continue;if(m.add(n),d.x===e[0]&&d.y===e[1])break;const u=h.get(n),f=[[d.x+1,d.y],[d.x-1,d.y],[d.x,d.y+1],[d.x,d.y-1]];for(const[v,M]of f){const x=g[v+M*t];if(x===void 0||x.isWall||v<0||M<0||v>=t||M>=a)continue;const E=A(x.x,x.y),y=u+1;E==="0,0"&&console.log({distance:y,current:d}),y<h.get(E)&&(h.set(E,y),c.set(E,n),i.decreasePriority(E,y))}}let w=A(g[e[0]+t*e[1]].x,g[e[0]+t*e[1]].y);for(;w;){const[_,d]=w.split(",").map(u=>parseInt(u));l.unshift([_,d]);const n=c.get(w);if(!n)break;w=n}return l};var it=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],nt=["difference","intersection","symmetricDifference","union"],he=!1;class P extends Set{#a=new Map;#e=Z(0);#t=Z(0);#r=ie||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}he||this.#i()}#s(e){return ie===this.#r?Z(e):$(e)}#i(){he=!0;var e=P.prototype,t=Set.prototype;for(const a of it)e[a]=function(...r){return T(this.#e),t[a].apply(this,r)};for(const a of nt)e[a]=function(...r){T(this.#e);var l=t[a].apply(this,r);return new P(l)}}has(e){var t=super.has(e),a=this.#a,r=a.get(e);if(r===void 0){if(!t)return T(this.#e),!1;r=this.#s(!0),a.set(e,r)}return T(r),t}add(e){return super.has(e)||(super.add(e),H(this.#t,super.size),B(this.#e)),this}delete(e){var t=super.delete(e),a=this.#a,r=a.get(e);return r!==void 0&&(a.delete(e),H(r,!1)),t&&(H(this.#t,super.size),B(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#a;for(var t of e.values())H(t,!1);e.clear(),H(this.#t,0),B(this.#e)}}keys(){return this.values()}values(){return T(this.#e),super.values()}entries(){return T(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return T(this.#t)}}class lt{array;maxLength;constructor(e=1/0){this.array=[],this.maxLength=e}*[Symbol.iterator](){for(let e=0;e<this.array.length;e++)yield this.array[e]}add(e){this.array.includes(e)||this.array.length===this.maxLength||this.array.push(e)}remove(e){const t=this.array.indexOf(e);t!==-1&&this.array.splice(t,1)}get(e){return this.array[e]}has(e){return this.array.includes(e)}random(){return this.array[Math.floor(Math.random()*this.array.length)]}indexOf(e){return this.array.indexOf(e)}clear(){this.array.splice(0,this.array.length)}get size(){return this.array.length}}function ot(s,e,t){const a=[];for(let c=0;c<e;c++)for(let m=0;m<s;m++)a.push({x:m,y:c,isWall:!0});const r=te(a,s,t[0],t[1]),l=ce(r,s,e,a,2),i=new lt,h=new Set;r.isWall=!1,h.add(A(r.x,r.y));for(const c of l)i.add(c.cell);for(;i.size>0;){const c=i.random(),m=ce(c,s,e,a,2),g=m.filter(d=>h.has(A(d.cell.x,d.cell.y)));if(g.length===0){i.remove(c);continue}const w=g[Math.floor(Math.random()*g.length)],_=te(a,s,c.x+w.direction[0],c.y+w.direction[1]);h.add(A(c.x,c.y)),_.isWall=!1,c.isWall=!1,i.remove(c);for(const d of m)h.has(A(d.cell.x,d.cell.y))||i.add(d.cell)}return new P(a.filter(c=>c.isWall).map(c=>A(c.x,c.y)))}function ce(s,e,t,a,r=1){return[[1,0],[0,1],[-1,0],[0,-1]].map(i=>({cell:te(a,e,s.x+i[0]*r,s.y+i[1]*r),direction:i})).filter(i=>i.cell&&i.cell.x>=0&&i.cell.y>=0&&i.cell.x<e&&i.cell.y<t)}function te(s,e,t,a){if(!(t<0||a<0))return s[t+e*a]}function A(s,e){return`${s},${e}`}var ut=s=>{s.preventDefault()},ft=ae('<div role="cell" tabindex="-1"></div>'),ht=ae('<div class="container svelte-c024sg"><div class="grid svelte-c024sg"></div></div>');function ct(s,e){Ye(e,!0);let t=G(e,"start",23,()=>[0,0]),a=G(e,"goal",23,()=>[e.width-1,e.height-1]),r=G(e,"walls",19,()=>ot(e.width,e.height,t())),l=!1,i=new Set,h="add",c=Qe(()=>st(t(),a(),e.width,e.height,r()));function m(u,f,v){l=!0,v?h="remove":u===t()[0]&&f===t()[1]?h="movestart":u===a()[0]&&f===a()[1]?h="movegoal":h="add",g(u,f),i.add(A(u,f))}function g(u,f){const v=A(u,f);if(!(!l||u===t()[0]&&f===t()[1]||u===a()[0]&&f===a()[1])){switch(h){case"add":{i.has(v)||r().add(v);break}case"remove":{i.has(v)||r().delete(v);break}case"movestart":{(u!==a()[0]||f!==a()[1])&&t([u,f]);break}case"movegoal":{(u!==t()[0]||f!==t()[1])&&a([u,f]);break}}i.add(v)}}function w(u,f){switch(h){case"movestart":case"movegoal":{const v=A(u,f);r().delete(v)}}}function _(){l=!1,i.clear()}var d=ht();Je("mouseup",_e,()=>{_()});var n=U(d);oe(n,21,()=>({length:e.width}),le,(u,f,v)=>{var M=Xe(),x=Fe(M);oe(x,17,()=>({length:e.height}),le,(E,y,o)=>{var p=ft();let b;fe(p,`grid-column-start: ${v+1}; grid-row-start: ${o+1};`),p.__mousedown=O=>{m(v,o,O.button===2)},p.__mousemove=()=>{g(v,o)},p.__mouseup=()=>{w(v,o)},p.__contextmenu=[ut],ne(O=>b=at(p,1,"cell svelte-c024sg",null,b,O),[()=>({wall:r().has(A(v,o)),start:v===t()[0]&&o===t()[1],goal:v===a()[0]&&o===a()[1],path:T(c).some(O=>O[0]===v&&O[1]===o)})]),W(E,p)}),W(u,M)}),k(n),k(d),ne(()=>fe(n,`grid-template-columns: repeat(${e.width??""}, 1fr)`)),W(s,d),Ve()}Ge(["mousedown","mousemove","mouseup","contextmenu"]);var dt=ae('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Pathfinder</h1> <div class="centre svelte-1uha8ag" style="left: -8px; position: relative;"><div class="path-container svelte-1uha8ag"><!></div></div></main>');function yt(s){var e=dt();Ze(l=>{_e.title="Pathfinder"});var t=Be(U(e),2),a=U(t),r=U(a);ct(r,{width:51,height:25}),k(a),k(t),k(e),W(s,e)}export{yt as component};
